

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>nltk.stem.snowball</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="" href="../../../index.html"/>
        <link rel="up" title="nltk" href="../../nltk.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> NLP APIs
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../gensim_tutorial/tutorial.html">Gensim Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../nltk_intro.html">Natural Language Toolkit</a></li>
</ul>
<p class="caption"><span class="caption-text">Autogenerated API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/nltk.html"><code class="docutils literal"><span class="pre">nltk</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/gensim.html"><code class="docutils literal"><span class="pre">gensim</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/gensim.interfaces.html"><code class="docutils literal"><span class="pre">gensim.interfaces</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/gensim.matutils.html"><code class="docutils literal"><span class="pre">gensim.matutils</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/gensim.utils.html"><code class="docutils literal"><span class="pre">gensim.utils</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/gensim.corpora.html"><code class="docutils literal"><span class="pre">gensim.corpora</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/gensim.models.html"><code class="docutils literal"><span class="pre">gensim.models</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/gensim.parsing.html"><code class="docutils literal"><span class="pre">gensim.parsing</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/gensim.scripts.html"><code class="docutils literal"><span class="pre">gensim.scripts</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/gensim.similarities.html"><code class="docutils literal"><span class="pre">gensim.similarities</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/gensim.summarization.html"><code class="docutils literal"><span class="pre">gensim.summarization</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/gensim.topic_coherence.html"><code class="docutils literal"><span class="pre">gensim.topic_coherence</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/simserver.html"><code class="docutils literal"><span class="pre">simserver</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/word2vec.html"><code class="docutils literal"><span class="pre">word2vec</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/stop_words.html"><code class="docutils literal"><span class="pre">stop_words</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/nltk.classify.html"><code class="docutils literal"><span class="pre">nltk.classify</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../generated/nltk.cluster.html"><code class="docutils literal"><span class="pre">nltk.cluster</span></code></a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">NLP APIs</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          













<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    
      <li><a href="../../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../../index.html">Module code</a> &raquo;</li>
        
          <li><a href="../../nltk.html">nltk</a> &raquo;</li>
        
      <li>nltk.stem.snowball</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <h1>Source code for nltk.stem.snowball</h1><div class="highlight"><pre>
<span></span><span class="c1"># -*- coding: utf-8 -*-</span>
<span class="c1">#</span>
<span class="c1"># Natural Language Toolkit: Snowball Stemmer</span>
<span class="c1">#</span>
<span class="c1"># Copyright (C) 2001-2015 NLTK Project</span>
<span class="c1"># Author: Peter Michael Stahl &lt;pemistahl@gmail.com&gt;</span>
<span class="c1">#         Peter Ljunglof &lt;peter.ljunglof@heatherleaf.se&gt; (revisions)</span>
<span class="c1"># Algorithms: Dr Martin Porter &lt;martin@tartarus.org&gt;</span>
<span class="c1"># URL: &lt;http://nltk.org/&gt;</span>
<span class="c1"># For license information, see LICENSE.TXT</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Snowball stemmers</span>

<span class="sd">This module provides a port of the Snowball stemmers</span>
<span class="sd">developed by Martin Porter.</span>

<span class="sd">There is also a demo function: `snowball.demo()`.</span>

<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">unicode_literals</span><span class="p">,</span> <span class="n">print_function</span>

<span class="kn">from</span> <span class="nn">nltk</span> <span class="kn">import</span> <span class="n">compat</span>
<span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">stopwords</span>
<span class="kn">from</span> <span class="nn">nltk.stem</span> <span class="kn">import</span> <span class="n">porter</span>
<span class="kn">from</span> <span class="nn">nltk.stem.util</span> <span class="kn">import</span> <span class="n">suffix_replace</span>

<span class="kn">from</span> <span class="nn">nltk.stem.api</span> <span class="kn">import</span> <span class="n">StemmerI</span>


<div class="viewcode-block" id="SnowballStemmer"><a class="viewcode-back" href="../../../generated/generated/nltk.SnowballStemmer.html#nltk.SnowballStemmer">[docs]</a><span class="k">class</span> <span class="nc">SnowballStemmer</span><span class="p">(</span><span class="n">StemmerI</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Snowball Stemmer</span>

<span class="sd">    The following languages are supported:</span>
<span class="sd">    Danish, Dutch, English, Finnish, French, German,</span>
<span class="sd">    Hungarian, Italian, Norwegian, Portuguese, Romanian, Russian,</span>
<span class="sd">    Spanish and Swedish.</span>

<span class="sd">    The algorithm for English is documented here:</span>

<span class="sd">        Porter, M. \&quot;An algorithm for suffix stripping.\&quot;</span>
<span class="sd">        Program 14.3 (1980): 130-137.</span>

<span class="sd">    The algorithms have been developed by Martin Porter.</span>
<span class="sd">    These stemmers are called Snowball, because Porter created</span>
<span class="sd">    a programming language with this name for creating</span>
<span class="sd">    new stemming algorithms. There is more information available</span>
<span class="sd">    at http://snowball.tartarus.org/</span>

<span class="sd">    The stemmer is invoked as shown below:</span>

<span class="sd">    &gt;&gt;&gt; from nltk.stem import SnowballStemmer</span>
<span class="sd">    &gt;&gt;&gt; print(&quot; &quot;.join(SnowballStemmer.languages)) # See which languages are supported</span>
<span class="sd">    danish dutch english finnish french german hungarian</span>
<span class="sd">    italian norwegian porter portuguese romanian russian</span>
<span class="sd">    spanish swedish</span>
<span class="sd">    &gt;&gt;&gt; stemmer = SnowballStemmer(&quot;german&quot;) # Choose a language</span>
<span class="sd">    &gt;&gt;&gt; stemmer.stem(&quot;Autobahnen&quot;) # Stem a word</span>
<span class="sd">    &#39;autobahn&#39;</span>

<span class="sd">    Invoking the stemmers that way is useful if you do not know the</span>
<span class="sd">    language to be stemmed at runtime. Alternatively, if you already know</span>
<span class="sd">    the language, then you can invoke the language specific stemmer directly:</span>

<span class="sd">    &gt;&gt;&gt; from nltk.stem.snowball import GermanStemmer</span>
<span class="sd">    &gt;&gt;&gt; stemmer = GermanStemmer()</span>
<span class="sd">    &gt;&gt;&gt; stemmer.stem(&quot;Autobahnen&quot;)</span>
<span class="sd">    &#39;autobahn&#39;</span>

<span class="sd">    :param language: The language whose subclass is instantiated.</span>
<span class="sd">    :type language: str or unicode</span>
<span class="sd">    :param ignore_stopwords: If set to True, stopwords are</span>
<span class="sd">                             not stemmed and returned unchanged.</span>
<span class="sd">                             Set to False by default.</span>
<span class="sd">    :type ignore_stopwords: bool</span>
<span class="sd">    :raise ValueError: If there is no stemmer for the specified</span>
<span class="sd">                           language, a ValueError is raised.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">languages</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;danish&quot;</span><span class="p">,</span> <span class="s2">&quot;dutch&quot;</span><span class="p">,</span> <span class="s2">&quot;english&quot;</span><span class="p">,</span> <span class="s2">&quot;finnish&quot;</span><span class="p">,</span> <span class="s2">&quot;french&quot;</span><span class="p">,</span> <span class="s2">&quot;german&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;hungarian&quot;</span><span class="p">,</span> <span class="s2">&quot;italian&quot;</span><span class="p">,</span> <span class="s2">&quot;norwegian&quot;</span><span class="p">,</span> <span class="s2">&quot;porter&quot;</span><span class="p">,</span> <span class="s2">&quot;portuguese&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;romanian&quot;</span><span class="p">,</span> <span class="s2">&quot;russian&quot;</span><span class="p">,</span> <span class="s2">&quot;spanish&quot;</span><span class="p">,</span> <span class="s2">&quot;swedish&quot;</span><span class="p">)</span>

<div class="viewcode-block" id="SnowballStemmer.__init__"><a class="viewcode-back" href="../../../generated/generated/nltk.SnowballStemmer.__init__.html#nltk.SnowballStemmer.__init__">[docs]</a>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">language</span><span class="p">,</span> <span class="n">ignore_stopwords</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">language</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">languages</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The language &#39;</span><span class="si">%s</span><span class="s2">&#39; is not supported.&quot;</span> <span class="o">%</span> <span class="n">language</span><span class="p">)</span>
        <span class="n">stemmerclass</span> <span class="o">=</span> <span class="nb">globals</span><span class="p">()[</span><span class="n">language</span><span class="o">.</span><span class="n">capitalize</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;Stemmer&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stemmer</span> <span class="o">=</span> <span class="n">stemmerclass</span><span class="p">(</span><span class="n">ignore_stopwords</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stem</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stemmer</span><span class="o">.</span><span class="n">stem</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">stopwords</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stemmer</span><span class="o">.</span><span class="n">stopwords</span></div></div>


<span class="nd">@compat.python_2_unicode_compatible</span>
<span class="k">class</span> <span class="nc">_LanguageSpecificStemmer</span><span class="p">(</span><span class="n">StemmerI</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This helper subclass offers the possibility</span>
<span class="sd">    to invoke a specific stemmer directly.</span>
<span class="sd">    This is useful if you already know the language to be stemmed at runtime.</span>

<span class="sd">    Create an instance of the Snowball stemmer.</span>

<span class="sd">    :param ignore_stopwords: If set to True, stopwords are</span>
<span class="sd">                             not stemmed and returned unchanged.</span>
<span class="sd">                             Set to False by default.</span>
<span class="sd">    :type ignore_stopwords: bool</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore_stopwords</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="c1"># The language is the name of the class, minus the final &quot;Stemmer&quot;.</span>
        <span class="n">language</span> <span class="o">=</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__name__</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">language</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;stemmer&quot;</span><span class="p">):</span>
            <span class="n">language</span> <span class="o">=</span> <span class="n">language</span><span class="p">[:</span><span class="o">-</span><span class="mi">7</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">stopwords</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ignore_stopwords</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">stopwords</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="n">language</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">stopwords</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">IOError</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;</span><span class="si">%r</span><span class="s2"> has no list of stopwords. Please set&quot;</span>
                                 <span class="s2">&quot; &#39;ignore_stopwords&#39; to &#39;False&#39;.&quot;</span> <span class="o">%</span> <span class="bp">self</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Print out the string representation of the respective class.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="s2">&quot;&lt;</span><span class="si">%s</span><span class="s2">&gt;&quot;</span> <span class="o">%</span> <span class="nb">type</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">__name__</span>


<span class="k">class</span> <span class="nc">PorterStemmer</span><span class="p">(</span><span class="n">_LanguageSpecificStemmer</span><span class="p">,</span> <span class="n">porter</span><span class="o">.</span><span class="n">PorterStemmer</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    A word stemmer based on the original Porter stemming algorithm.</span>

<span class="sd">        Porter, M. \&quot;An algorithm for suffix stripping.\&quot;</span>
<span class="sd">        Program 14.3 (1980): 130-137.</span>

<span class="sd">    A few minor modifications have been made to Porter&#39;s basic</span>
<span class="sd">    algorithm.  See the source code of the module</span>
<span class="sd">    nltk.stem.porter for more information.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore_stopwords</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="n">_LanguageSpecificStemmer</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ignore_stopwords</span><span class="p">)</span>
        <span class="n">porter</span><span class="o">.</span><span class="n">PorterStemmer</span><span class="o">.</span><span class="n">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">_ScandinavianStemmer</span><span class="p">(</span><span class="n">_LanguageSpecificStemmer</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This subclass encapsulates a method for defining the string region R1.</span>
<span class="sd">    It is used by the Danish, Norwegian, and Swedish stemmer.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_r1_scandinavian</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">vowels</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the region R1 that is used by the Scandinavian stemmers.</span>

<span class="sd">        R1 is the region after the first non-vowel following a vowel,</span>
<span class="sd">        or is the null region at the end of the word if there is no</span>
<span class="sd">        such non-vowel. But then R1 is adjusted so that the region</span>
<span class="sd">        before it contains at least three letters.</span>

<span class="sd">        :param word: The word whose region R1 is determined.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :param vowels: The vowels of the respective language that are</span>
<span class="sd">                       used to determine the region R1.</span>
<span class="sd">        :type vowels: unicode</span>
<span class="sd">        :return: the region R1 for the respective word.</span>
<span class="sd">        :rtype: unicode</span>
<span class="sd">        :note: This helper method is invoked by the respective stem method of</span>
<span class="sd">               the subclasses DanishStemmer, NorwegianStemmer, and</span>
<span class="sd">               SwedishStemmer. It is not to be invoked directly!</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">vowels</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">vowels</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">word</span>
                <span class="k">break</span>

        <span class="k">return</span> <span class="n">r1</span>


<span class="k">class</span> <span class="nc">_StandardStemmer</span><span class="p">(</span><span class="n">_LanguageSpecificStemmer</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This subclass encapsulates two methods for defining the standard versions</span>
<span class="sd">    of the string regions R1, R2, and RV.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="nf">_r1r2_standard</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">vowels</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the standard interpretations of the string regions R1 and R2.</span>

<span class="sd">        R1 is the region after the first non-vowel following a vowel,</span>
<span class="sd">        or is the null region at the end of the word if there is no</span>
<span class="sd">        such non-vowel.</span>

<span class="sd">        R2 is the region after the first non-vowel following a vowel</span>
<span class="sd">        in R1, or is the null region at the end of the word if there</span>
<span class="sd">        is no such non-vowel.</span>

<span class="sd">        :param word: The word whose regions R1 and R2 are determined.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :param vowels: The vowels of the respective language that are</span>
<span class="sd">                       used to determine the regions R1 and R2.</span>
<span class="sd">        :type vowels: unicode</span>
<span class="sd">        :return: (r1,r2), the regions R1 and R2 for the respective word.</span>
<span class="sd">        :rtype: tuple</span>
<span class="sd">        :note: This helper method is invoked by the respective stem method of</span>
<span class="sd">               the subclasses DutchStemmer, FinnishStemmer,</span>
<span class="sd">               FrenchStemmer, GermanStemmer, ItalianStemmer,</span>
<span class="sd">               PortugueseStemmer, RomanianStemmer, and SpanishStemmer.</span>
<span class="sd">               It is not to be invoked directly!</span>
<span class="sd">        :note: A detailed description of how to define R1 and R2</span>
<span class="sd">               can be found at http://snowball.tartarus.org/texts/r1r2.html</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">vowels</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">vowels</span><span class="p">:</span>
                <span class="n">r1</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                <span class="k">break</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">r1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">vowels</span> <span class="ow">and</span> <span class="n">r1</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">vowels</span><span class="p">:</span>
                <span class="n">r2</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                <span class="k">break</span>

        <span class="k">return</span> <span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">r2</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">_rv_standard</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">vowels</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the standard interpretation of the string region RV.</span>

<span class="sd">        If the second letter is a consonant, RV is the region after the</span>
<span class="sd">        next following vowel. If the first two letters are vowels, RV is</span>
<span class="sd">        the region after the next following consonant. Otherwise, RV is</span>
<span class="sd">        the region after the third letter.</span>

<span class="sd">        :param word: The word whose region RV is determined.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :param vowels: The vowels of the respective language that are</span>
<span class="sd">                       used to determine the region RV.</span>
<span class="sd">        :type vowels: unicode</span>
<span class="sd">        :return: the region RV for the respective word.</span>
<span class="sd">        :rtype: unicode</span>
<span class="sd">        :note: This helper method is invoked by the respective stem method of</span>
<span class="sd">               the subclasses ItalianStemmer, PortugueseStemmer,</span>
<span class="sd">               RomanianStemmer, and SpanishStemmer. It is not to be</span>
<span class="sd">               invoked directly!</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">vowels</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="n">vowels</span><span class="p">:</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                        <span class="k">break</span>

            <span class="k">elif</span> <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">vowels</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">vowels</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">vowels</span><span class="p">:</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                        <span class="k">break</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">rv</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>

        <span class="k">return</span> <span class="n">rv</span>

<span class="k">class</span> <span class="nc">DanishStemmer</span><span class="p">(</span><span class="n">_ScandinavianStemmer</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Danish Snowball stemmer.</span>

<span class="sd">    :cvar __vowels: The Danish vowels.</span>
<span class="sd">    :type __vowels: unicode</span>
<span class="sd">    :cvar __consonants: The Danish consonants.</span>
<span class="sd">    :type __consonants: unicode</span>
<span class="sd">    :cvar __double_consonants: The Danish double consonants.</span>
<span class="sd">    :type __double_consonants: tuple</span>
<span class="sd">    :cvar __s_ending: Letters that may directly appear before a word final &#39;s&#39;.</span>
<span class="sd">    :type __s_ending: unicode</span>
<span class="sd">    :cvar __step1_suffixes: Suffixes to be deleted in step 1 of the algorithm.</span>
<span class="sd">    :type __step1_suffixes: tuple</span>
<span class="sd">    :cvar __step2_suffixes: Suffixes to be deleted in step 2 of the algorithm.</span>
<span class="sd">    :type __step2_suffixes: tuple</span>
<span class="sd">    :cvar __step3_suffixes: Suffixes to be deleted in step 3 of the algorithm.</span>
<span class="sd">    :type __step3_suffixes: tuple</span>
<span class="sd">    :note: A detailed description of the Danish</span>
<span class="sd">           stemming algorithm can be found under</span>
<span class="sd">           http://snowball.tartarus.org/algorithms/danish/stemmer.html</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># The language&#39;s vowels and other important characters are defined.</span>
    <span class="n">__vowels</span> <span class="o">=</span> <span class="s2">&quot;aeiouy</span><span class="se">\xE6\xE5\xF8</span><span class="s2">&quot;</span>
    <span class="n">__consonants</span> <span class="o">=</span> <span class="s2">&quot;bcdfghjklmnpqrstvwxz&quot;</span>
    <span class="n">__double_consonants</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;bb&quot;</span><span class="p">,</span> <span class="s2">&quot;cc&quot;</span><span class="p">,</span> <span class="s2">&quot;dd&quot;</span><span class="p">,</span> <span class="s2">&quot;ff&quot;</span><span class="p">,</span> <span class="s2">&quot;gg&quot;</span><span class="p">,</span> <span class="s2">&quot;hh&quot;</span><span class="p">,</span> <span class="s2">&quot;jj&quot;</span><span class="p">,</span>
                           <span class="s2">&quot;kk&quot;</span><span class="p">,</span> <span class="s2">&quot;ll&quot;</span><span class="p">,</span> <span class="s2">&quot;mm&quot;</span><span class="p">,</span> <span class="s2">&quot;nn&quot;</span><span class="p">,</span> <span class="s2">&quot;pp&quot;</span><span class="p">,</span> <span class="s2">&quot;qq&quot;</span><span class="p">,</span> <span class="s2">&quot;rr&quot;</span><span class="p">,</span>
                           <span class="s2">&quot;ss&quot;</span><span class="p">,</span> <span class="s2">&quot;tt&quot;</span><span class="p">,</span> <span class="s2">&quot;vv&quot;</span><span class="p">,</span> <span class="s2">&quot;ww&quot;</span><span class="p">,</span> <span class="s2">&quot;xx&quot;</span><span class="p">,</span> <span class="s2">&quot;zz&quot;</span><span class="p">)</span>
    <span class="n">__s_ending</span> <span class="o">=</span> <span class="s2">&quot;abcdfghjklmnoprtvyz</span><span class="se">\xE5</span><span class="s2">&quot;</span>

    <span class="c1"># The different suffixes, divided into the algorithm&#39;s steps</span>
    <span class="c1"># and organized by length, are listed in tuples.</span>
    <span class="n">__step1_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;erendes&quot;</span><span class="p">,</span> <span class="s2">&quot;erende&quot;</span><span class="p">,</span> <span class="s2">&quot;hedens&quot;</span><span class="p">,</span> <span class="s2">&quot;ethed&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;erede&quot;</span><span class="p">,</span> <span class="s2">&quot;heden&quot;</span><span class="p">,</span> <span class="s2">&quot;heder&quot;</span><span class="p">,</span> <span class="s2">&quot;endes&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;ernes&quot;</span><span class="p">,</span> <span class="s2">&quot;erens&quot;</span><span class="p">,</span> <span class="s2">&quot;erets&quot;</span><span class="p">,</span> <span class="s2">&quot;ered&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;ende&quot;</span><span class="p">,</span> <span class="s2">&quot;erne&quot;</span><span class="p">,</span> <span class="s2">&quot;eren&quot;</span><span class="p">,</span> <span class="s2">&quot;erer&quot;</span><span class="p">,</span> <span class="s2">&quot;heds&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;enes&quot;</span><span class="p">,</span> <span class="s2">&quot;eres&quot;</span><span class="p">,</span> <span class="s2">&quot;eret&quot;</span><span class="p">,</span> <span class="s2">&quot;hed&quot;</span><span class="p">,</span> <span class="s2">&quot;ene&quot;</span><span class="p">,</span> <span class="s2">&quot;ere&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;ens&quot;</span><span class="p">,</span> <span class="s2">&quot;ers&quot;</span><span class="p">,</span> <span class="s2">&quot;ets&quot;</span><span class="p">,</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span> <span class="s2">&quot;er&quot;</span><span class="p">,</span> <span class="s2">&quot;es&quot;</span><span class="p">,</span> <span class="s2">&quot;et&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">)</span>
    <span class="n">__step2_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;gd&quot;</span><span class="p">,</span> <span class="s2">&quot;dt&quot;</span><span class="p">,</span> <span class="s2">&quot;gt&quot;</span><span class="p">,</span> <span class="s2">&quot;kt&quot;</span><span class="p">)</span>
    <span class="n">__step3_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;elig&quot;</span><span class="p">,</span> <span class="s2">&quot;l</span><span class="se">\xF8</span><span class="s2">st&quot;</span><span class="p">,</span> <span class="s2">&quot;lig&quot;</span><span class="p">,</span> <span class="s2">&quot;els&quot;</span><span class="p">,</span> <span class="s2">&quot;ig&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stem a Danish word and return the stemmed form.</span>

<span class="sd">        :param word: The word that is stemmed.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :return: The stemmed form.</span>
<span class="sd">        :rtype: unicode</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1"># Every word is put into lower case for normalization.</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopwords</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">word</span>

        <span class="c1"># After this, the required regions are generated</span>
        <span class="c1"># by the respective helper method.</span>
        <span class="n">r1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r1_scandinavian</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>

        <span class="c1"># Then the actual stemming process starts.</span>
        <span class="c1"># Every new step is explicitly indicated</span>
        <span class="c1"># according to the descriptions on the Snowball website.</span>

        <span class="c1"># STEP 1</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step1_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;s&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__s_ending</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 2</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step2_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 3</span>
        <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;igst&quot;</span><span class="p">):</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step3_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;l</span><span class="se">\xF8</span><span class="s2">st&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>

                    <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__step2_suffixes</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 4: Undouble</span>
        <span class="k">for</span> <span class="n">double_cons</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__double_consonants</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">double_cons</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">break</span>


        <span class="k">return</span> <span class="n">word</span>


<span class="k">class</span> <span class="nc">DutchStemmer</span><span class="p">(</span><span class="n">_StandardStemmer</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Dutch Snowball stemmer.</span>

<span class="sd">    :cvar __vowels: The Dutch vowels.</span>
<span class="sd">    :type __vowels: unicode</span>
<span class="sd">    :cvar __step1_suffixes: Suffixes to be deleted in step 1 of the algorithm.</span>
<span class="sd">    :type __step1_suffixes: tuple</span>
<span class="sd">    :cvar __step3b_suffixes: Suffixes to be deleted in step 3b of the algorithm.</span>
<span class="sd">    :type __step3b_suffixes: tuple</span>
<span class="sd">    :note: A detailed description of the Dutch</span>
<span class="sd">           stemming algorithm can be found under</span>
<span class="sd">           http://snowball.tartarus.org/algorithms/dutch/stemmer.html</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__vowels</span> <span class="o">=</span> <span class="s2">&quot;aeiouy</span><span class="se">\xE8</span><span class="s2">&quot;</span>
    <span class="n">__step1_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;heden&quot;</span><span class="p">,</span> <span class="s2">&quot;ene&quot;</span><span class="p">,</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span> <span class="s2">&quot;se&quot;</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">)</span>
    <span class="n">__step3b_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;baar&quot;</span><span class="p">,</span> <span class="s2">&quot;lijk&quot;</span><span class="p">,</span> <span class="s2">&quot;bar&quot;</span><span class="p">,</span> <span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="s2">&quot;ing&quot;</span><span class="p">,</span> <span class="s2">&quot;ig&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stem a Dutch word and return the stemmed form.</span>

<span class="sd">        :param word: The word that is stemmed.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :return: The stemmed form.</span>
<span class="sd">        :rtype: unicode</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopwords</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">word</span>

        <span class="n">step2_success</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="c1"># Vowel accents are removed.</span>
        <span class="n">word</span> <span class="o">=</span> <span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE4</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xEB</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xED</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xEF</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xF6</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xF3</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xFC</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xFA</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">))</span>

        <span class="c1"># An initial &#39;y&#39;, a &#39;y&#39; after a vowel,</span>
        <span class="c1"># and an &#39;i&#39; between self.__vowels is put into upper case.</span>
        <span class="c1"># As from now these are treated as consonants.</span>
        <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">):</span>
            <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span>
                <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="p">],</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]))</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;i&quot;</span> <span class="ow">and</span>
               <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="p">],</span> <span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]))</span>

        <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r1r2_standard</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>

        <span class="c1"># R1 is adjusted so that the region before it</span>
        <span class="c1"># contains at least 3 letters.</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">word</span>
                <span class="k">break</span>

        <span class="c1"># STEP 1</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step1_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;heden&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;heid&quot;</span><span class="p">)</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;heid&quot;</span><span class="p">)</span>
                    <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;heden&quot;</span><span class="p">):</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r2</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;heid&quot;</span><span class="p">)</span>

                <span class="k">elif</span> <span class="p">(</span><span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ene&quot;</span><span class="p">,</span> <span class="s2">&quot;en&quot;</span><span class="p">)</span> <span class="ow">and</span>
                      <span class="ow">not</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;heden&quot;</span><span class="p">)</span> <span class="ow">and</span>
                      <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span>
                      <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span> <span class="o">!=</span> <span class="s2">&quot;gem&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;kk&quot;</span><span class="p">,</span> <span class="s2">&quot;dd&quot;</span><span class="p">,</span> <span class="s2">&quot;tt&quot;</span><span class="p">)):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

                <span class="k">elif</span> <span class="p">(</span><span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;se&quot;</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">)</span> <span class="ow">and</span>
                      <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span>
                      <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;j&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 2</span>
        <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">:</span>
            <span class="n">step2_success</span> <span class="o">=</span> <span class="bp">True</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;kk&quot;</span><span class="p">,</span> <span class="s2">&quot;dd&quot;</span><span class="p">,</span> <span class="s2">&quot;tt&quot;</span><span class="p">)):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># STEP 3a</span>
        <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;heid&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">(</span><span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;en&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span>
                <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;gem&quot;</span><span class="p">):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;kk&quot;</span><span class="p">,</span> <span class="s2">&quot;dd&quot;</span><span class="p">,</span> <span class="s2">&quot;tt&quot;</span><span class="p">)):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># STEP 3b: Derivational suffixes</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step3b_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="s2">&quot;ing&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>

                    <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;ig&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;e&quot;</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;kk&quot;</span><span class="p">,</span> <span class="s2">&quot;dd&quot;</span><span class="p">,</span> <span class="s2">&quot;tt&quot;</span><span class="p">)):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;ig&quot;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;e&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;lijk&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>

                    <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;kk&quot;</span><span class="p">,</span> <span class="s2">&quot;dd&quot;</span><span class="p">,</span> <span class="s2">&quot;tt&quot;</span><span class="p">)):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;baar&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span> <span class="ow">and</span> <span class="n">step2_success</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 4: Undouble vowel</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">4</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;I&quot;</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;aa&quot;</span><span class="p">,</span> <span class="s2">&quot;ee&quot;</span><span class="p">,</span> <span class="s2">&quot;oo&quot;</span><span class="p">,</span> <span class="s2">&quot;uu&quot;</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">],</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">],</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]))</span>

        <span class="c1"># All occurrences of &#39;I&#39; and &#39;Y&#39; are put back into lower case.</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">)</span>


        <span class="k">return</span> <span class="n">word</span>



<span class="k">class</span> <span class="nc">EnglishStemmer</span><span class="p">(</span><span class="n">_StandardStemmer</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The English Snowball stemmer.</span>

<span class="sd">    :cvar __vowels: The English vowels.</span>
<span class="sd">    :type __vowels: unicode</span>
<span class="sd">    :cvar __double_consonants: The English double consonants.</span>
<span class="sd">    :type __double_consonants: tuple</span>
<span class="sd">    :cvar __li_ending: Letters that may directly appear before a word final &#39;li&#39;.</span>
<span class="sd">    :type __li_ending: unicode</span>
<span class="sd">    :cvar __step0_suffixes: Suffixes to be deleted in step 0 of the algorithm.</span>
<span class="sd">    :type __step0_suffixes: tuple</span>
<span class="sd">    :cvar __step1a_suffixes: Suffixes to be deleted in step 1a of the algorithm.</span>
<span class="sd">    :type __step1a_suffixes: tuple</span>
<span class="sd">    :cvar __step1b_suffixes: Suffixes to be deleted in step 1b of the algorithm.</span>
<span class="sd">    :type __step1b_suffixes: tuple</span>
<span class="sd">    :cvar __step2_suffixes: Suffixes to be deleted in step 2 of the algorithm.</span>
<span class="sd">    :type __step2_suffixes: tuple</span>
<span class="sd">    :cvar __step3_suffixes: Suffixes to be deleted in step 3 of the algorithm.</span>
<span class="sd">    :type __step3_suffixes: tuple</span>
<span class="sd">    :cvar __step4_suffixes: Suffixes to be deleted in step 4 of the algorithm.</span>
<span class="sd">    :type __step4_suffixes: tuple</span>
<span class="sd">    :cvar __step5_suffixes: Suffixes to be deleted in step 5 of the algorithm.</span>
<span class="sd">    :type __step5_suffixes: tuple</span>
<span class="sd">    :cvar __special_words: A dictionary containing words</span>
<span class="sd">                           which have to be stemmed specially.</span>
<span class="sd">    :type __special_words: dict</span>
<span class="sd">    :note: A detailed description of the English</span>
<span class="sd">           stemming algorithm can be found under</span>
<span class="sd">           http://snowball.tartarus.org/algorithms/english/stemmer.html</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__vowels</span> <span class="o">=</span> <span class="s2">&quot;aeiouy&quot;</span>
    <span class="n">__double_consonants</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;bb&quot;</span><span class="p">,</span> <span class="s2">&quot;dd&quot;</span><span class="p">,</span> <span class="s2">&quot;ff&quot;</span><span class="p">,</span> <span class="s2">&quot;gg&quot;</span><span class="p">,</span> <span class="s2">&quot;mm&quot;</span><span class="p">,</span> <span class="s2">&quot;nn&quot;</span><span class="p">,</span>
                           <span class="s2">&quot;pp&quot;</span><span class="p">,</span> <span class="s2">&quot;rr&quot;</span><span class="p">,</span> <span class="s2">&quot;tt&quot;</span><span class="p">)</span>
    <span class="n">__li_ending</span> <span class="o">=</span> <span class="s2">&quot;cdeghkmnrt&quot;</span>
    <span class="n">__step0_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;&#39;s&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;s&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span>
    <span class="n">__step1a_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;sses&quot;</span><span class="p">,</span> <span class="s2">&quot;ied&quot;</span><span class="p">,</span> <span class="s2">&quot;ies&quot;</span><span class="p">,</span> <span class="s2">&quot;us&quot;</span><span class="p">,</span> <span class="s2">&quot;ss&quot;</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">)</span>
    <span class="n">__step1b_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;eedly&quot;</span><span class="p">,</span> <span class="s2">&quot;ingly&quot;</span><span class="p">,</span> <span class="s2">&quot;edly&quot;</span><span class="p">,</span> <span class="s2">&quot;eed&quot;</span><span class="p">,</span> <span class="s2">&quot;ing&quot;</span><span class="p">,</span> <span class="s2">&quot;ed&quot;</span><span class="p">)</span>
    <span class="n">__step2_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;ization&#39;</span><span class="p">,</span> <span class="s1">&#39;ational&#39;</span><span class="p">,</span> <span class="s1">&#39;fulness&#39;</span><span class="p">,</span> <span class="s1">&#39;ousness&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;iveness&#39;</span><span class="p">,</span> <span class="s1">&#39;tional&#39;</span><span class="p">,</span> <span class="s1">&#39;biliti&#39;</span><span class="p">,</span> <span class="s1">&#39;lessli&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;entli&#39;</span><span class="p">,</span> <span class="s1">&#39;ation&#39;</span><span class="p">,</span> <span class="s1">&#39;alism&#39;</span><span class="p">,</span> <span class="s1">&#39;aliti&#39;</span><span class="p">,</span> <span class="s1">&#39;ousli&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;iviti&#39;</span><span class="p">,</span> <span class="s1">&#39;fulli&#39;</span><span class="p">,</span> <span class="s1">&#39;enci&#39;</span><span class="p">,</span> <span class="s1">&#39;anci&#39;</span><span class="p">,</span> <span class="s1">&#39;abli&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;izer&#39;</span><span class="p">,</span> <span class="s1">&#39;ator&#39;</span><span class="p">,</span> <span class="s1">&#39;alli&#39;</span><span class="p">,</span> <span class="s1">&#39;bli&#39;</span><span class="p">,</span> <span class="s1">&#39;ogi&#39;</span><span class="p">,</span> <span class="s1">&#39;li&#39;</span><span class="p">)</span>
    <span class="n">__step3_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;ational&#39;</span><span class="p">,</span> <span class="s1">&#39;tional&#39;</span><span class="p">,</span> <span class="s1">&#39;alize&#39;</span><span class="p">,</span> <span class="s1">&#39;icate&#39;</span><span class="p">,</span> <span class="s1">&#39;iciti&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ative&#39;</span><span class="p">,</span> <span class="s1">&#39;ical&#39;</span><span class="p">,</span> <span class="s1">&#39;ness&#39;</span><span class="p">,</span> <span class="s1">&#39;ful&#39;</span><span class="p">)</span>
    <span class="n">__step4_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;ement&#39;</span><span class="p">,</span> <span class="s1">&#39;ance&#39;</span><span class="p">,</span> <span class="s1">&#39;ence&#39;</span><span class="p">,</span> <span class="s1">&#39;able&#39;</span><span class="p">,</span> <span class="s1">&#39;ible&#39;</span><span class="p">,</span> <span class="s1">&#39;ment&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ant&#39;</span><span class="p">,</span> <span class="s1">&#39;ent&#39;</span><span class="p">,</span> <span class="s1">&#39;ism&#39;</span><span class="p">,</span> <span class="s1">&#39;ate&#39;</span><span class="p">,</span> <span class="s1">&#39;iti&#39;</span><span class="p">,</span> <span class="s1">&#39;ous&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ive&#39;</span><span class="p">,</span> <span class="s1">&#39;ize&#39;</span><span class="p">,</span> <span class="s1">&#39;ion&#39;</span><span class="p">,</span> <span class="s1">&#39;al&#39;</span><span class="p">,</span> <span class="s1">&#39;er&#39;</span><span class="p">,</span> <span class="s1">&#39;ic&#39;</span><span class="p">)</span>
    <span class="n">__step5_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">)</span>
    <span class="n">__special_words</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;skis&quot;</span> <span class="p">:</span> <span class="s2">&quot;ski&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;skies&quot;</span> <span class="p">:</span> <span class="s2">&quot;sky&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;dying&quot;</span> <span class="p">:</span> <span class="s2">&quot;die&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;lying&quot;</span> <span class="p">:</span> <span class="s2">&quot;lie&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;tying&quot;</span> <span class="p">:</span> <span class="s2">&quot;tie&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;idly&quot;</span> <span class="p">:</span> <span class="s2">&quot;idl&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;gently&quot;</span> <span class="p">:</span> <span class="s2">&quot;gentl&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;ugly&quot;</span> <span class="p">:</span> <span class="s2">&quot;ugli&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;early&quot;</span> <span class="p">:</span> <span class="s2">&quot;earli&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;only&quot;</span> <span class="p">:</span> <span class="s2">&quot;onli&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;singly&quot;</span> <span class="p">:</span> <span class="s2">&quot;singl&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;sky&quot;</span> <span class="p">:</span> <span class="s2">&quot;sky&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;news&quot;</span> <span class="p">:</span> <span class="s2">&quot;news&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;howe&quot;</span> <span class="p">:</span> <span class="s2">&quot;howe&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;atlas&quot;</span> <span class="p">:</span> <span class="s2">&quot;atlas&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;cosmos&quot;</span> <span class="p">:</span> <span class="s2">&quot;cosmos&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;bias&quot;</span> <span class="p">:</span> <span class="s2">&quot;bias&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;andes&quot;</span> <span class="p">:</span> <span class="s2">&quot;andes&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;inning&quot;</span> <span class="p">:</span> <span class="s2">&quot;inning&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;innings&quot;</span> <span class="p">:</span> <span class="s2">&quot;inning&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;outing&quot;</span> <span class="p">:</span> <span class="s2">&quot;outing&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;outings&quot;</span> <span class="p">:</span> <span class="s2">&quot;outing&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;canning&quot;</span> <span class="p">:</span> <span class="s2">&quot;canning&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;cannings&quot;</span> <span class="p">:</span> <span class="s2">&quot;canning&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;herring&quot;</span> <span class="p">:</span> <span class="s2">&quot;herring&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;herrings&quot;</span> <span class="p">:</span> <span class="s2">&quot;herring&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;earring&quot;</span> <span class="p">:</span> <span class="s2">&quot;earring&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;earrings&quot;</span> <span class="p">:</span> <span class="s2">&quot;earring&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;proceed&quot;</span> <span class="p">:</span> <span class="s2">&quot;proceed&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;proceeds&quot;</span> <span class="p">:</span> <span class="s2">&quot;proceed&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;proceeded&quot;</span> <span class="p">:</span> <span class="s2">&quot;proceed&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;proceeding&quot;</span> <span class="p">:</span> <span class="s2">&quot;proceed&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;exceed&quot;</span> <span class="p">:</span> <span class="s2">&quot;exceed&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;exceeds&quot;</span> <span class="p">:</span> <span class="s2">&quot;exceed&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;exceeded&quot;</span> <span class="p">:</span> <span class="s2">&quot;exceed&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;exceeding&quot;</span> <span class="p">:</span> <span class="s2">&quot;exceed&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;succeed&quot;</span> <span class="p">:</span> <span class="s2">&quot;succeed&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;succeeds&quot;</span> <span class="p">:</span> <span class="s2">&quot;succeed&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;succeeded&quot;</span> <span class="p">:</span> <span class="s2">&quot;succeed&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;succeeding&quot;</span> <span class="p">:</span> <span class="s2">&quot;succeed&quot;</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">stem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>

        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stem an English word and return the stemmed form.</span>

<span class="sd">        :param word: The word that is stemmed.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :return: The stemmed form.</span>
<span class="sd">        :rtype: unicode</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopwords</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">word</span>

        <span class="k">elif</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__special_words</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">__special_words</span><span class="p">[</span><span class="n">word</span><span class="p">]</span>

        <span class="c1"># Map the different apostrophe characters to a single consistent one</span>
        <span class="n">word</span> <span class="o">=</span> <span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u2019</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\x27</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u2018</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\x27</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u201B</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\x27</span><span class="s2">&quot;</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\x27</span><span class="s2">&quot;</span><span class="p">):</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>

        <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">):</span>
            <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:]))</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span>
                <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="p">],</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]))</span>

        <span class="n">step1a_vowel_found</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">step1b_vowel_found</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">startswith</span><span class="p">((</span><span class="s2">&quot;gener&quot;</span><span class="p">,</span> <span class="s2">&quot;commun&quot;</span><span class="p">,</span> <span class="s2">&quot;arsen&quot;</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">startswith</span><span class="p">((</span><span class="s2">&quot;gener&quot;</span><span class="p">,</span> <span class="s2">&quot;arsen&quot;</span><span class="p">)):</span>
                <span class="n">r1</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="mi">5</span><span class="p">:]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">r1</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="mi">6</span><span class="p">:]</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">r1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span> <span class="n">r1</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">:</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                    <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r1r2_standard</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>


        <span class="c1"># STEP 0</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step0_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 1a</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step1a_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>

                <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;sses&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ied&quot;</span><span class="p">,</span> <span class="s2">&quot;ies&quot;</span><span class="p">):</span>
                    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)])</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;s&quot;</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]:</span>
                        <span class="k">if</span> <span class="n">letter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">:</span>
                            <span class="n">step1a_vowel_found</span> <span class="o">=</span> <span class="bp">True</span>
                            <span class="k">break</span>

                    <span class="k">if</span> <span class="n">step1a_vowel_found</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 1b</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step1b_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;eed&quot;</span><span class="p">,</span> <span class="s2">&quot;eedly&quot;</span><span class="p">):</span>

                    <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ee&quot;</span><span class="p">)</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ee&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r2</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ee&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">for</span> <span class="n">letter</span> <span class="ow">in</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]:</span>
                        <span class="k">if</span> <span class="n">letter</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">:</span>
                            <span class="n">step1b_vowel_found</span> <span class="o">=</span> <span class="bp">True</span>
                            <span class="k">break</span>

                    <span class="k">if</span> <span class="n">step1b_vowel_found</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>

                        <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;at&quot;</span><span class="p">,</span> <span class="s2">&quot;bl&quot;</span><span class="p">,</span> <span class="s2">&quot;iz&quot;</span><span class="p">)):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">))</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">r1</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">))</span>

                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="ow">or</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span> <span class="o">&gt;=</span><span class="mi">3</span><span class="p">:</span>
                                <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">r2</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">))</span>

                        <span class="k">elif</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__double_consonants</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

                        <span class="k">elif</span> <span class="p">((</span><span class="n">r1</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span> <span class="ow">and</span>
                               <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span>
                               <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s2">&quot;wxY&quot;</span> <span class="ow">and</span>
                               <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span>
                               <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>
                              <span class="ow">or</span>
                              <span class="p">(</span><span class="n">r1</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span>
                               <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span>
                               <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)):</span>

                            <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">))</span>

                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">r1</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">))</span>

                            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                                <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">r2</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">))</span>
                <span class="k">break</span>

        <span class="c1"># STEP 1c</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="s2">&quot;yY&quot;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">:</span>
            <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;i&quot;</span><span class="p">))</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;i&quot;</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;i&quot;</span><span class="p">))</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="c1"># STEP 2</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step2_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;tional&quot;</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;enci&quot;</span><span class="p">,</span> <span class="s2">&quot;anci&quot;</span><span class="p">,</span> <span class="s2">&quot;abli&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;e&quot;</span><span class="p">))</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;e&quot;</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span><span class="p">:</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;e&quot;</span><span class="p">))</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;entli&quot;</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;izer&quot;</span><span class="p">,</span> <span class="s2">&quot;ization&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ize&quot;</span><span class="p">)</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ize&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r2</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ize&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ational&quot;</span><span class="p">,</span> <span class="s2">&quot;ation&quot;</span><span class="p">,</span> <span class="s2">&quot;ator&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ate&quot;</span><span class="p">)</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ate&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r2</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ate&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;e&quot;</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;alism&quot;</span><span class="p">,</span> <span class="s2">&quot;aliti&quot;</span><span class="p">,</span> <span class="s2">&quot;alli&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;al&quot;</span><span class="p">)</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;al&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r2</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;al&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;fulness&quot;</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ousli&quot;</span><span class="p">,</span> <span class="s2">&quot;ousness&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ous&quot;</span><span class="p">)</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ous&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r2</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ous&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;iveness&quot;</span><span class="p">,</span> <span class="s2">&quot;iviti&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ive&quot;</span><span class="p">)</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ive&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r2</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ive&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;e&quot;</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;biliti&quot;</span><span class="p">,</span> <span class="s2">&quot;bli&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ble&quot;</span><span class="p">)</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ble&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r2</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ble&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;ogi&quot;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;fulli&quot;</span><span class="p">,</span> <span class="s2">&quot;lessli&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;li&quot;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__li_ending</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 3</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step3_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;tional&quot;</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;ational&quot;</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ate&quot;</span><span class="p">)</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ate&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r2</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ate&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;alize&quot;</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;icate&quot;</span><span class="p">,</span> <span class="s2">&quot;iciti&quot;</span><span class="p">,</span> <span class="s2">&quot;ical&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ic&quot;</span><span class="p">)</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ic&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">r2</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r2</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ic&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ful&quot;</span><span class="p">,</span> <span class="s2">&quot;ness&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;ative&quot;</span> <span class="ow">and</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 4</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step4_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;ion&quot;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="ow">in</span> <span class="s2">&quot;st&quot;</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 5</span>
        <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;l&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;l&quot;</span><span class="p">:</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">):</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">elif</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">4</span> <span class="ow">and</span> <span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">or</span>
                                   <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="s2">&quot;wxY&quot;</span> <span class="ow">or</span>
                                   <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">or</span>
                                   <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>


        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">)</span>


        <span class="k">return</span> <span class="n">word</span>



<span class="k">class</span> <span class="nc">FinnishStemmer</span><span class="p">(</span><span class="n">_StandardStemmer</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Finnish Snowball stemmer.</span>

<span class="sd">    :cvar __vowels: The Finnish vowels.</span>
<span class="sd">    :type __vowels: unicode</span>
<span class="sd">    :cvar __restricted_vowels: A subset of the Finnish vowels.</span>
<span class="sd">    :type __restricted_vowels: unicode</span>
<span class="sd">    :cvar __long_vowels: The Finnish vowels in their long forms.</span>
<span class="sd">    :type __long_vowels: tuple</span>
<span class="sd">    :cvar __consonants: The Finnish consonants.</span>
<span class="sd">    :type __consonants: unicode</span>
<span class="sd">    :cvar __double_consonants: The Finnish double consonants.</span>
<span class="sd">    :type __double_consonants: tuple</span>
<span class="sd">    :cvar __step1_suffixes: Suffixes to be deleted in step 1 of the algorithm.</span>
<span class="sd">    :type __step1_suffixes: tuple</span>
<span class="sd">    :cvar __step2_suffixes: Suffixes to be deleted in step 2 of the algorithm.</span>
<span class="sd">    :type __step2_suffixes: tuple</span>
<span class="sd">    :cvar __step3_suffixes: Suffixes to be deleted in step 3 of the algorithm.</span>
<span class="sd">    :type __step3_suffixes: tuple</span>
<span class="sd">    :cvar __step4_suffixes: Suffixes to be deleted in step 4 of the algorithm.</span>
<span class="sd">    :type __step4_suffixes: tuple</span>
<span class="sd">    :note: A detailed description of the Finnish</span>
<span class="sd">           stemming algorithm can be found under</span>
<span class="sd">           http://snowball.tartarus.org/algorithms/finnish/stemmer.html</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__vowels</span> <span class="o">=</span> <span class="s2">&quot;aeiouy</span><span class="se">\xE4\xF6</span><span class="s2">&quot;</span>
    <span class="n">__restricted_vowels</span> <span class="o">=</span> <span class="s2">&quot;aeiou</span><span class="se">\xE4\xF6</span><span class="s2">&quot;</span>
    <span class="n">__long_vowels</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;aa&quot;</span><span class="p">,</span> <span class="s2">&quot;ee&quot;</span><span class="p">,</span> <span class="s2">&quot;ii&quot;</span><span class="p">,</span> <span class="s2">&quot;oo&quot;</span><span class="p">,</span> <span class="s2">&quot;uu&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE4\xE4</span><span class="s2">&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;</span><span class="se">\xF6\xF6</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">__consonants</span> <span class="o">=</span> <span class="s2">&quot;bcdfghjklmnpqrstvwxz&quot;</span>
    <span class="n">__double_consonants</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;bb&quot;</span><span class="p">,</span> <span class="s2">&quot;cc&quot;</span><span class="p">,</span> <span class="s2">&quot;dd&quot;</span><span class="p">,</span> <span class="s2">&quot;ff&quot;</span><span class="p">,</span> <span class="s2">&quot;gg&quot;</span><span class="p">,</span> <span class="s2">&quot;hh&quot;</span><span class="p">,</span> <span class="s2">&quot;jj&quot;</span><span class="p">,</span>
                           <span class="s2">&quot;kk&quot;</span><span class="p">,</span> <span class="s2">&quot;ll&quot;</span><span class="p">,</span> <span class="s2">&quot;mm&quot;</span><span class="p">,</span> <span class="s2">&quot;nn&quot;</span><span class="p">,</span> <span class="s2">&quot;pp&quot;</span><span class="p">,</span> <span class="s2">&quot;qq&quot;</span><span class="p">,</span> <span class="s2">&quot;rr&quot;</span><span class="p">,</span>
                           <span class="s2">&quot;ss&quot;</span><span class="p">,</span> <span class="s2">&quot;tt&quot;</span><span class="p">,</span> <span class="s2">&quot;vv&quot;</span><span class="p">,</span> <span class="s2">&quot;ww&quot;</span><span class="p">,</span> <span class="s2">&quot;xx&quot;</span><span class="p">,</span> <span class="s2">&quot;zz&quot;</span><span class="p">)</span>
    <span class="n">__step1_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;kaan&#39;</span><span class="p">,</span> <span class="s1">&#39;k</span><span class="se">\xE4\xE4</span><span class="s1">n&#39;</span><span class="p">,</span> <span class="s1">&#39;sti&#39;</span><span class="p">,</span> <span class="s1">&#39;kin&#39;</span><span class="p">,</span> <span class="s1">&#39;han&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;h</span><span class="se">\xE4</span><span class="s1">n&#39;</span><span class="p">,</span> <span class="s1">&#39;ko&#39;</span><span class="p">,</span> <span class="s1">&#39;k</span><span class="se">\xF6</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;pa&#39;</span><span class="p">,</span> <span class="s1">&#39;p</span><span class="se">\xE4</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">__step2_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;nsa&#39;</span><span class="p">,</span> <span class="s1">&#39;ns</span><span class="se">\xE4</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;mme&#39;</span><span class="p">,</span> <span class="s1">&#39;nne&#39;</span><span class="p">,</span> <span class="s1">&#39;si&#39;</span><span class="p">,</span> <span class="s1">&#39;ni&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;an&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE4</span><span class="s1">n&#39;</span><span class="p">,</span> <span class="s1">&#39;en&#39;</span><span class="p">)</span>
    <span class="n">__step3_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;siin&#39;</span><span class="p">,</span> <span class="s1">&#39;tten&#39;</span><span class="p">,</span> <span class="s1">&#39;seen&#39;</span><span class="p">,</span> <span class="s1">&#39;han&#39;</span><span class="p">,</span> <span class="s1">&#39;hen&#39;</span><span class="p">,</span> <span class="s1">&#39;hin&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;hon&#39;</span><span class="p">,</span> <span class="s1">&#39;h</span><span class="se">\xE4</span><span class="s1">n&#39;</span><span class="p">,</span> <span class="s1">&#39;h</span><span class="se">\xF6</span><span class="s1">n&#39;</span><span class="p">,</span> <span class="s1">&#39;den&#39;</span><span class="p">,</span> <span class="s1">&#39;tta&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;tt</span><span class="se">\xE4</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ssa&#39;</span><span class="p">,</span> <span class="s1">&#39;ss</span><span class="se">\xE4</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;sta&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;st</span><span class="se">\xE4</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;lla&#39;</span><span class="p">,</span> <span class="s1">&#39;ll</span><span class="se">\xE4</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;lta&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;lt</span><span class="se">\xE4</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;lle&#39;</span><span class="p">,</span> <span class="s1">&#39;ksi&#39;</span><span class="p">,</span> <span class="s1">&#39;ine&#39;</span><span class="p">,</span> <span class="s1">&#39;ta&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;t</span><span class="se">\xE4</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;na&#39;</span><span class="p">,</span> <span class="s1">&#39;n</span><span class="se">\xE4</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE4</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;n&#39;</span><span class="p">)</span>
    <span class="n">__step4_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;impi&#39;</span><span class="p">,</span> <span class="s1">&#39;impa&#39;</span><span class="p">,</span> <span class="s1">&#39;imp</span><span class="se">\xE4</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;immi&#39;</span><span class="p">,</span> <span class="s1">&#39;imma&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;imm</span><span class="se">\xE4</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;mpi&#39;</span><span class="p">,</span> <span class="s1">&#39;mpa&#39;</span><span class="p">,</span> <span class="s1">&#39;mp</span><span class="se">\xE4</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;mmi&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;mma&#39;</span><span class="p">,</span> <span class="s1">&#39;mm</span><span class="se">\xE4</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;eja&#39;</span><span class="p">,</span> <span class="s1">&#39;ej</span><span class="se">\xE4</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stem a Finnish word and return the stemmed form.</span>

<span class="sd">        :param word: The word that is stemmed.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :return: The stemmed form.</span>
<span class="sd">        :rtype: unicode</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopwords</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">word</span>

        <span class="n">step3_success</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r1r2_standard</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>

        <span class="c1"># STEP 1: Particles etc.</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step1_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;sti&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="s2">&quot;ntaeiouy</span><span class="se">\xE4\xF6</span><span class="s2">&quot;</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 2: Possessives</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step2_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;si&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;k&quot;</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;ni&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                    <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;kse&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="s2">&quot;kse&quot;</span><span class="p">,</span> <span class="s2">&quot;ksi&quot;</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;kse&quot;</span><span class="p">):</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="s2">&quot;kse&quot;</span><span class="p">,</span> <span class="s2">&quot;ksi&quot;</span><span class="p">)</span>

                    <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;kse&quot;</span><span class="p">):</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r2</span><span class="p">,</span> <span class="s2">&quot;kse&quot;</span><span class="p">,</span> <span class="s2">&quot;ksi&quot;</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;an&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ta&quot;</span><span class="p">,</span> <span class="s2">&quot;na&quot;</span><span class="p">)</span> <span class="ow">or</span>
                        <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ssa&quot;</span><span class="p">,</span> <span class="s2">&quot;sta&quot;</span><span class="p">,</span> <span class="s2">&quot;lla&quot;</span><span class="p">,</span> <span class="s2">&quot;lta&quot;</span><span class="p">)):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="se">\xE4</span><span class="s2">n&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;t</span><span class="se">\xE4</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;n</span><span class="se">\xE4</span><span class="s2">&quot;</span><span class="p">)</span> <span class="ow">or</span>
                        <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ss</span><span class="se">\xE4</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;st</span><span class="se">\xE4</span><span class="s2">&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;ll</span><span class="se">\xE4</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;lt</span><span class="se">\xE4</span><span class="s2">&quot;</span><span class="p">)):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;en&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;lle&quot;</span><span class="p">,</span> <span class="s2">&quot;ine&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 3: Cases</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step3_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;han&quot;</span><span class="p">,</span> <span class="s2">&quot;hen&quot;</span><span class="p">,</span> <span class="s2">&quot;hin&quot;</span><span class="p">,</span> <span class="s2">&quot;hon&quot;</span><span class="p">,</span> <span class="s2">&quot;h</span><span class="se">\xE4</span><span class="s2">n&quot;</span><span class="p">,</span>
                              <span class="s2">&quot;h</span><span class="se">\xF6</span><span class="s2">n&quot;</span><span class="p">):</span>
                    <span class="k">if</span> <span class="p">((</span><span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;han&quot;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span> <span class="ow">or</span>
                        <span class="p">(</span><span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;hen&quot;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span> <span class="ow">or</span>
                        <span class="p">(</span><span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;hin&quot;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;i&quot;</span><span class="p">)</span> <span class="ow">or</span>
                        <span class="p">(</span><span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;hon&quot;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;o&quot;</span><span class="p">)</span> <span class="ow">or</span>
                        <span class="p">(</span><span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;h</span><span class="se">\xE4</span><span class="s2">n&quot;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="se">\xE4</span><span class="s2">&quot;</span><span class="p">)</span> <span class="ow">or</span>
                        <span class="p">(</span><span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;h</span><span class="se">\xF6</span><span class="s2">n&quot;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="se">\xF6</span><span class="s2">&quot;</span><span class="p">)):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">step3_success</span> <span class="o">=</span> <span class="bp">True</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;siin&quot;</span><span class="p">,</span> <span class="s2">&quot;den&quot;</span><span class="p">,</span> <span class="s2">&quot;tten&quot;</span><span class="p">):</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;i&quot;</span> <span class="ow">and</span>
                        <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__restricted_vowels</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">step3_success</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">continue</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;seen&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">6</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__long_vowels</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
                        <span class="n">step3_success</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="k">continue</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE4</span><span class="s2">&quot;</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__consonants</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">step3_success</span> <span class="o">=</span> <span class="bp">True</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;tta&quot;</span><span class="p">,</span> <span class="s2">&quot;tt</span><span class="se">\xE4</span><span class="s2">&quot;</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;e&quot;</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">step3_success</span> <span class="o">=</span> <span class="bp">True</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;n&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">step3_success</span> <span class="o">=</span> <span class="bp">True</span>

                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;ie&quot;</span> <span class="ow">or</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__long_vowels</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">step3_success</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">break</span>

        <span class="c1"># STEP 4: Other endings</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step4_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;mpi&quot;</span><span class="p">,</span> <span class="s2">&quot;mpa&quot;</span><span class="p">,</span> <span class="s2">&quot;mp</span><span class="se">\xE4</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;mmi&quot;</span><span class="p">,</span> <span class="s2">&quot;mma&quot;</span><span class="p">,</span>
                              <span class="s2">&quot;mm</span><span class="se">\xE4</span><span class="s2">&quot;</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;po&quot;</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 5: Plurals</span>
        <span class="k">if</span> <span class="n">step3_success</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">r1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="s2">&quot;ij&quot;</span><span class="p">:</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">elif</span> <span class="p">(</span><span class="ow">not</span> <span class="n">step3_success</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="ow">and</span>
              <span class="n">r1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;t&quot;</span> <span class="ow">and</span> <span class="n">r1</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">):</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;imma&quot;</span><span class="p">):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
                <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
            <span class="k">elif</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;mma&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">r2</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;po&quot;</span><span class="p">:</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>

        <span class="c1"># STEP 6: Tidying up</span>
        <span class="k">if</span> <span class="n">r1</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__long_vowels</span><span class="p">:</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">r1</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__consonants</span> <span class="ow">and</span>
            <span class="n">r1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="s2">&quot;a</span><span class="se">\xE4</span><span class="s2">ei&quot;</span><span class="p">):</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;oj&quot;</span><span class="p">,</span> <span class="s2">&quot;uj&quot;</span><span class="p">)):</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;jo&quot;</span><span class="p">):</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># If the word ends with a double consonant</span>
        <span class="c1"># followed by zero or more vowels, the last consonant is removed.</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">:</span>
                <span class="k">continue</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">:]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__double_consonants</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__double_consonants</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="n">i</span><span class="p">],</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]))</span>
                <span class="k">break</span>


        <span class="k">return</span> <span class="n">word</span>



<span class="k">class</span> <span class="nc">FrenchStemmer</span><span class="p">(</span><span class="n">_StandardStemmer</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The French Snowball stemmer.</span>

<span class="sd">    :cvar __vowels: The French vowels.</span>
<span class="sd">    :type __vowels: unicode</span>
<span class="sd">    :cvar __step1_suffixes: Suffixes to be deleted in step 1 of the algorithm.</span>
<span class="sd">    :type __step1_suffixes: tuple</span>
<span class="sd">    :cvar __step2a_suffixes: Suffixes to be deleted in step 2a of the algorithm.</span>
<span class="sd">    :type __step2a_suffixes: tuple</span>
<span class="sd">    :cvar __step2b_suffixes: Suffixes to be deleted in step 2b of the algorithm.</span>
<span class="sd">    :type __step2b_suffixes: tuple</span>
<span class="sd">    :cvar __step4_suffixes: Suffixes to be deleted in step 4 of the algorithm.</span>
<span class="sd">    :type __step4_suffixes: tuple</span>
<span class="sd">    :note: A detailed description of the French</span>
<span class="sd">           stemming algorithm can be found under</span>
<span class="sd">           http://snowball.tartarus.org/algorithms/french/stemmer.html</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__vowels</span> <span class="o">=</span> <span class="s2">&quot;aeiouy</span><span class="se">\xE2\xE0\xEB\xE9\xEA\xE8\xEF\xEE\xF4\xFB\xF9</span><span class="s2">&quot;</span>
    <span class="n">__step1_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;issements&#39;</span><span class="p">,</span> <span class="s1">&#39;issement&#39;</span><span class="p">,</span> <span class="s1">&#39;atrices&#39;</span><span class="p">,</span> <span class="s1">&#39;atrice&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ateurs&#39;</span><span class="p">,</span> <span class="s1">&#39;ations&#39;</span><span class="p">,</span> <span class="s1">&#39;logies&#39;</span><span class="p">,</span> <span class="s1">&#39;usions&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;utions&#39;</span><span class="p">,</span> <span class="s1">&#39;ements&#39;</span><span class="p">,</span> <span class="s1">&#39;amment&#39;</span><span class="p">,</span> <span class="s1">&#39;emment&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ances&#39;</span><span class="p">,</span> <span class="s1">&#39;iqUes&#39;</span><span class="p">,</span> <span class="s1">&#39;ismes&#39;</span><span class="p">,</span> <span class="s1">&#39;ables&#39;</span><span class="p">,</span> <span class="s1">&#39;istes&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ateur&#39;</span><span class="p">,</span> <span class="s1">&#39;ation&#39;</span><span class="p">,</span> <span class="s1">&#39;logie&#39;</span><span class="p">,</span> <span class="s1">&#39;usion&#39;</span><span class="p">,</span> <span class="s1">&#39;ution&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ences&#39;</span><span class="p">,</span> <span class="s1">&#39;ement&#39;</span><span class="p">,</span> <span class="s1">&#39;euses&#39;</span><span class="p">,</span> <span class="s1">&#39;ments&#39;</span><span class="p">,</span> <span class="s1">&#39;ance&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;iqUe&#39;</span><span class="p">,</span> <span class="s1">&#39;isme&#39;</span><span class="p">,</span> <span class="s1">&#39;able&#39;</span><span class="p">,</span> <span class="s1">&#39;iste&#39;</span><span class="p">,</span> <span class="s1">&#39;ence&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;it</span><span class="se">\xE9</span><span class="s1">s&#39;</span><span class="p">,</span> <span class="s1">&#39;ives&#39;</span><span class="p">,</span> <span class="s1">&#39;eaux&#39;</span><span class="p">,</span> <span class="s1">&#39;euse&#39;</span><span class="p">,</span> <span class="s1">&#39;ment&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;eux&#39;</span><span class="p">,</span> <span class="s1">&#39;it</span><span class="se">\xE9</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ive&#39;</span><span class="p">,</span> <span class="s1">&#39;ifs&#39;</span><span class="p">,</span> <span class="s1">&#39;aux&#39;</span><span class="p">,</span> <span class="s1">&#39;if&#39;</span><span class="p">)</span>
    <span class="n">__step2a_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;issaIent&#39;</span><span class="p">,</span> <span class="s1">&#39;issantes&#39;</span><span class="p">,</span> <span class="s1">&#39;iraIent&#39;</span><span class="p">,</span> <span class="s1">&#39;issante&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;issants&#39;</span><span class="p">,</span> <span class="s1">&#39;issions&#39;</span><span class="p">,</span> <span class="s1">&#39;irions&#39;</span><span class="p">,</span> <span class="s1">&#39;issais&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;issait&#39;</span><span class="p">,</span> <span class="s1">&#39;issant&#39;</span><span class="p">,</span> <span class="s1">&#39;issent&#39;</span><span class="p">,</span> <span class="s1">&#39;issiez&#39;</span><span class="p">,</span> <span class="s1">&#39;issons&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;irais&#39;</span><span class="p">,</span> <span class="s1">&#39;irait&#39;</span><span class="p">,</span> <span class="s1">&#39;irent&#39;</span><span class="p">,</span> <span class="s1">&#39;iriez&#39;</span><span class="p">,</span> <span class="s1">&#39;irons&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;iront&#39;</span><span class="p">,</span> <span class="s1">&#39;isses&#39;</span><span class="p">,</span> <span class="s1">&#39;issez&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xEE</span><span class="s1">mes&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;</span><span class="se">\xEE</span><span class="s1">tes&#39;</span><span class="p">,</span> <span class="s1">&#39;irai&#39;</span><span class="p">,</span> <span class="s1">&#39;iras&#39;</span><span class="p">,</span> <span class="s1">&#39;irez&#39;</span><span class="p">,</span> <span class="s1">&#39;isse&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ies&#39;</span><span class="p">,</span> <span class="s1">&#39;ira&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xEE</span><span class="s1">t&#39;</span><span class="p">,</span> <span class="s1">&#39;ie&#39;</span><span class="p">,</span> <span class="s1">&#39;ir&#39;</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;it&#39;</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">)</span>
    <span class="n">__step2b_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;eraIent&#39;</span><span class="p">,</span> <span class="s1">&#39;assions&#39;</span><span class="p">,</span> <span class="s1">&#39;erions&#39;</span><span class="p">,</span> <span class="s1">&#39;assent&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;assiez&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE8</span><span class="s1">rent&#39;</span><span class="p">,</span> <span class="s1">&#39;erais&#39;</span><span class="p">,</span> <span class="s1">&#39;erait&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;eriez&#39;</span><span class="p">,</span> <span class="s1">&#39;erons&#39;</span><span class="p">,</span> <span class="s1">&#39;eront&#39;</span><span class="p">,</span> <span class="s1">&#39;aIent&#39;</span><span class="p">,</span> <span class="s1">&#39;antes&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;asses&#39;</span><span class="p">,</span> <span class="s1">&#39;ions&#39;</span><span class="p">,</span> <span class="s1">&#39;erai&#39;</span><span class="p">,</span> <span class="s1">&#39;eras&#39;</span><span class="p">,</span> <span class="s1">&#39;erez&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">mes&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">tes&#39;</span><span class="p">,</span> <span class="s1">&#39;ante&#39;</span><span class="p">,</span> <span class="s1">&#39;ants&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;asse&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">es&#39;</span><span class="p">,</span> <span class="s1">&#39;era&#39;</span><span class="p">,</span> <span class="s1">&#39;iez&#39;</span><span class="p">,</span> <span class="s1">&#39;ais&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ait&#39;</span><span class="p">,</span> <span class="s1">&#39;ant&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">e&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">s&#39;</span><span class="p">,</span> <span class="s1">&#39;er&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ez&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">t&#39;</span><span class="p">,</span> <span class="s1">&#39;ai&#39;</span><span class="p">,</span> <span class="s1">&#39;as&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">)</span>
    <span class="n">__step4_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;i</span><span class="se">\xE8</span><span class="s1">re&#39;</span><span class="p">,</span> <span class="s1">&#39;I</span><span class="se">\xE8</span><span class="s1">re&#39;</span><span class="p">,</span> <span class="s1">&#39;ion&#39;</span><span class="p">,</span> <span class="s1">&#39;ier&#39;</span><span class="p">,</span> <span class="s1">&#39;Ier&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xEB</span><span class="s1">&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stem a French word and return the stemmed form.</span>

<span class="sd">        :param word: The word that is stemmed.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :return: The stemmed form.</span>
<span class="sd">        :rtype: unicode</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopwords</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">word</span>

        <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">rv_ending_found</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">step2a_success</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">step2b_success</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="c1"># Every occurrence of &#39;u&#39; after &#39;q&#39; is put into upper case.</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;q&quot;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;u&quot;</span><span class="p">:</span>
                <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="p">],</span> <span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]))</span>

        <span class="c1"># Every occurrence of &#39;u&#39; and &#39;i&#39;</span>
        <span class="c1"># between vowels is put into upper case.</span>
        <span class="c1"># Every occurrence of &#39;y&#39; preceded or</span>
        <span class="c1"># followed by a vowel is also put into upper case.</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;u&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="p">],</span> <span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]))</span>

                <span class="k">elif</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;i&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="p">],</span> <span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]))</span>

            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">or</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="p">],</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]))</span>

        <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r1r2_standard</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__rv_french</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>

        <span class="c1"># STEP 1: Standard suffix removal</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step1_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;eaux&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;euse&quot;</span><span class="p">,</span> <span class="s2">&quot;euses&quot;</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;eux&quot;</span><span class="p">)</span>
                        <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ement&quot;</span><span class="p">,</span> <span class="s2">&quot;ements&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">rv</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>

                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;iv&quot;</span> <span class="ow">and</span> <span class="s2">&quot;iv&quot;</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                        <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;at&quot;</span> <span class="ow">and</span> <span class="s2">&quot;at&quot;</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;eus&quot;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s2">&quot;eus&quot;</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                        <span class="k">elif</span> <span class="s2">&quot;eus&quot;</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;x&quot;</span><span class="p">))</span>

                    <span class="k">elif</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;abl&quot;</span><span class="p">,</span> <span class="s2">&quot;iqU&quot;</span><span class="p">):</span>
                        <span class="k">if</span> <span class="s2">&quot;abl&quot;</span> <span class="ow">in</span> <span class="n">r2</span> <span class="ow">or</span> <span class="s2">&quot;iqU&quot;</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;i</span><span class="se">\xE8</span><span class="s2">r&quot;</span><span class="p">,</span> <span class="s2">&quot;I</span><span class="se">\xE8</span><span class="s2">r&quot;</span><span class="p">):</span>
                        <span class="k">if</span> <span class="s2">&quot;i</span><span class="se">\xE8</span><span class="s2">r&quot;</span> <span class="ow">in</span> <span class="n">rv</span> <span class="ow">or</span> <span class="s2">&quot;I</span><span class="se">\xE8</span><span class="s2">r&quot;</span> <span class="ow">in</span> <span class="n">rv</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;i&quot;</span><span class="p">))</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;amment&quot;</span> <span class="ow">and</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">rv</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="s2">&quot;amment&quot;</span><span class="p">,</span> <span class="s2">&quot;ant&quot;</span><span class="p">)</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="s2">&quot;amment&quot;</span><span class="p">,</span> <span class="s2">&quot;ant&quot;</span><span class="p">)</span>
                    <span class="n">rv_ending_found</span> <span class="o">=</span> <span class="bp">True</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;emment&quot;</span> <span class="ow">and</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">rv</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="s2">&quot;emment&quot;</span><span class="p">,</span> <span class="s2">&quot;ent&quot;</span><span class="p">)</span>
                    <span class="n">rv_ending_found</span> <span class="o">=</span> <span class="bp">True</span>

                <span class="k">elif</span> <span class="p">(</span><span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ment&quot;</span><span class="p">,</span> <span class="s2">&quot;ments&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">rv</span> <span class="ow">and</span>
                      <span class="ow">not</span> <span class="n">rv</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span> <span class="ow">and</span>
                      <span class="n">rv</span><span class="p">[</span><span class="n">rv</span><span class="o">.</span><span class="n">rindex</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">rv_ending_found</span> <span class="o">=</span> <span class="bp">True</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;aux&quot;</span> <span class="ow">and</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;l&quot;</span><span class="p">))</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>

                <span class="k">elif</span> <span class="p">(</span><span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;issement&quot;</span><span class="p">,</span> <span class="s2">&quot;issements&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r1</span>
                      <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ance&quot;</span><span class="p">,</span> <span class="s2">&quot;iqUe&quot;</span><span class="p">,</span> <span class="s2">&quot;isme&quot;</span><span class="p">,</span> <span class="s2">&quot;able&quot;</span><span class="p">,</span> <span class="s2">&quot;iste&quot;</span><span class="p">,</span>
                              <span class="s2">&quot;eux&quot;</span><span class="p">,</span> <span class="s2">&quot;ances&quot;</span><span class="p">,</span> <span class="s2">&quot;iqUes&quot;</span><span class="p">,</span> <span class="s2">&quot;ismes&quot;</span><span class="p">,</span>
                              <span class="s2">&quot;ables&quot;</span><span class="p">,</span> <span class="s2">&quot;istes&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;atrice&quot;</span><span class="p">,</span> <span class="s2">&quot;ateur&quot;</span><span class="p">,</span> <span class="s2">&quot;ation&quot;</span><span class="p">,</span> <span class="s2">&quot;atrices&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;ateurs&quot;</span><span class="p">,</span> <span class="s2">&quot;ations&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>

                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;ic&quot;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s2">&quot;ic&quot;</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;iqU&quot;</span><span class="p">))</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;logie&quot;</span><span class="p">,</span> <span class="s2">&quot;logies&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;log&quot;</span><span class="p">)</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>

                <span class="k">elif</span> <span class="p">(</span><span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;usion&quot;</span><span class="p">,</span> <span class="s2">&quot;ution&quot;</span><span class="p">,</span> <span class="s2">&quot;usions&quot;</span><span class="p">,</span> <span class="s2">&quot;utions&quot;</span><span class="p">)</span> <span class="ow">and</span>
                      <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">)</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ence&quot;</span><span class="p">,</span> <span class="s2">&quot;ences&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ent&quot;</span><span class="p">)</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;it</span><span class="se">\xE9</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;it</span><span class="se">\xE9</span><span class="s2">s&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>

                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;abil&quot;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s2">&quot;abil&quot;</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;l&quot;</span><span class="p">))</span>

                    <span class="k">elif</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;ic&quot;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s2">&quot;ic&quot;</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;iqU&quot;</span><span class="p">))</span>

                    <span class="k">elif</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;iv&quot;</span><span class="p">:</span>
                        <span class="k">if</span> <span class="s2">&quot;iv&quot;</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                <span class="k">elif</span> <span class="p">(</span><span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;if&quot;</span><span class="p">,</span> <span class="s2">&quot;ive&quot;</span><span class="p">,</span> <span class="s2">&quot;ifs&quot;</span><span class="p">,</span> <span class="s2">&quot;ives&quot;</span><span class="p">)</span> <span class="ow">and</span>
                      <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>

                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;at&quot;</span> <span class="ow">and</span> <span class="s2">&quot;at&quot;</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                        <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;ic&quot;</span><span class="p">:</span>
                            <span class="k">if</span> <span class="s2">&quot;ic&quot;</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                            <span class="k">else</span><span class="p">:</span>
                                <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="s2">&quot;iqU&quot;</span><span class="p">))</span>
                <span class="k">break</span>

        <span class="c1"># STEP 2a: Verb suffixes beginning &#39;i&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">step1_success</span> <span class="ow">or</span> <span class="n">rv_ending_found</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step2a_suffixes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">suffix</span> <span class="ow">in</span> <span class="n">rv</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">rv</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span> <span class="ow">and</span>
                        <span class="n">rv</span><span class="p">[</span><span class="n">rv</span><span class="o">.</span><span class="n">rindex</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">step2a_success</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">break</span>

        <span class="c1"># STEP 2b: Other verb suffixes</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">step2a_success</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step2b_suffixes</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;ions&quot;</span> <span class="ow">and</span> <span class="s2">&quot;ions&quot;</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
                            <span class="n">step2b_success</span> <span class="o">=</span> <span class="bp">True</span>

                        <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;eraIent&#39;</span><span class="p">,</span> <span class="s1">&#39;erions&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE8</span><span class="s1">rent&#39;</span><span class="p">,</span>
                                        <span class="s1">&#39;erais&#39;</span><span class="p">,</span> <span class="s1">&#39;erait&#39;</span><span class="p">,</span> <span class="s1">&#39;eriez&#39;</span><span class="p">,</span>
                                        <span class="s1">&#39;erons&#39;</span><span class="p">,</span> <span class="s1">&#39;eront&#39;</span><span class="p">,</span> <span class="s1">&#39;erai&#39;</span><span class="p">,</span> <span class="s1">&#39;eras&#39;</span><span class="p">,</span>
                                        <span class="s1">&#39;erez&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">es&#39;</span><span class="p">,</span> <span class="s1">&#39;era&#39;</span><span class="p">,</span> <span class="s1">&#39;iez&#39;</span><span class="p">,</span>
                                        <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">e&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">s&#39;</span><span class="p">,</span> <span class="s1">&#39;er&#39;</span><span class="p">,</span> <span class="s1">&#39;ez&#39;</span><span class="p">,</span>
                                        <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">&#39;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                            <span class="n">step2b_success</span> <span class="o">=</span> <span class="bp">True</span>

                        <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;assions&#39;</span><span class="p">,</span> <span class="s1">&#39;assent&#39;</span><span class="p">,</span> <span class="s1">&#39;assiez&#39;</span><span class="p">,</span>
                                        <span class="s1">&#39;aIent&#39;</span><span class="p">,</span> <span class="s1">&#39;antes&#39;</span><span class="p">,</span> <span class="s1">&#39;asses&#39;</span><span class="p">,</span>
                                        <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">mes&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">tes&#39;</span><span class="p">,</span> <span class="s1">&#39;ante&#39;</span><span class="p">,</span>
                                        <span class="s1">&#39;ants&#39;</span><span class="p">,</span> <span class="s1">&#39;asse&#39;</span><span class="p">,</span> <span class="s1">&#39;ais&#39;</span><span class="p">,</span> <span class="s1">&#39;ait&#39;</span><span class="p">,</span>
                                        <span class="s1">&#39;ant&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">t&#39;</span><span class="p">,</span> <span class="s1">&#39;ai&#39;</span><span class="p">,</span> <span class="s1">&#39;as&#39;</span><span class="p">,</span>
                                        <span class="s1">&#39;a&#39;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                            <span class="n">step2b_success</span> <span class="o">=</span> <span class="bp">True</span>
                            <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">):</span>
                                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">break</span>

        <span class="c1"># STEP 3</span>
        <span class="k">if</span> <span class="n">step1_success</span> <span class="ow">or</span> <span class="n">step2a_success</span> <span class="ow">or</span> <span class="n">step2b_success</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Y&quot;</span><span class="p">:</span>
                <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;i&quot;</span><span class="p">))</span>
            <span class="k">elif</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="se">\xE7</span><span class="s2">&quot;</span><span class="p">:</span>
                <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;c&quot;</span><span class="p">))</span>

        <span class="c1"># STEP 4: Residual suffixes</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;s&quot;</span> <span class="ow">and</span>
                <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="s2">&quot;aiou</span><span class="se">\xE8</span><span class="s2">s&quot;</span><span class="p">):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step4_suffixes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">rv</span><span class="p">:</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;ion&quot;</span> <span class="ow">and</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r2</span> <span class="ow">and</span>
                            <span class="n">rv</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span> <span class="ow">in</span> <span class="s2">&quot;st&quot;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>

                        <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ier&quot;</span><span class="p">,</span> <span class="s2">&quot;i</span><span class="se">\xE8</span><span class="s2">re&quot;</span><span class="p">,</span> <span class="s2">&quot;Ier&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;I</span><span class="se">\xE8</span><span class="s2">re&quot;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">)</span>

                        <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;e&quot;</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

                        <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="se">\xEB</span><span class="s2">&quot;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;gu&quot;</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="k">break</span>

        <span class="c1"># STEP 5: Undouble</span>
        <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;enn&quot;</span><span class="p">,</span> <span class="s2">&quot;onn&quot;</span><span class="p">,</span> <span class="s2">&quot;ett&quot;</span><span class="p">,</span> <span class="s2">&quot;ell&quot;</span><span class="p">,</span> <span class="s2">&quot;eill&quot;</span><span class="p">)):</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># STEP 6: Un-accent</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="n">i</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">:</span>
                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE8</span><span class="s2">&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="n">i</span><span class="p">],</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]))</span>
                <span class="k">break</span>

        <span class="n">word</span> <span class="o">=</span> <span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">))</span>


        <span class="k">return</span> <span class="n">word</span>



    <span class="k">def</span> <span class="nf">__rv_french</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">vowels</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the region RV that is used by the French stemmer.</span>

<span class="sd">        If the word begins with two vowels, RV is the region after</span>
<span class="sd">        the third letter. Otherwise, it is the region after the first</span>
<span class="sd">        vowel not at the beginning of the word, or the end of the word</span>
<span class="sd">        if these positions cannot be found. (Exceptionally, u&#39;par&#39;,</span>
<span class="sd">        u&#39;col&#39; or u&#39;tap&#39; at the beginning of a word is also taken to</span>
<span class="sd">        define RV as the region to their right.)</span>

<span class="sd">        :param word: The French word whose region RV is determined.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :param vowels: The French vowels that are used to determine</span>
<span class="sd">                       the region RV.</span>
<span class="sd">        :type vowels: unicode</span>
<span class="sd">        :return: the region RV for the respective French word.</span>
<span class="sd">        :rtype: unicode</span>
<span class="sd">        :note: This helper method is invoked by the stem method of</span>
<span class="sd">               the subclass FrenchStemmer. It is not to be invoked directly!</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">:</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">startswith</span><span class="p">((</span><span class="s2">&quot;par&quot;</span><span class="p">,</span> <span class="s2">&quot;col&quot;</span><span class="p">,</span> <span class="s2">&quot;tap&quot;</span><span class="p">))</span> <span class="ow">or</span>
                <span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">vowels</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">vowels</span><span class="p">)):</span>
                <span class="n">rv</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="n">vowels</span><span class="p">:</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                        <span class="k">break</span>

        <span class="k">return</span> <span class="n">rv</span>



<span class="k">class</span> <span class="nc">GermanStemmer</span><span class="p">(</span><span class="n">_StandardStemmer</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The German Snowball stemmer.</span>

<span class="sd">    :cvar __vowels: The German vowels.</span>
<span class="sd">    :type __vowels: unicode</span>
<span class="sd">    :cvar __s_ending: Letters that may directly appear before a word final &#39;s&#39;.</span>
<span class="sd">    :type __s_ending: unicode</span>
<span class="sd">    :cvar __st_ending: Letter that may directly appear before a word final &#39;st&#39;.</span>
<span class="sd">    :type __st_ending: unicode</span>
<span class="sd">    :cvar __step1_suffixes: Suffixes to be deleted in step 1 of the algorithm.</span>
<span class="sd">    :type __step1_suffixes: tuple</span>
<span class="sd">    :cvar __step2_suffixes: Suffixes to be deleted in step 2 of the algorithm.</span>
<span class="sd">    :type __step2_suffixes: tuple</span>
<span class="sd">    :cvar __step3_suffixes: Suffixes to be deleted in step 3 of the algorithm.</span>
<span class="sd">    :type __step3_suffixes: tuple</span>
<span class="sd">    :note: A detailed description of the German</span>
<span class="sd">           stemming algorithm can be found under</span>
<span class="sd">           http://snowball.tartarus.org/algorithms/german/stemmer.html</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__vowels</span> <span class="o">=</span> <span class="s2">&quot;aeiouy</span><span class="se">\xE4\xF6\xFC</span><span class="s2">&quot;</span>
    <span class="n">__s_ending</span> <span class="o">=</span> <span class="s2">&quot;bdfghklmnrt&quot;</span>
    <span class="n">__st_ending</span> <span class="o">=</span> <span class="s2">&quot;bdfghklmnt&quot;</span>

    <span class="n">__step1_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;ern&quot;</span><span class="p">,</span> <span class="s2">&quot;em&quot;</span><span class="p">,</span> <span class="s2">&quot;er&quot;</span><span class="p">,</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span> <span class="s2">&quot;es&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">)</span>
    <span class="n">__step2_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;est&quot;</span><span class="p">,</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span> <span class="s2">&quot;er&quot;</span><span class="p">,</span> <span class="s2">&quot;st&quot;</span><span class="p">)</span>
    <span class="n">__step3_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;isch&quot;</span><span class="p">,</span> <span class="s2">&quot;lich&quot;</span><span class="p">,</span> <span class="s2">&quot;heit&quot;</span><span class="p">,</span> <span class="s2">&quot;keit&quot;</span><span class="p">,</span>
                          <span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="s2">&quot;ung&quot;</span><span class="p">,</span> <span class="s2">&quot;ig&quot;</span><span class="p">,</span> <span class="s2">&quot;ik&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stem a German word and return the stemmed form.</span>

<span class="sd">        :param word: The word that is stemmed.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :return: The stemmed form.</span>
<span class="sd">        :rtype: unicode</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopwords</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">word</span>

        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xDF</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;ss&quot;</span><span class="p">)</span>

        <span class="c1"># Every occurrence of &#39;u&#39; and &#39;y&#39;</span>
        <span class="c1"># between vowels is put into upper case.</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;u&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="p">],</span> <span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]))</span>

                <span class="k">elif</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="p">],</span> <span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]))</span>

        <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r1r2_standard</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>

        <span class="c1"># R1 is adjusted so that the region before it</span>
        <span class="c1"># contains at least 3 letters.</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">&lt;</span> <span class="mi">3</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="mi">3</span><span class="p">:]</span>
                <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">])</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
                    <span class="k">return</span> <span class="n">word</span>
                <span class="k">break</span>

        <span class="c1"># STEP 1</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step1_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;en&quot;</span><span class="p">,</span> <span class="s2">&quot;es&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span> <span class="ow">and</span>
                    <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">4</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span> <span class="o">==</span> <span class="s2">&quot;niss&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;s&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__s_ending</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 2</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step2_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;st&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__st_ending</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">])</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 3: Derivational suffixes</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step3_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;end&quot;</span><span class="p">,</span> <span class="s2">&quot;ung&quot;</span><span class="p">):</span>
                    <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;ig&quot;</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span> <span class="ow">and</span>
                        <span class="s2">&quot;e&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">]):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>

                <span class="k">elif</span> <span class="p">(</span><span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ig&quot;</span><span class="p">,</span> <span class="s2">&quot;ik&quot;</span><span class="p">,</span> <span class="s2">&quot;isch&quot;</span><span class="p">)</span> <span class="ow">and</span>
                      <span class="s2">&quot;e&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;lich&quot;</span><span class="p">,</span> <span class="s2">&quot;heit&quot;</span><span class="p">):</span>
                    <span class="k">if</span> <span class="p">(</span><span class="s2">&quot;er&quot;</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span> <span class="ow">or</span>
                        <span class="s2">&quot;en&quot;</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;keit&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s2">&quot;lich&quot;</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">4</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="s2">&quot;ig&quot;</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># Umlaut accents are removed and</span>
        <span class="c1"># &#39;u&#39; and &#39;y&#39; are put back into lower case.</span>
        <span class="n">word</span> <span class="o">=</span> <span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE4</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xF6</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xFC</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;Y&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">))</span>


        <span class="k">return</span> <span class="n">word</span>



<span class="k">class</span> <span class="nc">HungarianStemmer</span><span class="p">(</span><span class="n">_LanguageSpecificStemmer</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Hungarian Snowball stemmer.</span>

<span class="sd">    :cvar __vowels: The Hungarian vowels.</span>
<span class="sd">    :type __vowels: unicode</span>
<span class="sd">    :cvar __digraphs: The Hungarian digraphs.</span>
<span class="sd">    :type __digraphs: tuple</span>
<span class="sd">    :cvar __double_consonants: The Hungarian double consonants.</span>
<span class="sd">    :type __double_consonants: tuple</span>
<span class="sd">    :cvar __step1_suffixes: Suffixes to be deleted in step 1 of the algorithm.</span>
<span class="sd">    :type __step1_suffixes: tuple</span>
<span class="sd">    :cvar __step2_suffixes: Suffixes to be deleted in step 2 of the algorithm.</span>
<span class="sd">    :type __step2_suffixes: tuple</span>
<span class="sd">    :cvar __step3_suffixes: Suffixes to be deleted in step 3 of the algorithm.</span>
<span class="sd">    :type __step3_suffixes: tuple</span>
<span class="sd">    :cvar __step4_suffixes: Suffixes to be deleted in step 4 of the algorithm.</span>
<span class="sd">    :type __step4_suffixes: tuple</span>
<span class="sd">    :cvar __step5_suffixes: Suffixes to be deleted in step 5 of the algorithm.</span>
<span class="sd">    :type __step5_suffixes: tuple</span>
<span class="sd">    :cvar __step6_suffixes: Suffixes to be deleted in step 6 of the algorithm.</span>
<span class="sd">    :type __step6_suffixes: tuple</span>
<span class="sd">    :cvar __step7_suffixes: Suffixes to be deleted in step 7 of the algorithm.</span>
<span class="sd">    :type __step7_suffixes: tuple</span>
<span class="sd">    :cvar __step8_suffixes: Suffixes to be deleted in step 8 of the algorithm.</span>
<span class="sd">    :type __step8_suffixes: tuple</span>
<span class="sd">    :cvar __step9_suffixes: Suffixes to be deleted in step 9 of the algorithm.</span>
<span class="sd">    :type __step9_suffixes: tuple</span>
<span class="sd">    :note: A detailed description of the Hungarian</span>
<span class="sd">           stemming algorithm can be found under</span>
<span class="sd">           http://snowball.tartarus.org/algorithms/hungarian/stemmer.html</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__vowels</span> <span class="o">=</span> <span class="s2">&quot;aeiou</span><span class="se">\xF6\xFC\xE1\xE9\xED\xF3\xF5\xFA\xFB</span><span class="s2">&quot;</span>
    <span class="n">__digraphs</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;cs&quot;</span><span class="p">,</span> <span class="s2">&quot;dz&quot;</span><span class="p">,</span> <span class="s2">&quot;dzs&quot;</span><span class="p">,</span> <span class="s2">&quot;gy&quot;</span><span class="p">,</span> <span class="s2">&quot;ly&quot;</span><span class="p">,</span> <span class="s2">&quot;ny&quot;</span><span class="p">,</span> <span class="s2">&quot;ty&quot;</span><span class="p">,</span> <span class="s2">&quot;zs&quot;</span><span class="p">)</span>
    <span class="n">__double_consonants</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;bb&quot;</span><span class="p">,</span> <span class="s2">&quot;cc&quot;</span><span class="p">,</span> <span class="s2">&quot;ccs&quot;</span><span class="p">,</span> <span class="s2">&quot;dd&quot;</span><span class="p">,</span> <span class="s2">&quot;ff&quot;</span><span class="p">,</span> <span class="s2">&quot;gg&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;ggy&quot;</span><span class="p">,</span> <span class="s2">&quot;jj&quot;</span><span class="p">,</span> <span class="s2">&quot;kk&quot;</span><span class="p">,</span> <span class="s2">&quot;ll&quot;</span><span class="p">,</span> <span class="s2">&quot;lly&quot;</span><span class="p">,</span> <span class="s2">&quot;mm&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;nn&quot;</span><span class="p">,</span> <span class="s2">&quot;nny&quot;</span><span class="p">,</span> <span class="s2">&quot;pp&quot;</span><span class="p">,</span> <span class="s2">&quot;rr&quot;</span><span class="p">,</span> <span class="s2">&quot;ss&quot;</span><span class="p">,</span> <span class="s2">&quot;ssz&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;tt&quot;</span><span class="p">,</span> <span class="s2">&quot;tty&quot;</span><span class="p">,</span> <span class="s2">&quot;vv&quot;</span><span class="p">,</span> <span class="s2">&quot;zz&quot;</span><span class="p">,</span> <span class="s2">&quot;zzs&quot;</span><span class="p">)</span>

    <span class="n">__step1_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;al&quot;</span><span class="p">,</span> <span class="s2">&quot;el&quot;</span><span class="p">)</span>
    <span class="n">__step2_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;k</span><span class="se">\xE9</span><span class="s1">ppen&#39;</span><span class="p">,</span> <span class="s1">&#39;onk</span><span class="se">\xE9</span><span class="s1">nt&#39;</span><span class="p">,</span> <span class="s1">&#39;enk</span><span class="se">\xE9</span><span class="s1">nt&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ank</span><span class="se">\xE9</span><span class="s1">nt&#39;</span><span class="p">,</span> <span class="s1">&#39;k</span><span class="se">\xE9</span><span class="s1">pp&#39;</span><span class="p">,</span> <span class="s1">&#39;k</span><span class="se">\xE9</span><span class="s1">nt&#39;</span><span class="p">,</span> <span class="s1">&#39;ban&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ben&#39;</span><span class="p">,</span> <span class="s1">&#39;nak&#39;</span><span class="p">,</span> <span class="s1">&#39;nek&#39;</span><span class="p">,</span> <span class="s1">&#39;val&#39;</span><span class="p">,</span> <span class="s1">&#39;vel&#39;</span><span class="p">,</span> <span class="s1">&#39;t</span><span class="se">\xF3</span><span class="s1">l&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;t</span><span class="se">\xF5</span><span class="s1">l&#39;</span><span class="p">,</span> <span class="s1">&#39;r</span><span class="se">\xF3</span><span class="s1">l&#39;</span><span class="p">,</span> <span class="s1">&#39;r</span><span class="se">\xF5</span><span class="s1">l&#39;</span><span class="p">,</span> <span class="s1">&#39;b</span><span class="se">\xF3</span><span class="s1">l&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;b</span><span class="se">\xF5</span><span class="s1">l&#39;</span><span class="p">,</span> <span class="s1">&#39;hoz&#39;</span><span class="p">,</span> <span class="s1">&#39;hez&#39;</span><span class="p">,</span> <span class="s1">&#39;h</span><span class="se">\xF6</span><span class="s1">z&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;n</span><span class="se">\xE1</span><span class="s1">l&#39;</span><span class="p">,</span> <span class="s1">&#39;n</span><span class="se">\xE9</span><span class="s1">l&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">rt&#39;</span><span class="p">,</span> <span class="s1">&#39;kor&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ba&#39;</span><span class="p">,</span> <span class="s1">&#39;be&#39;</span><span class="p">,</span> <span class="s1">&#39;ra&#39;</span><span class="p">,</span> <span class="s1">&#39;re&#39;</span><span class="p">,</span> <span class="s1">&#39;ig&#39;</span><span class="p">,</span> <span class="s1">&#39;at&#39;</span><span class="p">,</span> <span class="s1">&#39;et&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ot&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xF6</span><span class="s1">t&#39;</span><span class="p">,</span> <span class="s1">&#39;ul&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xFC</span><span class="s1">l&#39;</span><span class="p">,</span> <span class="s1">&#39;v</span><span class="se">\xE1</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;v</span><span class="se">\xE9</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;en&#39;</span><span class="p">,</span> <span class="s1">&#39;on&#39;</span><span class="p">,</span> <span class="s1">&#39;an&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xF6</span><span class="s1">n&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;n&#39;</span><span class="p">,</span> <span class="s1">&#39;t&#39;</span><span class="p">)</span>
    <span class="n">__step3_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">nk</span><span class="se">\xE9</span><span class="s2">nt&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">n&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">n&quot;</span><span class="p">)</span>
    <span class="n">__step4_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;astul&#39;</span><span class="p">,</span> <span class="s1">&#39;est</span><span class="se">\xFC</span><span class="s1">l&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">stul&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">st</span><span class="se">\xFC</span><span class="s1">l&#39;</span><span class="p">,</span> <span class="s1">&#39;stul&#39;</span><span class="p">,</span> <span class="s1">&#39;st</span><span class="se">\xFC</span><span class="s1">l&#39;</span><span class="p">)</span>
    <span class="n">__step5_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">__step6_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;ok</span><span class="se">\xE9</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xF6</span><span class="s1">k</span><span class="se">\xE9</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ak</span><span class="se">\xE9</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ek</span><span class="se">\xE9</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">k</span><span class="se">\xE9</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1\xE9</span><span class="s1">i&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">k</span><span class="se">\xE9</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9\xE9</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;k</span><span class="se">\xE9</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9\xE9</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">__step7_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">juk&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">j</span><span class="se">\xFC</span><span class="s1">k&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xFC</span><span class="s1">nk&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;unk&#39;</span><span class="p">,</span> <span class="s1">&#39;juk&#39;</span><span class="p">,</span> <span class="s1">&#39;j</span><span class="se">\xFC</span><span class="s1">k&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">nk&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">nk&#39;</span><span class="p">,</span> <span class="s1">&#39;nk&#39;</span><span class="p">,</span> <span class="s1">&#39;uk&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xFC</span><span class="s1">k&#39;</span><span class="p">,</span> <span class="s1">&#39;em&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;om&#39;</span><span class="p">,</span> <span class="s1">&#39;am&#39;</span><span class="p">,</span> <span class="s1">&#39;od&#39;</span><span class="p">,</span> <span class="s1">&#39;ed&#39;</span><span class="p">,</span> <span class="s1">&#39;ad&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xF6</span><span class="s1">d&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ja&#39;</span><span class="p">,</span> <span class="s1">&#39;je&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">m&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">d&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">m&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">d&#39;</span><span class="p">,</span> <span class="s1">&#39;m&#39;</span><span class="p">,</span> <span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;o&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">__step8_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;jaitok&#39;</span><span class="p">,</span> <span class="s1">&#39;jeitek&#39;</span><span class="p">,</span> <span class="s1">&#39;jaink&#39;</span><span class="p">,</span> <span class="s1">&#39;jeink&#39;</span><span class="p">,</span> <span class="s1">&#39;aitok&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;eitek&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">itok&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">itek&#39;</span><span class="p">,</span> <span class="s1">&#39;jaim&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;jeim&#39;</span><span class="p">,</span> <span class="s1">&#39;jaid&#39;</span><span class="p">,</span> <span class="s1">&#39;jeid&#39;</span><span class="p">,</span> <span class="s1">&#39;eink&#39;</span><span class="p">,</span> <span class="s1">&#39;aink&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;itek&#39;</span><span class="p">,</span> <span class="s1">&#39;jeik&#39;</span><span class="p">,</span> <span class="s1">&#39;jaik&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">ink&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">ink&#39;</span><span class="p">,</span> <span class="s1">&#39;aim&#39;</span><span class="p">,</span> <span class="s1">&#39;eim&#39;</span><span class="p">,</span> <span class="s1">&#39;aid&#39;</span><span class="p">,</span> <span class="s1">&#39;eid&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;jai&#39;</span><span class="p">,</span> <span class="s1">&#39;jei&#39;</span><span class="p">,</span> <span class="s1">&#39;ink&#39;</span><span class="p">,</span> <span class="s1">&#39;aik&#39;</span><span class="p">,</span> <span class="s1">&#39;eik&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">im&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">id&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">ik&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">im&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">id&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">ik&#39;</span><span class="p">,</span> <span class="s1">&#39;im&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span> <span class="s1">&#39;ai&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ei&#39;</span><span class="p">,</span> <span class="s1">&#39;ik&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">)</span>
    <span class="n">__step9_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">k&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">k&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xF6</span><span class="s2">k&quot;</span><span class="p">,</span> <span class="s2">&quot;ok&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;ek&quot;</span><span class="p">,</span> <span class="s2">&quot;ak&quot;</span><span class="p">,</span> <span class="s2">&quot;k&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stem an Hungarian word and return the stemmed form.</span>

<span class="sd">        :param word: The word that is stemmed.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :return: The stemmed form.</span>
<span class="sd">        :rtype: unicode</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopwords</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">word</span>

        <span class="n">r1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__r1_hungarian</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__digraphs</span><span class="p">)</span>

        <span class="c1"># STEP 1: Remove instrumental case</span>
        <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">__step1_suffixes</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">double_cons</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__double_consonants</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">double_cons</span><span class="p">):</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="n">double_cons</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">],</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]))</span>

                    <span class="k">if</span> <span class="n">r1</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">double_cons</span><span class="p">):</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="n">double_cons</span><span class="p">:</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">],</span> <span class="n">r1</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]))</span>
                    <span class="k">break</span>

        <span class="c1"># STEP 2: Remove frequent cases</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step2_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>

                    <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;a&quot;</span><span class="p">))</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>

                    <span class="k">elif</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;e&quot;</span><span class="p">))</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                <span class="k">break</span>

        <span class="c1"># STEP 3: Remove special cases</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step3_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">n&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
                <span class="k">break</span>

        <span class="c1"># STEP 4: Remove other cases</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step4_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">stul&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">st</span><span class="se">\xFC</span><span class="s2">l&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 5: Remove factive case</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step5_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">double_cons</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__double_consonants</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">double_cons</span><span class="p">):</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">double_cons</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">],</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]))</span>

                        <span class="k">if</span> <span class="n">r1</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">double_cons</span><span class="p">):</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">double_cons</span><span class="p">:</span>
                            <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">],</span> <span class="n">r1</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]))</span>
                        <span class="k">break</span>

        <span class="c1"># STEP 6: Remove owned</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step6_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">k</span><span class="se">\xE9</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE1\xE9</span><span class="s2">i&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">k</span><span class="se">\xE9</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE9\xE9</span><span class="s2">i&quot;</span><span class="p">,</span>
                                <span class="s2">&quot;</span><span class="se">\xE9\xE9</span><span class="s2">&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 7: Remove singular owner suffixes</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step7_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">nk&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">juk&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">m&quot;</span><span class="p">,</span>
                                  <span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">d&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">nk&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">j</span><span class="se">\xFC</span><span class="s2">k&quot;</span><span class="p">,</span>
                                    <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">m&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">d&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 8: Remove plural owner suffixes</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step8_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">im&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">id&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">i&quot;</span><span class="p">,</span>
                                  <span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">ink&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">itok&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">ik&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">im&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">id&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">i&quot;</span><span class="p">,</span>
                                    <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">ink&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">itek&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">ik&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 9: Remove plural suffixes</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step9_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">k&quot;</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
                    <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">k&quot;</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>


        <span class="k">return</span> <span class="n">word</span>



    <span class="k">def</span> <span class="nf">__r1_hungarian</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">,</span> <span class="n">vowels</span><span class="p">,</span> <span class="n">digraphs</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the region R1 that is used by the Hungarian stemmer.</span>

<span class="sd">        If the word begins with a vowel, R1 is defined as the region</span>
<span class="sd">        after the first consonant or digraph (= two letters stand for</span>
<span class="sd">        one phoneme) in the word. If the word begins with a consonant,</span>
<span class="sd">        it is defined as the region after the first vowel in the word.</span>
<span class="sd">        If the word does not contain both a vowel and consonant, R1</span>
<span class="sd">        is the null region at the end of the word.</span>

<span class="sd">        :param word: The Hungarian word whose region R1 is determined.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :param vowels: The Hungarian vowels that are used to determine</span>
<span class="sd">                       the region R1.</span>
<span class="sd">        :type vowels: unicode</span>
<span class="sd">        :param digraphs: The digraphs that are used to determine the</span>
<span class="sd">                         region R1.</span>
<span class="sd">        :type digraphs: tuple</span>
<span class="sd">        :return: the region R1 for the respective word.</span>
<span class="sd">        :rtype: unicode</span>
<span class="sd">        :note: This helper method is invoked by the stem method of the subclass</span>
<span class="sd">               HungarianStemmer. It is not to be invoked directly!</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="n">vowels</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">digraph</span> <span class="ow">in</span> <span class="n">digraphs</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">digraph</span> <span class="ow">in</span> <span class="n">word</span><span class="p">[</span><span class="mi">1</span><span class="p">:]:</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="n">word</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">digraph</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                    <span class="k">return</span> <span class="n">r1</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">vowels</span><span class="p">:</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                    <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="n">vowels</span><span class="p">:</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                    <span class="k">break</span>

        <span class="k">return</span> <span class="n">r1</span>



<span class="k">class</span> <span class="nc">ItalianStemmer</span><span class="p">(</span><span class="n">_StandardStemmer</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Italian Snowball stemmer.</span>

<span class="sd">    :cvar __vowels: The Italian vowels.</span>
<span class="sd">    :type __vowels: unicode</span>
<span class="sd">    :cvar __step0_suffixes: Suffixes to be deleted in step 0 of the algorithm.</span>
<span class="sd">    :type __step0_suffixes: tuple</span>
<span class="sd">    :cvar __step1_suffixes: Suffixes to be deleted in step 1 of the algorithm.</span>
<span class="sd">    :type __step1_suffixes: tuple</span>
<span class="sd">    :cvar __step2_suffixes: Suffixes to be deleted in step 2 of the algorithm.</span>
<span class="sd">    :type __step2_suffixes: tuple</span>
<span class="sd">    :note: A detailed description of the Italian</span>
<span class="sd">           stemming algorithm can be found under</span>
<span class="sd">           http://snowball.tartarus.org/algorithms/italian/stemmer.html</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__vowels</span> <span class="o">=</span> <span class="s2">&quot;aeiou</span><span class="se">\xE0\xE8\xEC\xF2\xF9</span><span class="s2">&quot;</span>
    <span class="n">__step0_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;gliela&#39;</span><span class="p">,</span> <span class="s1">&#39;gliele&#39;</span><span class="p">,</span> <span class="s1">&#39;glieli&#39;</span><span class="p">,</span> <span class="s1">&#39;glielo&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;gliene&#39;</span><span class="p">,</span> <span class="s1">&#39;sene&#39;</span><span class="p">,</span> <span class="s1">&#39;mela&#39;</span><span class="p">,</span> <span class="s1">&#39;mele&#39;</span><span class="p">,</span> <span class="s1">&#39;meli&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;melo&#39;</span><span class="p">,</span> <span class="s1">&#39;mene&#39;</span><span class="p">,</span> <span class="s1">&#39;tela&#39;</span><span class="p">,</span> <span class="s1">&#39;tele&#39;</span><span class="p">,</span> <span class="s1">&#39;teli&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;telo&#39;</span><span class="p">,</span> <span class="s1">&#39;tene&#39;</span><span class="p">,</span> <span class="s1">&#39;cela&#39;</span><span class="p">,</span> <span class="s1">&#39;cele&#39;</span><span class="p">,</span> <span class="s1">&#39;celi&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;celo&#39;</span><span class="p">,</span> <span class="s1">&#39;cene&#39;</span><span class="p">,</span> <span class="s1">&#39;vela&#39;</span><span class="p">,</span> <span class="s1">&#39;vele&#39;</span><span class="p">,</span> <span class="s1">&#39;veli&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;velo&#39;</span><span class="p">,</span> <span class="s1">&#39;vene&#39;</span><span class="p">,</span> <span class="s1">&#39;gli&#39;</span><span class="p">,</span> <span class="s1">&#39;ci&#39;</span><span class="p">,</span> <span class="s1">&#39;la&#39;</span><span class="p">,</span> <span class="s1">&#39;le&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;li&#39;</span><span class="p">,</span> <span class="s1">&#39;lo&#39;</span><span class="p">,</span> <span class="s1">&#39;mi&#39;</span><span class="p">,</span> <span class="s1">&#39;ne&#39;</span><span class="p">,</span> <span class="s1">&#39;si&#39;</span><span class="p">,</span> <span class="s1">&#39;ti&#39;</span><span class="p">,</span> <span class="s1">&#39;vi&#39;</span><span class="p">)</span>
    <span class="n">__step1_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;atrice&#39;</span><span class="p">,</span> <span class="s1">&#39;atrici&#39;</span><span class="p">,</span> <span class="s1">&#39;azione&#39;</span><span class="p">,</span> <span class="s1">&#39;azioni&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;uzione&#39;</span><span class="p">,</span> <span class="s1">&#39;uzioni&#39;</span><span class="p">,</span> <span class="s1">&#39;usione&#39;</span><span class="p">,</span> <span class="s1">&#39;usioni&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;amento&#39;</span><span class="p">,</span> <span class="s1">&#39;amenti&#39;</span><span class="p">,</span> <span class="s1">&#39;imento&#39;</span><span class="p">,</span> <span class="s1">&#39;imenti&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;amente&#39;</span><span class="p">,</span> <span class="s1">&#39;abile&#39;</span><span class="p">,</span> <span class="s1">&#39;abili&#39;</span><span class="p">,</span> <span class="s1">&#39;ibile&#39;</span><span class="p">,</span> <span class="s1">&#39;ibili&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;mente&#39;</span><span class="p">,</span> <span class="s1">&#39;atore&#39;</span><span class="p">,</span> <span class="s1">&#39;atori&#39;</span><span class="p">,</span> <span class="s1">&#39;logia&#39;</span><span class="p">,</span> <span class="s1">&#39;logie&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;anza&#39;</span><span class="p">,</span> <span class="s1">&#39;anze&#39;</span><span class="p">,</span> <span class="s1">&#39;iche&#39;</span><span class="p">,</span> <span class="s1">&#39;ichi&#39;</span><span class="p">,</span> <span class="s1">&#39;ismo&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ismi&#39;</span><span class="p">,</span> <span class="s1">&#39;ista&#39;</span><span class="p">,</span> <span class="s1">&#39;iste&#39;</span><span class="p">,</span> <span class="s1">&#39;isti&#39;</span><span class="p">,</span> <span class="s1">&#39;ist</span><span class="se">\xE0</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ist</span><span class="se">\xE8</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ist</span><span class="se">\xEC</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ante&#39;</span><span class="p">,</span> <span class="s1">&#39;anti&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;enza&#39;</span><span class="p">,</span> <span class="s1">&#39;enze&#39;</span><span class="p">,</span> <span class="s1">&#39;ico&#39;</span><span class="p">,</span> <span class="s1">&#39;ici&#39;</span><span class="p">,</span> <span class="s1">&#39;ica&#39;</span><span class="p">,</span> <span class="s1">&#39;ice&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;oso&#39;</span><span class="p">,</span> <span class="s1">&#39;osi&#39;</span><span class="p">,</span> <span class="s1">&#39;osa&#39;</span><span class="p">,</span> <span class="s1">&#39;ose&#39;</span><span class="p">,</span> <span class="s1">&#39;it</span><span class="se">\xE0</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ivo&#39;</span><span class="p">,</span> <span class="s1">&#39;ivi&#39;</span><span class="p">,</span> <span class="s1">&#39;iva&#39;</span><span class="p">,</span> <span class="s1">&#39;ive&#39;</span><span class="p">)</span>
    <span class="n">__step2_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;erebbero&#39;</span><span class="p">,</span> <span class="s1">&#39;irebbero&#39;</span><span class="p">,</span> <span class="s1">&#39;assero&#39;</span><span class="p">,</span> <span class="s1">&#39;assimo&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;eranno&#39;</span><span class="p">,</span> <span class="s1">&#39;erebbe&#39;</span><span class="p">,</span> <span class="s1">&#39;eremmo&#39;</span><span class="p">,</span> <span class="s1">&#39;ereste&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;eresti&#39;</span><span class="p">,</span> <span class="s1">&#39;essero&#39;</span><span class="p">,</span> <span class="s1">&#39;iranno&#39;</span><span class="p">,</span> <span class="s1">&#39;irebbe&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;iremmo&#39;</span><span class="p">,</span> <span class="s1">&#39;ireste&#39;</span><span class="p">,</span> <span class="s1">&#39;iresti&#39;</span><span class="p">,</span> <span class="s1">&#39;iscano&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;iscono&#39;</span><span class="p">,</span> <span class="s1">&#39;issero&#39;</span><span class="p">,</span> <span class="s1">&#39;arono&#39;</span><span class="p">,</span> <span class="s1">&#39;avamo&#39;</span><span class="p">,</span> <span class="s1">&#39;avano&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;avate&#39;</span><span class="p">,</span> <span class="s1">&#39;eremo&#39;</span><span class="p">,</span> <span class="s1">&#39;erete&#39;</span><span class="p">,</span> <span class="s1">&#39;erono&#39;</span><span class="p">,</span> <span class="s1">&#39;evamo&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;evano&#39;</span><span class="p">,</span> <span class="s1">&#39;evate&#39;</span><span class="p">,</span> <span class="s1">&#39;iremo&#39;</span><span class="p">,</span> <span class="s1">&#39;irete&#39;</span><span class="p">,</span> <span class="s1">&#39;irono&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ivamo&#39;</span><span class="p">,</span> <span class="s1">&#39;ivano&#39;</span><span class="p">,</span> <span class="s1">&#39;ivate&#39;</span><span class="p">,</span> <span class="s1">&#39;ammo&#39;</span><span class="p">,</span> <span class="s1">&#39;ando&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;asse&#39;</span><span class="p">,</span> <span class="s1">&#39;assi&#39;</span><span class="p">,</span> <span class="s1">&#39;emmo&#39;</span><span class="p">,</span> <span class="s1">&#39;enda&#39;</span><span class="p">,</span> <span class="s1">&#39;ende&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;endi&#39;</span><span class="p">,</span> <span class="s1">&#39;endo&#39;</span><span class="p">,</span> <span class="s1">&#39;erai&#39;</span><span class="p">,</span> <span class="s1">&#39;erei&#39;</span><span class="p">,</span> <span class="s1">&#39;Yamo&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;iamo&#39;</span><span class="p">,</span> <span class="s1">&#39;immo&#39;</span><span class="p">,</span> <span class="s1">&#39;irai&#39;</span><span class="p">,</span> <span class="s1">&#39;irei&#39;</span><span class="p">,</span> <span class="s1">&#39;isca&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;isce&#39;</span><span class="p">,</span> <span class="s1">&#39;isci&#39;</span><span class="p">,</span> <span class="s1">&#39;isco&#39;</span><span class="p">,</span> <span class="s1">&#39;ano&#39;</span><span class="p">,</span> <span class="s1">&#39;are&#39;</span><span class="p">,</span> <span class="s1">&#39;ata&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ate&#39;</span><span class="p">,</span> <span class="s1">&#39;ati&#39;</span><span class="p">,</span> <span class="s1">&#39;ato&#39;</span><span class="p">,</span> <span class="s1">&#39;ava&#39;</span><span class="p">,</span> <span class="s1">&#39;avi&#39;</span><span class="p">,</span> <span class="s1">&#39;avo&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;er</span><span class="se">\xE0</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ere&#39;</span><span class="p">,</span> <span class="s1">&#39;er</span><span class="se">\xF2</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ete&#39;</span><span class="p">,</span> <span class="s1">&#39;eva&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;evi&#39;</span><span class="p">,</span> <span class="s1">&#39;evo&#39;</span><span class="p">,</span> <span class="s1">&#39;ir</span><span class="se">\xE0</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ire&#39;</span><span class="p">,</span> <span class="s1">&#39;ir</span><span class="se">\xF2</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ita&#39;</span><span class="p">,</span> <span class="s1">&#39;ite&#39;</span><span class="p">,</span> <span class="s1">&#39;iti&#39;</span><span class="p">,</span> <span class="s1">&#39;ito&#39;</span><span class="p">,</span> <span class="s1">&#39;iva&#39;</span><span class="p">,</span> <span class="s1">&#39;ivi&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ivo&#39;</span><span class="p">,</span> <span class="s1">&#39;ono&#39;</span><span class="p">,</span> <span class="s1">&#39;uta&#39;</span><span class="p">,</span> <span class="s1">&#39;ute&#39;</span><span class="p">,</span> <span class="s1">&#39;uti&#39;</span><span class="p">,</span> <span class="s1">&#39;uto&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ar&#39;</span><span class="p">,</span> <span class="s1">&#39;ir&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stem an Italian word and return the stemmed form.</span>

<span class="sd">        :param word: The word that is stemmed.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :return: The stemmed form.</span>
<span class="sd">        :rtype: unicode</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopwords</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">word</span>

        <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="c1"># All acute accents are replaced by grave accents.</span>
        <span class="n">word</span> <span class="o">=</span> <span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE0</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE8</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xED</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xEC</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xF3</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xF2</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xFA</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xF9</span><span class="s2">&quot;</span><span class="p">))</span>

        <span class="c1"># Every occurrence of &#39;u&#39; after &#39;q&#39;</span>
        <span class="c1"># is put into upper case.</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;q&quot;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;u&quot;</span><span class="p">:</span>
                <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="p">],</span> <span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]))</span>

        <span class="c1"># Every occurrence of &#39;u&#39; and &#39;i&#39;</span>
        <span class="c1"># between vowels is put into upper case.</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;u&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="p">],</span> <span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]))</span>

                <span class="k">elif</span> <span class="n">word</span> <span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;i&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="p">],</span> <span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]))</span>

        <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r1r2_standard</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rv_standard</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>

        <span class="c1"># STEP 0: Attached pronoun</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step0_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">rv</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">4</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ando&quot;</span><span class="p">,</span> <span class="s2">&quot;endo&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>

                <span class="k">elif</span> <span class="p">(</span><span class="n">rv</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">2</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span> <span class="ow">in</span>
                      <span class="p">(</span><span class="s2">&quot;ar&quot;</span><span class="p">,</span> <span class="s2">&quot;er&quot;</span><span class="p">,</span> <span class="s2">&quot;ir&quot;</span><span class="p">)):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r2</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                <span class="k">break</span>

        <span class="c1"># STEP 1: Standard suffix removal</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step1_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;amente&quot;</span> <span class="ow">and</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span>

                    <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;iv&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                        <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;at&quot;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;ic&quot;</span><span class="p">)):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">r2</span> <span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;abil&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>

                <span class="k">elif</span> <span class="p">(</span><span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;amento&quot;</span><span class="p">,</span> <span class="s2">&quot;amenti&quot;</span><span class="p">,</span>
                                 <span class="s2">&quot;imento&quot;</span><span class="p">,</span> <span class="s2">&quot;imenti&quot;</span><span class="p">)</span> <span class="ow">and</span>
                      <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">)):</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;azione&quot;</span><span class="p">,</span> <span class="s2">&quot;azioni&quot;</span><span class="p">,</span> <span class="s2">&quot;atore&quot;</span><span class="p">,</span> <span class="s2">&quot;atori&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>

                        <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;ic&quot;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;logia&quot;</span><span class="p">,</span> <span class="s2">&quot;logie&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;uzione&quot;</span><span class="p">,</span> <span class="s2">&quot;uzioni&quot;</span><span class="p">,</span>
                                    <span class="s2">&quot;usione&quot;</span><span class="p">,</span> <span class="s2">&quot;usioni&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;enza&quot;</span><span class="p">,</span> <span class="s2">&quot;enze&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;te&quot;</span><span class="p">)</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;te&quot;</span><span class="p">)</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;it</span><span class="se">\xE0</span><span class="s2">&quot;</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>

                        <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;ic&quot;</span><span class="p">,</span> <span class="s2">&quot;iv&quot;</span><span class="p">)):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                        <span class="k">elif</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;abil&quot;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ivo&quot;</span><span class="p">,</span> <span class="s2">&quot;ivi&quot;</span><span class="p">,</span> <span class="s2">&quot;iva&quot;</span><span class="p">,</span> <span class="s2">&quot;ive&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>

                        <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;at&quot;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                            <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;ic&quot;</span><span class="p">):</span>
                                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                                <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 2: Verb suffixes</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">step1_success</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step2_suffixes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="k">break</span>

        <span class="c1"># STEP 3a</span>
        <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE0</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE8</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;</span><span class="se">\xEC</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xF2</span><span class="s2">&quot;</span><span class="p">)):</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># STEP 3b</span>
        <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;ch&quot;</span><span class="p">,</span> <span class="s2">&quot;gh&quot;</span><span class="p">)):</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">)</span>


        <span class="k">return</span> <span class="n">word</span>



<span class="k">class</span> <span class="nc">NorwegianStemmer</span><span class="p">(</span><span class="n">_ScandinavianStemmer</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Norwegian Snowball stemmer.</span>

<span class="sd">    :cvar __vowels: The Norwegian vowels.</span>
<span class="sd">    :type __vowels: unicode</span>
<span class="sd">    :cvar __s_ending: Letters that may directly appear before a word final &#39;s&#39;.</span>
<span class="sd">    :type __s_ending: unicode</span>
<span class="sd">    :cvar __step1_suffixes: Suffixes to be deleted in step 1 of the algorithm.</span>
<span class="sd">    :type __step1_suffixes: tuple</span>
<span class="sd">    :cvar __step2_suffixes: Suffixes to be deleted in step 2 of the algorithm.</span>
<span class="sd">    :type __step2_suffixes: tuple</span>
<span class="sd">    :cvar __step3_suffixes: Suffixes to be deleted in step 3 of the algorithm.</span>
<span class="sd">    :type __step3_suffixes: tuple</span>
<span class="sd">    :note: A detailed description of the Norwegian</span>
<span class="sd">           stemming algorithm can be found under</span>
<span class="sd">           http://snowball.tartarus.org/algorithms/norwegian/stemmer.html</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__vowels</span> <span class="o">=</span> <span class="s2">&quot;aeiouy</span><span class="se">\xE6\xE5\xF8</span><span class="s2">&quot;</span>
    <span class="n">__s_ending</span> <span class="o">=</span> <span class="s2">&quot;bcdfghjlmnoprtvyz&quot;</span>
    <span class="n">__step1_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;hetenes&quot;</span><span class="p">,</span> <span class="s2">&quot;hetene&quot;</span><span class="p">,</span> <span class="s2">&quot;hetens&quot;</span><span class="p">,</span> <span class="s2">&quot;heter&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;heten&quot;</span><span class="p">,</span> <span class="s2">&quot;endes&quot;</span><span class="p">,</span> <span class="s2">&quot;ande&quot;</span><span class="p">,</span> <span class="s2">&quot;ende&quot;</span><span class="p">,</span> <span class="s2">&quot;edes&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;enes&quot;</span><span class="p">,</span> <span class="s2">&quot;erte&quot;</span><span class="p">,</span> <span class="s2">&quot;ede&quot;</span><span class="p">,</span> <span class="s2">&quot;ane&quot;</span><span class="p">,</span> <span class="s2">&quot;ene&quot;</span><span class="p">,</span> <span class="s2">&quot;ens&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;ers&quot;</span><span class="p">,</span> <span class="s2">&quot;ets&quot;</span><span class="p">,</span> <span class="s2">&quot;het&quot;</span><span class="p">,</span> <span class="s2">&quot;ast&quot;</span><span class="p">,</span> <span class="s2">&quot;ert&quot;</span><span class="p">,</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;ar&quot;</span><span class="p">,</span> <span class="s2">&quot;er&quot;</span><span class="p">,</span> <span class="s2">&quot;as&quot;</span><span class="p">,</span> <span class="s2">&quot;es&quot;</span><span class="p">,</span> <span class="s2">&quot;et&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">)</span>

    <span class="n">__step2_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;dt&quot;</span><span class="p">,</span> <span class="s2">&quot;vt&quot;</span><span class="p">)</span>

    <span class="n">__step3_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;hetslov&quot;</span><span class="p">,</span> <span class="s2">&quot;eleg&quot;</span><span class="p">,</span> <span class="s2">&quot;elig&quot;</span><span class="p">,</span> <span class="s2">&quot;elov&quot;</span><span class="p">,</span> <span class="s2">&quot;slov&quot;</span><span class="p">,</span>
                          <span class="s2">&quot;leg&quot;</span><span class="p">,</span> <span class="s2">&quot;eig&quot;</span><span class="p">,</span> <span class="s2">&quot;lig&quot;</span><span class="p">,</span> <span class="s2">&quot;els&quot;</span><span class="p">,</span> <span class="s2">&quot;lov&quot;</span><span class="p">,</span> <span class="s2">&quot;ig&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stem a Norwegian word and return the stemmed form.</span>

<span class="sd">        :param word: The word that is stemmed.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :return: The stemmed form.</span>
<span class="sd">        :rtype: unicode</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopwords</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">word</span>

        <span class="n">r1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r1_scandinavian</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>

        <span class="c1"># STEP 1</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step1_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;erte&quot;</span><span class="p">,</span> <span class="s2">&quot;ert&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;er&quot;</span><span class="p">)</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;er&quot;</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;s&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__s_ending</span> <span class="ow">or</span>
                        <span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;k&quot;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 2</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step2_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 3</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step3_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>


        <span class="k">return</span> <span class="n">word</span>



<span class="k">class</span> <span class="nc">PortugueseStemmer</span><span class="p">(</span><span class="n">_StandardStemmer</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Portuguese Snowball stemmer.</span>

<span class="sd">    :cvar __vowels: The Portuguese vowels.</span>
<span class="sd">    :type __vowels: unicode</span>
<span class="sd">    :cvar __step1_suffixes: Suffixes to be deleted in step 1 of the algorithm.</span>
<span class="sd">    :type __step1_suffixes: tuple</span>
<span class="sd">    :cvar __step2_suffixes: Suffixes to be deleted in step 2 of the algorithm.</span>
<span class="sd">    :type __step2_suffixes: tuple</span>
<span class="sd">    :cvar __step4_suffixes: Suffixes to be deleted in step 4 of the algorithm.</span>
<span class="sd">    :type __step4_suffixes: tuple</span>
<span class="sd">    :note: A detailed description of the Portuguese</span>
<span class="sd">           stemming algorithm can be found under</span>
<span class="sd">           http://snowball.tartarus.org/algorithms/portuguese/stemmer.html</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__vowels</span> <span class="o">=</span> <span class="s2">&quot;aeiou</span><span class="se">\xE1\xE9\xED\xF3\xFA\xE2\xEA\xF4</span><span class="s2">&quot;</span>
    <span class="n">__step1_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;amentos&#39;</span><span class="p">,</span> <span class="s1">&#39;imentos&#39;</span><span class="p">,</span> <span class="s1">&#39;uço~es&#39;</span><span class="p">,</span> <span class="s1">&#39;amento&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;imento&#39;</span><span class="p">,</span> <span class="s1">&#39;adoras&#39;</span><span class="p">,</span> <span class="s1">&#39;adores&#39;</span><span class="p">,</span> <span class="s1">&#39;a</span><span class="se">\xE7</span><span class="s1">o~es&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;logias&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xEA</span><span class="s1">ncias&#39;</span><span class="p">,</span> <span class="s1">&#39;amente&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;idades&#39;</span><span class="p">,</span> <span class="s1">&#39;an</span><span class="se">\xE7</span><span class="s1">as&#39;</span><span class="p">,</span> <span class="s1">&#39;ismos&#39;</span><span class="p">,</span> <span class="s1">&#39;istas&#39;</span><span class="p">,</span> <span class="s1">&#39;adora&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;a</span><span class="se">\xE7</span><span class="s1">a~o&#39;</span><span class="p">,</span> <span class="s1">&#39;antes&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">ncia&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;logia&#39;</span><span class="p">,</span> <span class="s1">&#39;uça~o&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xEA</span><span class="s1">ncia&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;mente&#39;</span><span class="p">,</span> <span class="s1">&#39;idade&#39;</span><span class="p">,</span> <span class="s1">&#39;an</span><span class="se">\xE7</span><span class="s1">a&#39;</span><span class="p">,</span> <span class="s1">&#39;ezas&#39;</span><span class="p">,</span> <span class="s1">&#39;icos&#39;</span><span class="p">,</span> <span class="s1">&#39;icas&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ismo&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">vel&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xED</span><span class="s1">vel&#39;</span><span class="p">,</span> <span class="s1">&#39;ista&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;osos&#39;</span><span class="p">,</span> <span class="s1">&#39;osas&#39;</span><span class="p">,</span> <span class="s1">&#39;ador&#39;</span><span class="p">,</span> <span class="s1">&#39;ante&#39;</span><span class="p">,</span> <span class="s1">&#39;ivas&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ivos&#39;</span><span class="p">,</span> <span class="s1">&#39;iras&#39;</span><span class="p">,</span> <span class="s1">&#39;eza&#39;</span><span class="p">,</span> <span class="s1">&#39;ico&#39;</span><span class="p">,</span> <span class="s1">&#39;ica&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;oso&#39;</span><span class="p">,</span> <span class="s1">&#39;osa&#39;</span><span class="p">,</span> <span class="s1">&#39;iva&#39;</span><span class="p">,</span> <span class="s1">&#39;ivo&#39;</span><span class="p">,</span> <span class="s1">&#39;ira&#39;</span><span class="p">)</span>
    <span class="n">__step2_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;ar</span><span class="se">\xED</span><span class="s1">amos&#39;</span><span class="p">,</span> <span class="s1">&#39;er</span><span class="se">\xED</span><span class="s1">amos&#39;</span><span class="p">,</span> <span class="s1">&#39;ir</span><span class="se">\xED</span><span class="s1">amos&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">ssemos&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xEA</span><span class="s1">ssemos&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xED</span><span class="s1">ssemos&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ar</span><span class="se">\xED</span><span class="s1">eis&#39;</span><span class="p">,</span> <span class="s1">&#39;er</span><span class="se">\xED</span><span class="s1">eis&#39;</span><span class="p">,</span> <span class="s1">&#39;ir</span><span class="se">\xED</span><span class="s1">eis&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">sseis&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">sseis&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xED</span><span class="s1">sseis&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">ramos&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">ramos&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xED</span><span class="s1">ramos&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">vamos&#39;</span><span class="p">,</span> <span class="s1">&#39;aremos&#39;</span><span class="p">,</span> <span class="s1">&#39;eremos&#39;</span><span class="p">,</span> <span class="s1">&#39;iremos&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ariam&#39;</span><span class="p">,</span> <span class="s1">&#39;eriam&#39;</span><span class="p">,</span> <span class="s1">&#39;iriam&#39;</span><span class="p">,</span> <span class="s1">&#39;assem&#39;</span><span class="p">,</span> <span class="s1">&#39;essem&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;issem&#39;</span><span class="p">,</span> <span class="s1">&#39;ara~o&#39;</span><span class="p">,</span> <span class="s1">&#39;era~o&#39;</span><span class="p">,</span> <span class="s1">&#39;ira~o&#39;</span><span class="p">,</span> <span class="s1">&#39;arias&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;erias&#39;</span><span class="p">,</span> <span class="s1">&#39;irias&#39;</span><span class="p">,</span> <span class="s1">&#39;ardes&#39;</span><span class="p">,</span> <span class="s1">&#39;erdes&#39;</span><span class="p">,</span> <span class="s1">&#39;irdes&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;asses&#39;</span><span class="p">,</span> <span class="s1">&#39;esses&#39;</span><span class="p">,</span> <span class="s1">&#39;isses&#39;</span><span class="p">,</span> <span class="s1">&#39;astes&#39;</span><span class="p">,</span> <span class="s1">&#39;estes&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;istes&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">reis&#39;</span><span class="p">,</span> <span class="s1">&#39;areis&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">reis&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ereis&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xED</span><span class="s1">reis&#39;</span><span class="p">,</span> <span class="s1">&#39;ireis&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">veis&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xED</span><span class="s1">amos&#39;</span><span class="p">,</span> <span class="s1">&#39;armos&#39;</span><span class="p">,</span> <span class="s1">&#39;ermos&#39;</span><span class="p">,</span> <span class="s1">&#39;irmos&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;aria&#39;</span><span class="p">,</span> <span class="s1">&#39;eria&#39;</span><span class="p">,</span> <span class="s1">&#39;iria&#39;</span><span class="p">,</span> <span class="s1">&#39;asse&#39;</span><span class="p">,</span> <span class="s1">&#39;esse&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;isse&#39;</span><span class="p">,</span> <span class="s1">&#39;aste&#39;</span><span class="p">,</span> <span class="s1">&#39;este&#39;</span><span class="p">,</span> <span class="s1">&#39;iste&#39;</span><span class="p">,</span> <span class="s1">&#39;arei&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;erei&#39;</span><span class="p">,</span> <span class="s1">&#39;irei&#39;</span><span class="p">,</span> <span class="s1">&#39;aram&#39;</span><span class="p">,</span> <span class="s1">&#39;eram&#39;</span><span class="p">,</span> <span class="s1">&#39;iram&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;avam&#39;</span><span class="p">,</span> <span class="s1">&#39;arem&#39;</span><span class="p">,</span> <span class="s1">&#39;erem&#39;</span><span class="p">,</span> <span class="s1">&#39;irem&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ando&#39;</span><span class="p">,</span> <span class="s1">&#39;endo&#39;</span><span class="p">,</span> <span class="s1">&#39;indo&#39;</span><span class="p">,</span> <span class="s1">&#39;adas&#39;</span><span class="p">,</span> <span class="s1">&#39;idas&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ar</span><span class="se">\xE1</span><span class="s1">s&#39;</span><span class="p">,</span> <span class="s1">&#39;aras&#39;</span><span class="p">,</span> <span class="s1">&#39;er</span><span class="se">\xE1</span><span class="s1">s&#39;</span><span class="p">,</span> <span class="s1">&#39;eras&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ir</span><span class="se">\xE1</span><span class="s1">s&#39;</span><span class="p">,</span> <span class="s1">&#39;avas&#39;</span><span class="p">,</span> <span class="s1">&#39;ares&#39;</span><span class="p">,</span> <span class="s1">&#39;eres&#39;</span><span class="p">,</span> <span class="s1">&#39;ires&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xED</span><span class="s1">eis&#39;</span><span class="p">,</span> <span class="s1">&#39;ados&#39;</span><span class="p">,</span> <span class="s1">&#39;idos&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">mos&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;amos&#39;</span><span class="p">,</span> <span class="s1">&#39;emos&#39;</span><span class="p">,</span> <span class="s1">&#39;imos&#39;</span><span class="p">,</span> <span class="s1">&#39;iras&#39;</span><span class="p">,</span> <span class="s1">&#39;ada&#39;</span><span class="p">,</span> <span class="s1">&#39;ida&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ar</span><span class="se">\xE1</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ara&#39;</span><span class="p">,</span> <span class="s1">&#39;er</span><span class="se">\xE1</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;era&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ir</span><span class="se">\xE1</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ava&#39;</span><span class="p">,</span> <span class="s1">&#39;iam&#39;</span><span class="p">,</span> <span class="s1">&#39;ado&#39;</span><span class="p">,</span> <span class="s1">&#39;ido&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ias&#39;</span><span class="p">,</span> <span class="s1">&#39;ais&#39;</span><span class="p">,</span> <span class="s1">&#39;eis&#39;</span><span class="p">,</span> <span class="s1">&#39;ira&#39;</span><span class="p">,</span> <span class="s1">&#39;ia&#39;</span><span class="p">,</span> <span class="s1">&#39;ei&#39;</span><span class="p">,</span> <span class="s1">&#39;am&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;em&#39;</span><span class="p">,</span> <span class="s1">&#39;ar&#39;</span><span class="p">,</span> <span class="s1">&#39;er&#39;</span><span class="p">,</span> <span class="s1">&#39;ir&#39;</span><span class="p">,</span> <span class="s1">&#39;as&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;es&#39;</span><span class="p">,</span> <span class="s1">&#39;is&#39;</span><span class="p">,</span> <span class="s1">&#39;eu&#39;</span><span class="p">,</span> <span class="s1">&#39;iu&#39;</span><span class="p">,</span> <span class="s1">&#39;ou&#39;</span><span class="p">)</span>
    <span class="n">__step4_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;</span><span class="se">\xED</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xF3</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stem a Portuguese word and return the stemmed form.</span>

<span class="sd">        :param word: The word that is stemmed.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :return: The stemmed form.</span>
<span class="sd">        :rtype: unicode</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopwords</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">word</span>

        <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">step2_success</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="n">word</span> <span class="o">=</span> <span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE3</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;a~&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xF5</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;o~&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;q</span><span class="se">\xFC</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;qu&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;g</span><span class="se">\xFC</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;gu&quot;</span><span class="p">))</span>

        <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r1r2_standard</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rv_standard</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>

        <span class="c1"># STEP 1: Standard suffix removal</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step1_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;amente&quot;</span> <span class="ow">and</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>

                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span>

                    <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;iv&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                        <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;at&quot;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;ic&quot;</span><span class="p">,</span> <span class="s2">&quot;ad&quot;</span><span class="p">)):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                <span class="k">elif</span> <span class="p">(</span><span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ira&quot;</span><span class="p">,</span> <span class="s2">&quot;iras&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span> <span class="ow">and</span>
                      <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span> <span class="o">==</span> <span class="s2">&quot;e&quot;</span><span class="p">):</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>

                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ir&quot;</span><span class="p">)</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ir&quot;</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>

                    <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;logia&quot;</span><span class="p">,</span> <span class="s2">&quot;logias&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;log&quot;</span><span class="p">)</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;log&quot;</span><span class="p">)</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;uça~o&quot;</span><span class="p">,</span> <span class="s2">&quot;uço~es&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">)</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">)</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;</span><span class="se">\xEA</span><span class="s2">ncia&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xEA</span><span class="s2">ncias&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ente&quot;</span><span class="p">)</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ente&quot;</span><span class="p">)</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;mente&quot;</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>

                        <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;ante&quot;</span><span class="p">,</span> <span class="s2">&quot;avel&quot;</span><span class="p">,</span> <span class="s2">&quot;ivel&quot;</span><span class="p">)):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;idade&quot;</span><span class="p">,</span> <span class="s2">&quot;idades&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>

                        <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;ic&quot;</span><span class="p">,</span> <span class="s2">&quot;iv&quot;</span><span class="p">)):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                        <span class="k">elif</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;abil&quot;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;iva&quot;</span><span class="p">,</span> <span class="s2">&quot;ivo&quot;</span><span class="p">,</span> <span class="s2">&quot;ivas&quot;</span><span class="p">,</span> <span class="s2">&quot;ivos&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>

                        <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;at&quot;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 2: Verb suffixes</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">step1_success</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step2_suffixes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="n">step2_success</span> <span class="o">=</span> <span class="bp">True</span>

                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="k">break</span>

        <span class="c1"># STEP 3</span>
        <span class="k">if</span> <span class="n">step1_success</span> <span class="ow">or</span> <span class="n">step2_success</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;c&quot;</span><span class="p">:</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1">### STEP 4: Residual suffix</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">step1_success</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">step2_success</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step4_suffixes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="k">break</span>

        <span class="c1"># STEP 5</span>
        <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xEA</span><span class="s2">&quot;</span><span class="p">)):</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

            <span class="k">if</span> <span class="p">((</span><span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;gu&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;u&quot;</span><span class="p">))</span> <span class="ow">or</span>
                <span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;ci&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">))):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">elif</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE7</span><span class="s2">&quot;</span><span class="p">):</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE7</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;c&quot;</span><span class="p">)</span>

        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;a~&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE3</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;o~&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xF5</span><span class="s2">&quot;</span><span class="p">)</span>


        <span class="k">return</span> <span class="n">word</span>



<span class="k">class</span> <span class="nc">RomanianStemmer</span><span class="p">(</span><span class="n">_StandardStemmer</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Romanian Snowball stemmer.</span>

<span class="sd">    :cvar __vowels: The Romanian vowels.</span>
<span class="sd">    :type __vowels: unicode</span>
<span class="sd">    :cvar __step0_suffixes: Suffixes to be deleted in step 0 of the algorithm.</span>
<span class="sd">    :type __step0_suffixes: tuple</span>
<span class="sd">    :cvar __step1_suffixes: Suffixes to be deleted in step 1 of the algorithm.</span>
<span class="sd">    :type __step1_suffixes: tuple</span>
<span class="sd">    :cvar __step2_suffixes: Suffixes to be deleted in step 2 of the algorithm.</span>
<span class="sd">    :type __step2_suffixes: tuple</span>
<span class="sd">    :cvar __step3_suffixes: Suffixes to be deleted in step 3 of the algorithm.</span>
<span class="sd">    :type __step3_suffixes: tuple</span>
<span class="sd">    :note: A detailed description of the Romanian</span>
<span class="sd">           stemming algorithm can be found under</span>
<span class="sd">           http://snowball.tartarus.org/algorithms/romanian/stemmer.html</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__vowels</span> <span class="o">=</span> <span class="s2">&quot;aeiou</span><span class="se">\u0103\xE2\xEE</span><span class="s2">&quot;</span>
    <span class="n">__step0_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;iilor&#39;</span><span class="p">,</span> <span class="s1">&#39;ului&#39;</span><span class="p">,</span> <span class="s1">&#39;elor&#39;</span><span class="p">,</span> <span class="s1">&#39;iile&#39;</span><span class="p">,</span> <span class="s1">&#39;ilor&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;atei&#39;</span><span class="p">,</span> <span class="s1">&#39;a</span><span class="se">\u0163</span><span class="s1">ie&#39;</span><span class="p">,</span> <span class="s1">&#39;a</span><span class="se">\u0163</span><span class="s1">ia&#39;</span><span class="p">,</span> <span class="s1">&#39;aua&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ele&#39;</span><span class="p">,</span> <span class="s1">&#39;iua&#39;</span><span class="p">,</span> <span class="s1">&#39;iei&#39;</span><span class="p">,</span> <span class="s1">&#39;ile&#39;</span><span class="p">,</span> <span class="s1">&#39;ul&#39;</span><span class="p">,</span> <span class="s1">&#39;ea&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ii&#39;</span><span class="p">)</span>
    <span class="n">__step1_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;abilitate&#39;</span><span class="p">,</span> <span class="s1">&#39;abilitati&#39;</span><span class="p">,</span> <span class="s1">&#39;abilit</span><span class="se">\u0103\u0163</span><span class="s1">i&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ibilitate&#39;</span><span class="p">,</span> <span class="s1">&#39;abilit</span><span class="se">\u0103</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;ivitate&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ivitati&#39;</span><span class="p">,</span> <span class="s1">&#39;ivit</span><span class="se">\u0103\u0163</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;icitate&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;icitati&#39;</span><span class="p">,</span> <span class="s1">&#39;icit</span><span class="se">\u0103\u0163</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;icatori&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ivit</span><span class="se">\u0103</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;icit</span><span class="se">\u0103</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;icator&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;a</span><span class="se">\u0163</span><span class="s1">iune&#39;</span><span class="p">,</span> <span class="s1">&#39;atoare&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\u0103</span><span class="s1">toare&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;i</span><span class="se">\u0163</span><span class="s1">iune&#39;</span><span class="p">,</span> <span class="s1">&#39;itoare&#39;</span><span class="p">,</span> <span class="s1">&#39;iciva&#39;</span><span class="p">,</span> <span class="s1">&#39;icive&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;icivi&#39;</span><span class="p">,</span> <span class="s1">&#39;iciv</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;icala&#39;</span><span class="p">,</span> <span class="s1">&#39;icale&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;icali&#39;</span><span class="p">,</span> <span class="s1">&#39;ical</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ativa&#39;</span><span class="p">,</span> <span class="s1">&#39;ative&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ativi&#39;</span><span class="p">,</span> <span class="s1">&#39;ativ</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;atori&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\u0103</span><span class="s1">tori&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;itiva&#39;</span><span class="p">,</span> <span class="s1">&#39;itive&#39;</span><span class="p">,</span> <span class="s1">&#39;itivi&#39;</span><span class="p">,</span> <span class="s1">&#39;itiv</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;itori&#39;</span><span class="p">,</span> <span class="s1">&#39;iciv&#39;</span><span class="p">,</span> <span class="s1">&#39;ical&#39;</span><span class="p">,</span> <span class="s1">&#39;ativ&#39;</span><span class="p">,</span> <span class="s1">&#39;ator&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\u0103</span><span class="s1">tor&#39;</span><span class="p">,</span> <span class="s1">&#39;itiv&#39;</span><span class="p">,</span> <span class="s1">&#39;itor&#39;</span><span class="p">)</span>
    <span class="n">__step2_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;abila&#39;</span><span class="p">,</span> <span class="s1">&#39;abile&#39;</span><span class="p">,</span> <span class="s1">&#39;abili&#39;</span><span class="p">,</span> <span class="s1">&#39;abil</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ibila&#39;</span><span class="p">,</span> <span class="s1">&#39;ibile&#39;</span><span class="p">,</span> <span class="s1">&#39;ibili&#39;</span><span class="p">,</span> <span class="s1">&#39;ibil</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;atori&#39;</span><span class="p">,</span> <span class="s1">&#39;itate&#39;</span><span class="p">,</span> <span class="s1">&#39;itati&#39;</span><span class="p">,</span> <span class="s1">&#39;it</span><span class="se">\u0103\u0163</span><span class="s1">i&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;abil&#39;</span><span class="p">,</span> <span class="s1">&#39;ibil&#39;</span><span class="p">,</span> <span class="s1">&#39;oasa&#39;</span><span class="p">,</span> <span class="s1">&#39;oas</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;oase&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;anta&#39;</span><span class="p">,</span> <span class="s1">&#39;ante&#39;</span><span class="p">,</span> <span class="s1">&#39;anti&#39;</span><span class="p">,</span> <span class="s1">&#39;ant</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ator&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;it</span><span class="se">\u0103</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;iune&#39;</span><span class="p">,</span> <span class="s1">&#39;iuni&#39;</span><span class="p">,</span> <span class="s1">&#39;isme&#39;</span><span class="p">,</span> <span class="s1">&#39;ista&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;iste&#39;</span><span class="p">,</span> <span class="s1">&#39;isti&#39;</span><span class="p">,</span> <span class="s1">&#39;ist</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;i</span><span class="se">\u015F</span><span class="s1">ti&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ata&#39;</span><span class="p">,</span> <span class="s1">&#39;at</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ati&#39;</span><span class="p">,</span> <span class="s1">&#39;ate&#39;</span><span class="p">,</span> <span class="s1">&#39;uta&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ut</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;uti&#39;</span><span class="p">,</span> <span class="s1">&#39;ute&#39;</span><span class="p">,</span> <span class="s1">&#39;ita&#39;</span><span class="p">,</span> <span class="s1">&#39;it</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;iti&#39;</span><span class="p">,</span> <span class="s1">&#39;ite&#39;</span><span class="p">,</span> <span class="s1">&#39;ica&#39;</span><span class="p">,</span> <span class="s1">&#39;ice&#39;</span><span class="p">,</span> <span class="s1">&#39;ici&#39;</span><span class="p">,</span> <span class="s1">&#39;ic</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;osi&#39;</span><span class="p">,</span> <span class="s1">&#39;o</span><span class="se">\u015F</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;ant&#39;</span><span class="p">,</span> <span class="s1">&#39;iva&#39;</span><span class="p">,</span> <span class="s1">&#39;ive&#39;</span><span class="p">,</span> <span class="s1">&#39;ivi&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;iv</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ism&#39;</span><span class="p">,</span> <span class="s1">&#39;ist&#39;</span><span class="p">,</span> <span class="s1">&#39;at&#39;</span><span class="p">,</span> <span class="s1">&#39;ut&#39;</span><span class="p">,</span> <span class="s1">&#39;it&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ic&#39;</span><span class="p">,</span> <span class="s1">&#39;os&#39;</span><span class="p">,</span> <span class="s1">&#39;iv&#39;</span><span class="p">)</span>
    <span class="n">__step3_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;seser</span><span class="se">\u0103\u0163</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;aser</span><span class="se">\u0103\u0163</span><span class="s1">i&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;iser</span><span class="se">\u0103\u0163</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">ser</span><span class="se">\u0103\u0163</span><span class="s1">i&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;user</span><span class="se">\u0103\u0163</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;seser</span><span class="se">\u0103</span><span class="s1">m&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;aser</span><span class="se">\u0103</span><span class="s1">m&#39;</span><span class="p">,</span> <span class="s1">&#39;iser</span><span class="se">\u0103</span><span class="s1">m&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">ser</span><span class="se">\u0103</span><span class="s1">m&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;user</span><span class="se">\u0103</span><span class="s1">m&#39;</span><span class="p">,</span> <span class="s1">&#39;ser</span><span class="se">\u0103\u0163</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;sese</span><span class="se">\u015F</span><span class="s1">i&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;seser</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;easc</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ar</span><span class="se">\u0103\u0163</span><span class="s1">i&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ur</span><span class="se">\u0103\u0163</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;ir</span><span class="se">\u0103\u0163</span><span class="s1">i&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">r</span><span class="se">\u0103\u0163</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;ase</span><span class="se">\u015F</span><span class="s1">i&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;aser</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ise</span><span class="se">\u015F</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;iser</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xe2</span><span class="s1">se</span><span class="se">\u015F</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">ser</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;use</span><span class="se">\u015F</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;user</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ser</span><span class="se">\u0103</span><span class="s1">m&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;sesem&#39;</span><span class="p">,</span> <span class="s1">&#39;indu&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">ndu&#39;</span><span class="p">,</span> <span class="s1">&#39;eaz</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;e</span><span class="se">\u015F</span><span class="s1">ti&#39;</span><span class="p">,</span> <span class="s1">&#39;e</span><span class="se">\u015F</span><span class="s1">te&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\u0103\u015F</span><span class="s1">ti&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\u0103\u015F</span><span class="s1">te&#39;</span><span class="p">,</span> <span class="s1">&#39;ea</span><span class="se">\u0163</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;ia</span><span class="se">\u0163</span><span class="s1">i&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ar</span><span class="se">\u0103</span><span class="s1">m&#39;</span><span class="p">,</span> <span class="s1">&#39;ur</span><span class="se">\u0103</span><span class="s1">m&#39;</span><span class="p">,</span> <span class="s1">&#39;ir</span><span class="se">\u0103</span><span class="s1">m&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">r</span><span class="se">\u0103</span><span class="s1">m&#39;</span><span class="p">,</span> <span class="s1">&#39;asem&#39;</span><span class="p">,</span> <span class="s1">&#39;isem&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">sem&#39;</span><span class="p">,</span> <span class="s1">&#39;usem&#39;</span><span class="p">,</span> <span class="s1">&#39;se</span><span class="se">\u015F</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;ser</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;sese&#39;</span><span class="p">,</span> <span class="s1">&#39;are&#39;</span><span class="p">,</span> <span class="s1">&#39;ere&#39;</span><span class="p">,</span> <span class="s1">&#39;ire&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">re&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ind&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">nd&#39;</span><span class="p">,</span> <span class="s1">&#39;eze&#39;</span><span class="p">,</span> <span class="s1">&#39;ezi&#39;</span><span class="p">,</span> <span class="s1">&#39;esc&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\u0103</span><span class="s1">sc&#39;</span><span class="p">,</span> <span class="s1">&#39;eam&#39;</span><span class="p">,</span> <span class="s1">&#39;eai&#39;</span><span class="p">,</span> <span class="s1">&#39;eau&#39;</span><span class="p">,</span> <span class="s1">&#39;iam&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;iai&#39;</span><span class="p">,</span> <span class="s1">&#39;iau&#39;</span><span class="p">,</span> <span class="s1">&#39;a</span><span class="se">\u015F</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;ar</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;u</span><span class="se">\u015F</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;ur</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;i</span><span class="se">\u015F</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;ir</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE2\u015F</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xe2</span><span class="s1">r</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ase&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ise&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">se&#39;</span><span class="p">,</span> <span class="s1">&#39;use&#39;</span><span class="p">,</span> <span class="s1">&#39;a</span><span class="se">\u0163</span><span class="s1">i&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;e</span><span class="se">\u0163</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;i</span><span class="se">\u0163</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xe2\u0163</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;sei&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ez&#39;</span><span class="p">,</span> <span class="s1">&#39;am&#39;</span><span class="p">,</span> <span class="s1">&#39;ai&#39;</span><span class="p">,</span> <span class="s1">&#39;au&#39;</span><span class="p">,</span> <span class="s1">&#39;ea&#39;</span><span class="p">,</span> <span class="s1">&#39;ia&#39;</span><span class="p">,</span> <span class="s1">&#39;ui&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\u0103</span><span class="s1">m&#39;</span><span class="p">,</span> <span class="s1">&#39;em&#39;</span><span class="p">,</span> <span class="s1">&#39;im&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">m&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;se&#39;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stem a Romanian word and return the stemmed form.</span>

<span class="sd">        :param word: The word that is stemmed.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :return: The stemmed form.</span>
<span class="sd">        :rtype: unicode</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopwords</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">word</span>

        <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">step2_success</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;u&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="p">],</span> <span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]))</span>

                <span class="k">elif</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;i&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="n">i</span><span class="p">],</span> <span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]))</span>

        <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r1r2_standard</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rv_standard</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>

        <span class="c1"># STEP 0: Removal of plurals and other simplifications</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step0_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ul&quot;</span><span class="p">,</span> <span class="s2">&quot;ului&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>

                        <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">rv</span><span class="p">:</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                    <span class="k">elif</span> <span class="p">(</span><span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;aua&quot;</span> <span class="ow">or</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;atei&quot;</span> <span class="ow">or</span>
                          <span class="p">(</span><span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;ile&quot;</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">!=</span> <span class="s2">&quot;ab&quot;</span><span class="p">)):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ea&quot;</span><span class="p">,</span> <span class="s2">&quot;ele&quot;</span><span class="p">,</span> <span class="s2">&quot;elor&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>

                        <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">rv</span><span class="p">:</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ii&quot;</span><span class="p">,</span> <span class="s2">&quot;iua&quot;</span><span class="p">,</span> <span class="s2">&quot;iei&quot;</span><span class="p">,</span>
                                    <span class="s2">&quot;iile&quot;</span><span class="p">,</span> <span class="s2">&quot;iilor&quot;</span><span class="p">,</span> <span class="s2">&quot;ilor&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">)</span>

                        <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">rv</span><span class="p">:</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">)</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;a</span><span class="se">\u0163</span><span class="s2">ie&quot;</span><span class="p">,</span> <span class="s2">&quot;a</span><span class="se">\u0163</span><span class="s2">ia&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 1: Reduction of combining suffixes</span>
        <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>

            <span class="n">replacement_done</span> <span class="o">=</span> <span class="bp">False</span>

            <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step1_suffixes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r1</span><span class="p">:</span>
                        <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>
                        <span class="n">replacement_done</span> <span class="o">=</span> <span class="bp">True</span>

                        <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;abilitate&quot;</span><span class="p">,</span> <span class="s2">&quot;abilitati&quot;</span><span class="p">,</span>
                                      <span class="s2">&quot;abilit</span><span class="se">\u0103</span><span class="s2">i&quot;</span><span class="p">,</span>
                                      <span class="s2">&quot;abilit</span><span class="se">\u0103\u0163</span><span class="s2">i&quot;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;abil&quot;</span><span class="p">)</span>

                        <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;ibilitate&quot;</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span>

                        <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ivitate&quot;</span><span class="p">,</span> <span class="s2">&quot;ivitati&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;ivit</span><span class="se">\u0103</span><span class="s2">i&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;ivit</span><span class="se">\u0103\u0163</span><span class="s2">i&quot;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;iv&quot;</span><span class="p">)</span>

                        <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;icitate&quot;</span><span class="p">,</span> <span class="s2">&quot;icitati&quot;</span><span class="p">,</span> <span class="s2">&quot;icit</span><span class="se">\u0103</span><span class="s2">i&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;icit</span><span class="se">\u0103\u0163</span><span class="s2">i&quot;</span><span class="p">,</span> <span class="s2">&quot;icator&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;icatori&quot;</span><span class="p">,</span> <span class="s2">&quot;iciv&quot;</span><span class="p">,</span> <span class="s2">&quot;iciva&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;icive&quot;</span><span class="p">,</span> <span class="s2">&quot;icivi&quot;</span><span class="p">,</span> <span class="s2">&quot;iciv</span><span class="se">\u0103</span><span class="s2">&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;ical&quot;</span><span class="p">,</span> <span class="s2">&quot;icala&quot;</span><span class="p">,</span> <span class="s2">&quot;icale&quot;</span><span class="p">,</span> <span class="s2">&quot;icali&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;ical</span><span class="se">\u0103</span><span class="s2">&quot;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ic&quot;</span><span class="p">)</span>

                        <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ativ&quot;</span><span class="p">,</span> <span class="s2">&quot;ativa&quot;</span><span class="p">,</span> <span class="s2">&quot;ative&quot;</span><span class="p">,</span> <span class="s2">&quot;ativi&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;ativ</span><span class="se">\u0103</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;a</span><span class="se">\u0163</span><span class="s2">iune&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;atoare&quot;</span><span class="p">,</span> <span class="s2">&quot;ator&quot;</span><span class="p">,</span> <span class="s2">&quot;atori&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;</span><span class="se">\u0103</span><span class="s2">toare&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;</span><span class="se">\u0103</span><span class="s2">tor&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0103</span><span class="s2">tori&quot;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;at&quot;</span><span class="p">)</span>

                            <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                                <span class="n">r2</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r2</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;at&quot;</span><span class="p">)</span>

                        <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;itiv&quot;</span><span class="p">,</span> <span class="s2">&quot;itiva&quot;</span><span class="p">,</span> <span class="s2">&quot;itive&quot;</span><span class="p">,</span> <span class="s2">&quot;itivi&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;itiv</span><span class="se">\u0103</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;i</span><span class="se">\u0163</span><span class="s2">iune&quot;</span><span class="p">,</span>
                                        <span class="s2">&quot;itoare&quot;</span><span class="p">,</span> <span class="s2">&quot;itor&quot;</span><span class="p">,</span> <span class="s2">&quot;itori&quot;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;it&quot;</span><span class="p">)</span>

                            <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                                <span class="n">r2</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">r2</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;it&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">False</span>
                    <span class="k">break</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">replacement_done</span><span class="p">:</span>
                <span class="k">break</span>

        <span class="c1"># STEP 2: Removal of standard suffixes</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step2_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">r2</span><span class="p">:</span>
                    <span class="n">step2_success</span> <span class="o">=</span> <span class="bp">True</span>

                    <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;iune&quot;</span><span class="p">,</span> <span class="s2">&quot;iuni&quot;</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">5</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;</span><span class="se">\u0163</span><span class="s2">&quot;</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">((</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">5</span><span class="p">],</span> <span class="s2">&quot;t&quot;</span><span class="p">))</span>

                    <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ism&quot;</span><span class="p">,</span> <span class="s2">&quot;isme&quot;</span><span class="p">,</span> <span class="s2">&quot;ist&quot;</span><span class="p">,</span> <span class="s2">&quot;ista&quot;</span><span class="p">,</span> <span class="s2">&quot;iste&quot;</span><span class="p">,</span>
                                    <span class="s2">&quot;isti&quot;</span><span class="p">,</span> <span class="s2">&quot;ist</span><span class="se">\u0103</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;i</span><span class="se">\u015F</span><span class="s2">ti&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ist&quot;</span><span class="p">)</span>

                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 3: Removal of verb suffixes</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">step1_success</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">step2_success</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step3_suffixes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">rv</span><span class="p">:</span>
                        <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;seser</span><span class="se">\u0103\u0163</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;seser</span><span class="se">\u0103</span><span class="s1">m&#39;</span><span class="p">,</span>
                                      <span class="s1">&#39;ser</span><span class="se">\u0103\u0163</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;sese</span><span class="se">\u015F</span><span class="s1">i&#39;</span><span class="p">,</span>
                                      <span class="s1">&#39;seser</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ser</span><span class="se">\u0103</span><span class="s1">m&#39;</span><span class="p">,</span> <span class="s1">&#39;sesem&#39;</span><span class="p">,</span>
                                      <span class="s1">&#39;se</span><span class="se">\u015F</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;ser</span><span class="se">\u0103</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;sese&#39;</span><span class="p">,</span>
                                      <span class="s1">&#39;a</span><span class="se">\u0163</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;e</span><span class="se">\u0163</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;i</span><span class="se">\u0163</span><span class="s1">i&#39;</span><span class="p">,</span>
                                      <span class="s1">&#39;</span><span class="se">\xE2\u0163</span><span class="s1">i&#39;</span><span class="p">,</span> <span class="s1">&#39;sei&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\u0103</span><span class="s1">m&#39;</span><span class="p">,</span>
                                      <span class="s1">&#39;em&#39;</span><span class="p">,</span> <span class="s1">&#39;im&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE2</span><span class="s1">m&#39;</span><span class="p">,</span> <span class="s1">&#39;se&#39;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="k">if</span> <span class="p">(</span><span class="ow">not</span> <span class="n">rv</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span> <span class="ow">and</span>
                                <span class="n">rv</span><span class="p">[</span><span class="n">rv</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span>
                                <span class="s2">&quot;aeio</span><span class="se">\u0103\xE2\xEE</span><span class="s2">&quot;</span><span class="p">):</span>
                                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="k">break</span>

        <span class="c1"># STEP 4: Removal of final vowel</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ie&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0103</span><span class="s2">&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="n">rv</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;I&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">)</span>


        <span class="k">return</span> <span class="n">word</span>



<span class="k">class</span> <span class="nc">RussianStemmer</span><span class="p">(</span><span class="n">_LanguageSpecificStemmer</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Russian Snowball stemmer.</span>

<span class="sd">    :cvar __perfective_gerund_suffixes: Suffixes to be deleted.</span>
<span class="sd">    :type __perfective_gerund_suffixes: tuple</span>
<span class="sd">    :cvar __adjectival_suffixes: Suffixes to be deleted.</span>
<span class="sd">    :type __adjectival_suffixes: tuple</span>
<span class="sd">    :cvar __reflexive_suffixes: Suffixes to be deleted.</span>
<span class="sd">    :type __reflexive_suffixes: tuple</span>
<span class="sd">    :cvar __verb_suffixes: Suffixes to be deleted.</span>
<span class="sd">    :type __verb_suffixes: tuple</span>
<span class="sd">    :cvar __noun_suffixes: Suffixes to be deleted.</span>
<span class="sd">    :type __noun_suffixes: tuple</span>
<span class="sd">    :cvar __superlative_suffixes: Suffixes to be deleted.</span>
<span class="sd">    :type __superlative_suffixes: tuple</span>
<span class="sd">    :cvar __derivational_suffixes: Suffixes to be deleted.</span>
<span class="sd">    :type __derivational_suffixes: tuple</span>
<span class="sd">    :note: A detailed description of the Russian</span>
<span class="sd">           stemming algorithm can be found under</span>
<span class="sd">           http://snowball.tartarus.org/algorithms/russian/stemmer.html</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__perfective_gerund_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;ivshis&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;yvshis&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;vshis&#39;&quot;</span><span class="p">,</span>
                                      <span class="s2">&quot;ivshi&quot;</span><span class="p">,</span> <span class="s2">&quot;yvshi&quot;</span><span class="p">,</span> <span class="s2">&quot;vshi&quot;</span><span class="p">,</span> <span class="s2">&quot;iv&quot;</span><span class="p">,</span>
                                      <span class="s2">&quot;yv&quot;</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="p">)</span>
    <span class="n">__adjectival_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;ui^ushchi^ui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;ui^ushchi^ai^a&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ui^ushchimi&#39;</span><span class="p">,</span> <span class="s1">&#39;ui^ushchymi&#39;</span><span class="p">,</span> <span class="s1">&#39;ui^ushchego&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ui^ushchogo&#39;</span><span class="p">,</span> <span class="s1">&#39;ui^ushchemu&#39;</span><span class="p">,</span> <span class="s1">&#39;ui^ushchomu&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ui^ushchikh&#39;</span><span class="p">,</span> <span class="s1">&#39;ui^ushchykh&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ui^ushchui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;ui^ushchaia&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ui^ushchoi^u&#39;</span><span class="p">,</span> <span class="s1">&#39;ui^ushchei^u&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;i^ushchi^ui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchi^ai^a&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ui^ushchee&#39;</span><span class="p">,</span> <span class="s1">&#39;ui^ushchie&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ui^ushchye&#39;</span><span class="p">,</span> <span class="s1">&#39;ui^ushchoe&#39;</span><span class="p">,</span> <span class="s1">&#39;ui^ushchei`&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ui^ushchii`&#39;</span><span class="p">,</span> <span class="s1">&#39;ui^ushchyi`&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ui^ushchoi`&#39;</span><span class="p">,</span> <span class="s1">&#39;ui^ushchem&#39;</span><span class="p">,</span> <span class="s1">&#39;ui^ushchim&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ui^ushchym&#39;</span><span class="p">,</span> <span class="s1">&#39;ui^ushchom&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchimi&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;i^ushchymi&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchego&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchogo&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;i^ushchemu&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchomu&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchikh&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;i^ushchykh&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchai^a&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;i^ushchoi^u&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchei^u&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchee&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;i^ushchie&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchye&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchoe&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;i^ushchei`&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchii`&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;i^ushchyi`&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchoi`&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchem&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;i^ushchim&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchym&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchom&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;shchi^ui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;shchi^ai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshi^ui^u&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ivshi^ai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshi^ui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshi^ai^a&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;shchimi&#39;</span><span class="p">,</span> <span class="s1">&#39;shchymi&#39;</span><span class="p">,</span> <span class="s1">&#39;shchego&#39;</span><span class="p">,</span> <span class="s1">&#39;shchogo&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;shchemu&#39;</span><span class="p">,</span> <span class="s1">&#39;shchomu&#39;</span><span class="p">,</span> <span class="s1">&#39;shchikh&#39;</span><span class="p">,</span> <span class="s1">&#39;shchykh&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;shchui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;shchai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;shchoi^u&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;shchei^u&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshimi&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshymi&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ivshego&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshogo&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshemu&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshomu&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ivshikh&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshykh&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshui^u&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ivshai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshoi^u&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshei^u&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;yvshimi&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshymi&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshego&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshogo&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;yvshemu&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshomu&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshikh&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshykh&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;yvshui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshoi^u&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;yvshei^u&#39;</span><span class="p">,</span> <span class="s1">&#39;vshi^ui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;vshi^ai^a&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;shchee&#39;</span><span class="p">,</span> <span class="s1">&#39;shchie&#39;</span><span class="p">,</span> <span class="s1">&#39;shchye&#39;</span><span class="p">,</span> <span class="s1">&#39;shchoe&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;shchei`&#39;</span><span class="p">,</span> <span class="s1">&#39;shchii`&#39;</span><span class="p">,</span> <span class="s1">&#39;shchyi`&#39;</span><span class="p">,</span> <span class="s1">&#39;shchoi`&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;shchem&#39;</span><span class="p">,</span> <span class="s1">&#39;shchim&#39;</span><span class="p">,</span> <span class="s1">&#39;shchym&#39;</span><span class="p">,</span> <span class="s1">&#39;shchom&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ivshee&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshie&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshye&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshoe&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ivshei`&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshii`&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshyi`&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ivshoi`&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshem&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshim&#39;</span><span class="p">,</span> <span class="s1">&#39;ivshym&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ivshom&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshee&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshie&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshye&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;yvshoe&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshei`&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshii`&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;yvshyi`&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshoi`&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshem&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;yvshim&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshym&#39;</span><span class="p">,</span> <span class="s1">&#39;yvshom&#39;</span><span class="p">,</span> <span class="s1">&#39;vshimi&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;vshymi&#39;</span><span class="p">,</span> <span class="s1">&#39;vshego&#39;</span><span class="p">,</span> <span class="s1">&#39;vshogo&#39;</span><span class="p">,</span> <span class="s1">&#39;vshemu&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;vshomu&#39;</span><span class="p">,</span> <span class="s1">&#39;vshikh&#39;</span><span class="p">,</span> <span class="s1">&#39;vshykh&#39;</span><span class="p">,</span> <span class="s1">&#39;vshui^u&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;vshai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;vshoi^u&#39;</span><span class="p">,</span> <span class="s1">&#39;vshei^u&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;emi^ui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;emi^ai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;nni^ui^u&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;nni^ai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;vshee&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;vshie&#39;</span><span class="p">,</span> <span class="s1">&#39;vshye&#39;</span><span class="p">,</span> <span class="s1">&#39;vshoe&#39;</span><span class="p">,</span> <span class="s1">&#39;vshei`&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;vshii`&#39;</span><span class="p">,</span> <span class="s1">&#39;vshyi`&#39;</span><span class="p">,</span> <span class="s1">&#39;vshoi`&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;vshem&#39;</span><span class="p">,</span> <span class="s1">&#39;vshim&#39;</span><span class="p">,</span> <span class="s1">&#39;vshym&#39;</span><span class="p">,</span> <span class="s1">&#39;vshom&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;emimi&#39;</span><span class="p">,</span> <span class="s1">&#39;emymi&#39;</span><span class="p">,</span> <span class="s1">&#39;emego&#39;</span><span class="p">,</span> <span class="s1">&#39;emogo&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ememu&#39;</span><span class="p">,</span> <span class="s1">&#39;emomu&#39;</span><span class="p">,</span> <span class="s1">&#39;emikh&#39;</span><span class="p">,</span> <span class="s1">&#39;emykh&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;emui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;emai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;emoi^u&#39;</span><span class="p">,</span> <span class="s1">&#39;emei^u&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;nnimi&#39;</span><span class="p">,</span> <span class="s1">&#39;nnymi&#39;</span><span class="p">,</span> <span class="s1">&#39;nnego&#39;</span><span class="p">,</span> <span class="s1">&#39;nnogo&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;nnemu&#39;</span><span class="p">,</span> <span class="s1">&#39;nnomu&#39;</span><span class="p">,</span> <span class="s1">&#39;nnikh&#39;</span><span class="p">,</span> <span class="s1">&#39;nnykh&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;nnui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;nnai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;nnoi^u&#39;</span><span class="p">,</span> <span class="s1">&#39;nnei^u&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;emee&#39;</span><span class="p">,</span> <span class="s1">&#39;emie&#39;</span><span class="p">,</span> <span class="s1">&#39;emye&#39;</span><span class="p">,</span> <span class="s1">&#39;emoe&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;emei`&#39;</span><span class="p">,</span> <span class="s1">&#39;emii`&#39;</span><span class="p">,</span> <span class="s1">&#39;emyi`&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;emoi`&#39;</span><span class="p">,</span> <span class="s1">&#39;emem&#39;</span><span class="p">,</span> <span class="s1">&#39;emim&#39;</span><span class="p">,</span> <span class="s1">&#39;emym&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;emom&#39;</span><span class="p">,</span> <span class="s1">&#39;nnee&#39;</span><span class="p">,</span> <span class="s1">&#39;nnie&#39;</span><span class="p">,</span> <span class="s1">&#39;nnye&#39;</span><span class="p">,</span> <span class="s1">&#39;nnoe&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;nnei`&#39;</span><span class="p">,</span> <span class="s1">&#39;nnii`&#39;</span><span class="p">,</span> <span class="s1">&#39;nnyi`&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;nnoi`&#39;</span><span class="p">,</span> <span class="s1">&#39;nnem&#39;</span><span class="p">,</span> <span class="s1">&#39;nnim&#39;</span><span class="p">,</span> <span class="s1">&#39;nnym&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;nnom&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;imi&#39;</span><span class="p">,</span> <span class="s1">&#39;ymi&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ego&#39;</span><span class="p">,</span> <span class="s1">&#39;ogo&#39;</span><span class="p">,</span> <span class="s1">&#39;emu&#39;</span><span class="p">,</span> <span class="s1">&#39;omu&#39;</span><span class="p">,</span> <span class="s1">&#39;ikh&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ykh&#39;</span><span class="p">,</span> <span class="s1">&#39;ui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;ai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;oi^u&#39;</span><span class="p">,</span> <span class="s1">&#39;ei^u&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ee&#39;</span><span class="p">,</span> <span class="s1">&#39;ie&#39;</span><span class="p">,</span> <span class="s1">&#39;ye&#39;</span><span class="p">,</span> <span class="s1">&#39;oe&#39;</span><span class="p">,</span> <span class="s1">&#39;ei`&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;ii`&#39;</span><span class="p">,</span> <span class="s1">&#39;yi`&#39;</span><span class="p">,</span> <span class="s1">&#39;oi`&#39;</span><span class="p">,</span> <span class="s1">&#39;em&#39;</span><span class="p">,</span>
                               <span class="s1">&#39;im&#39;</span><span class="p">,</span> <span class="s1">&#39;ym&#39;</span><span class="p">,</span> <span class="s1">&#39;om&#39;</span><span class="p">)</span>
    <span class="n">__reflexive_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;si^a&quot;</span><span class="p">,</span> <span class="s2">&quot;s&#39;&quot;</span><span class="p">)</span>
    <span class="n">__verb_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;esh&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;ei`te&#39;</span><span class="p">,</span> <span class="s1">&#39;ui`te&#39;</span><span class="p">,</span> <span class="s1">&#39;ui^ut&#39;</span><span class="p">,</span>
                         <span class="s2">&quot;ish&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;ete&#39;</span><span class="p">,</span> <span class="s1">&#39;i`te&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ut&#39;</span><span class="p">,</span> <span class="s1">&#39;nno&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ila&#39;</span><span class="p">,</span> <span class="s1">&#39;yla&#39;</span><span class="p">,</span> <span class="s1">&#39;ena&#39;</span><span class="p">,</span> <span class="s1">&#39;ite&#39;</span><span class="p">,</span> <span class="s1">&#39;ili&#39;</span><span class="p">,</span> <span class="s1">&#39;yli&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ilo&#39;</span><span class="p">,</span> <span class="s1">&#39;ylo&#39;</span><span class="p">,</span> <span class="s1">&#39;eno&#39;</span><span class="p">,</span> <span class="s1">&#39;i^at&#39;</span><span class="p">,</span> <span class="s1">&#39;uet&#39;</span><span class="p">,</span> <span class="s1">&#39;eny&#39;</span><span class="p">,</span>
                         <span class="s2">&quot;it&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;yt&#39;&quot;</span><span class="p">,</span> <span class="s1">&#39;ui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;la&#39;</span><span class="p">,</span> <span class="s1">&#39;na&#39;</span><span class="p">,</span> <span class="s1">&#39;li&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;em&#39;</span><span class="p">,</span> <span class="s1">&#39;lo&#39;</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">,</span> <span class="s1">&#39;et&#39;</span><span class="p">,</span> <span class="s1">&#39;ny&#39;</span><span class="p">,</span> <span class="s2">&quot;t&#39;&quot;</span><span class="p">,</span>
                         <span class="s1">&#39;ei`&#39;</span><span class="p">,</span> <span class="s1">&#39;ui`&#39;</span><span class="p">,</span> <span class="s1">&#39;il&#39;</span><span class="p">,</span> <span class="s1">&#39;yl&#39;</span><span class="p">,</span> <span class="s1">&#39;im&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ym&#39;</span><span class="p">,</span> <span class="s1">&#39;en&#39;</span><span class="p">,</span> <span class="s1">&#39;it&#39;</span><span class="p">,</span> <span class="s1">&#39;yt&#39;</span><span class="p">,</span> <span class="s1">&#39;i^u&#39;</span><span class="p">,</span> <span class="s1">&#39;i`&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;l&#39;</span><span class="p">,</span> <span class="s1">&#39;n&#39;</span><span class="p">)</span>
    <span class="n">__noun_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;ii^ami&#39;</span><span class="p">,</span> <span class="s1">&#39;ii^akh&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ami&#39;</span><span class="p">,</span> <span class="s1">&#39;ii^am&#39;</span><span class="p">,</span> <span class="s1">&#39;i^akh&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ami&#39;</span><span class="p">,</span> <span class="s1">&#39;iei`&#39;</span><span class="p">,</span> <span class="s1">&#39;i^am&#39;</span><span class="p">,</span> <span class="s1">&#39;iem&#39;</span><span class="p">,</span> <span class="s1">&#39;akh&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ii^u&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;i^u&quot;</span><span class="p">,</span> <span class="s1">&#39;ii^a&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;i^a&quot;</span><span class="p">,</span> <span class="s1">&#39;ev&#39;</span><span class="p">,</span> <span class="s1">&#39;ov&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ie&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;e&quot;</span><span class="p">,</span> <span class="s1">&#39;ei&#39;</span><span class="p">,</span> <span class="s1">&#39;ii&#39;</span><span class="p">,</span> <span class="s1">&#39;ei`&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;oi`&#39;</span><span class="p">,</span> <span class="s1">&#39;ii`&#39;</span><span class="p">,</span> <span class="s1">&#39;em&#39;</span><span class="p">,</span> <span class="s1">&#39;am&#39;</span><span class="p">,</span> <span class="s1">&#39;om&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;i^u&#39;</span><span class="p">,</span> <span class="s1">&#39;i^a&#39;</span><span class="p">,</span> <span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;e&#39;</span><span class="p">,</span> <span class="s1">&#39;i&#39;</span><span class="p">,</span> <span class="s1">&#39;i`&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="s1">&#39;u&#39;</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span>
    <span class="n">__superlative_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;ei`she&quot;</span><span class="p">,</span> <span class="s2">&quot;ei`sh&quot;</span><span class="p">)</span>
    <span class="n">__derivational_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;ost&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;ost&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stem a Russian word and return the stemmed form.</span>

<span class="sd">        :param word: The word that is stemmed.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :return: The stemmed form.</span>
<span class="sd">        :rtype: unicode</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopwords</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">word</span>

        <span class="n">chr_exceeded</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
            <span class="k">if</span> <span class="nb">ord</span><span class="p">(</span><span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">])</span> <span class="o">&gt;</span> <span class="mi">255</span><span class="p">:</span>
                <span class="n">chr_exceeded</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">break</span>

        <span class="k">if</span> <span class="n">chr_exceeded</span><span class="p">:</span>
            <span class="n">word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__cyrillic_to_roman</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>

        <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">adjectival_removed</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">verb_removed</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">undouble_success</span> <span class="o">=</span> <span class="bp">False</span>
        <span class="n">superlative_removed</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="n">rv</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__regions_russian</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>

        <span class="c1"># Step 1</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__perfective_gerund_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;v&quot;</span><span class="p">,</span> <span class="s2">&quot;vshi&quot;</span><span class="p">,</span> <span class="s2">&quot;vshis&#39;&quot;</span><span class="p">):</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">rv</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span> <span class="o">==</span> <span class="s2">&quot;i^a&quot;</span> <span class="ow">or</span>
                        <span class="n">rv</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span> <span class="o">==</span> <span class="s2">&quot;a&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>
                        <span class="k">break</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">break</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">step1_success</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__reflexive_suffixes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="k">break</span>

            <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__adjectival_suffixes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;i^ushchi^ui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchi^ai^a&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;i^ushchui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchoi^u&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;i^ushchei^u&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchimi&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchymi&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;i^ushchego&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchogo&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchemu&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;i^ushchomu&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchikh&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchykh&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;shchi^ui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;shchi^ai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchee&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;i^ushchie&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchye&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchoe&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;i^ushchei`&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchii`&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchyi`&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;i^ushchoi`&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchem&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchim&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;i^ushchym&#39;</span><span class="p">,</span> <span class="s1">&#39;i^ushchom&#39;</span><span class="p">,</span> <span class="s1">&#39;vshi^ui^u&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;vshi^ai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;shchui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;shchai^a&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;shchoi^u&#39;</span><span class="p">,</span> <span class="s1">&#39;shchei^u&#39;</span><span class="p">,</span> <span class="s1">&#39;emi^ui^u&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;emi^ai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;nni^ui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;nni^ai^a&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;shchimi&#39;</span><span class="p">,</span> <span class="s1">&#39;shchymi&#39;</span><span class="p">,</span> <span class="s1">&#39;shchego&#39;</span><span class="p">,</span> <span class="s1">&#39;shchogo&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;shchemu&#39;</span><span class="p">,</span> <span class="s1">&#39;shchomu&#39;</span><span class="p">,</span> <span class="s1">&#39;shchikh&#39;</span><span class="p">,</span> <span class="s1">&#39;shchykh&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;vshui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;vshai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;vshoi^u&#39;</span><span class="p">,</span> <span class="s1">&#39;vshei^u&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;shchee&#39;</span><span class="p">,</span> <span class="s1">&#39;shchie&#39;</span><span class="p">,</span> <span class="s1">&#39;shchye&#39;</span><span class="p">,</span> <span class="s1">&#39;shchoe&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;shchei`&#39;</span><span class="p">,</span> <span class="s1">&#39;shchii`&#39;</span><span class="p">,</span> <span class="s1">&#39;shchyi`&#39;</span><span class="p">,</span> <span class="s1">&#39;shchoi`&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;shchem&#39;</span><span class="p">,</span> <span class="s1">&#39;shchim&#39;</span><span class="p">,</span> <span class="s1">&#39;shchym&#39;</span><span class="p">,</span> <span class="s1">&#39;shchom&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;vshimi&#39;</span><span class="p">,</span> <span class="s1">&#39;vshymi&#39;</span><span class="p">,</span> <span class="s1">&#39;vshego&#39;</span><span class="p">,</span> <span class="s1">&#39;vshogo&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;vshemu&#39;</span><span class="p">,</span> <span class="s1">&#39;vshomu&#39;</span><span class="p">,</span> <span class="s1">&#39;vshikh&#39;</span><span class="p">,</span> <span class="s1">&#39;vshykh&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;emui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;emai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;emoi^u&#39;</span><span class="p">,</span> <span class="s1">&#39;emei^u&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;nnui^u&#39;</span><span class="p">,</span> <span class="s1">&#39;nnai^a&#39;</span><span class="p">,</span> <span class="s1">&#39;nnoi^u&#39;</span><span class="p">,</span> <span class="s1">&#39;nnei^u&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;vshee&#39;</span><span class="p">,</span> <span class="s1">&#39;vshie&#39;</span><span class="p">,</span> <span class="s1">&#39;vshye&#39;</span><span class="p">,</span> <span class="s1">&#39;vshoe&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;vshei`&#39;</span><span class="p">,</span> <span class="s1">&#39;vshii`&#39;</span><span class="p">,</span> <span class="s1">&#39;vshyi`&#39;</span><span class="p">,</span> <span class="s1">&#39;vshoi`&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;vshem&#39;</span><span class="p">,</span> <span class="s1">&#39;vshim&#39;</span><span class="p">,</span> <span class="s1">&#39;vshym&#39;</span><span class="p">,</span> <span class="s1">&#39;vshom&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;emimi&#39;</span><span class="p">,</span> <span class="s1">&#39;emymi&#39;</span><span class="p">,</span> <span class="s1">&#39;emego&#39;</span><span class="p">,</span> <span class="s1">&#39;emogo&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;ememu&#39;</span><span class="p">,</span> <span class="s1">&#39;emomu&#39;</span><span class="p">,</span> <span class="s1">&#39;emikh&#39;</span><span class="p">,</span> <span class="s1">&#39;emykh&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;nnimi&#39;</span><span class="p">,</span> <span class="s1">&#39;nnymi&#39;</span><span class="p">,</span> <span class="s1">&#39;nnego&#39;</span><span class="p">,</span> <span class="s1">&#39;nnogo&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;nnemu&#39;</span><span class="p">,</span> <span class="s1">&#39;nnomu&#39;</span><span class="p">,</span> <span class="s1">&#39;nnikh&#39;</span><span class="p">,</span> <span class="s1">&#39;nnykh&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;emee&#39;</span><span class="p">,</span> <span class="s1">&#39;emie&#39;</span><span class="p">,</span> <span class="s1">&#39;emye&#39;</span><span class="p">,</span> <span class="s1">&#39;emoe&#39;</span><span class="p">,</span> <span class="s1">&#39;emei`&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;emii`&#39;</span><span class="p">,</span> <span class="s1">&#39;emyi`&#39;</span><span class="p">,</span> <span class="s1">&#39;emoi`&#39;</span><span class="p">,</span> <span class="s1">&#39;emem&#39;</span><span class="p">,</span> <span class="s1">&#39;emim&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;emym&#39;</span><span class="p">,</span> <span class="s1">&#39;emom&#39;</span><span class="p">,</span> <span class="s1">&#39;nnee&#39;</span><span class="p">,</span> <span class="s1">&#39;nnie&#39;</span><span class="p">,</span> <span class="s1">&#39;nnye&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;nnoe&#39;</span><span class="p">,</span> <span class="s1">&#39;nnei`&#39;</span><span class="p">,</span> <span class="s1">&#39;nnii`&#39;</span><span class="p">,</span> <span class="s1">&#39;nnyi`&#39;</span><span class="p">,</span> <span class="s1">&#39;nnoi`&#39;</span><span class="p">,</span>
                              <span class="s1">&#39;nnem&#39;</span><span class="p">,</span> <span class="s1">&#39;nnim&#39;</span><span class="p">,</span> <span class="s1">&#39;nnym&#39;</span><span class="p">,</span> <span class="s1">&#39;nnom&#39;</span><span class="p">):</span>
                        <span class="k">if</span> <span class="p">(</span><span class="n">rv</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span> <span class="o">==</span> <span class="s2">&quot;i^a&quot;</span> <span class="ow">or</span>
                            <span class="n">rv</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span> <span class="o">==</span> <span class="s2">&quot;a&quot;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                            <span class="n">adjectival_removed</span> <span class="o">=</span> <span class="bp">True</span>
                            <span class="k">break</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">adjectival_removed</span> <span class="o">=</span> <span class="bp">True</span>
                        <span class="k">break</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">adjectival_removed</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__verb_suffixes</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;la&quot;</span><span class="p">,</span> <span class="s2">&quot;na&quot;</span><span class="p">,</span> <span class="s2">&quot;ete&quot;</span><span class="p">,</span> <span class="s2">&quot;i`te&quot;</span><span class="p">,</span> <span class="s2">&quot;li&quot;</span><span class="p">,</span>
                                      <span class="s2">&quot;i`&quot;</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">,</span> <span class="s2">&quot;em&quot;</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="s2">&quot;lo&quot;</span><span class="p">,</span> <span class="s2">&quot;no&quot;</span><span class="p">,</span>
                                      <span class="s2">&quot;et&quot;</span><span class="p">,</span> <span class="s2">&quot;i^ut&quot;</span><span class="p">,</span> <span class="s2">&quot;ny&quot;</span><span class="p">,</span> <span class="s2">&quot;t&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;esh&#39;&quot;</span><span class="p">,</span>
                                      <span class="s2">&quot;nno&quot;</span><span class="p">):</span>
                            <span class="k">if</span> <span class="p">(</span><span class="n">rv</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">3</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span> <span class="o">==</span> <span class="s2">&quot;i^a&quot;</span> <span class="ow">or</span>
                                <span class="n">rv</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span> <span class="o">==</span> <span class="s2">&quot;a&quot;</span><span class="p">):</span>
                                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                                <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                                <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                                <span class="n">verb_removed</span> <span class="o">=</span> <span class="bp">True</span>
                                <span class="k">break</span>
                        <span class="k">else</span><span class="p">:</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                            <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                            <span class="n">verb_removed</span> <span class="o">=</span> <span class="bp">True</span>
                            <span class="k">break</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">adjectival_removed</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">verb_removed</span><span class="p">:</span>
                <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__noun_suffixes</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                        <span class="k">break</span>

        <span class="c1"># Step 2</span>
        <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">):</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="c1"># Step 3</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__derivational_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># Step 4</span>
        <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;nn&quot;</span><span class="p">):</span>
            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="n">undouble_success</span> <span class="o">=</span> <span class="bp">True</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undouble_success</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__superlative_suffixes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">superlative_removed</span> <span class="o">=</span> <span class="bp">True</span>
                    <span class="k">break</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;nn&quot;</span><span class="p">):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">undouble_success</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">superlative_removed</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">chr_exceeded</span><span class="p">:</span>
            <span class="n">word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__roman_to_cyrillic</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>


        <span class="k">return</span> <span class="n">word</span>



    <span class="k">def</span> <span class="nf">__regions_russian</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Return the regions RV and R2 which are used by the Russian stemmer.</span>

<span class="sd">        In any word, RV is the region after the first vowel,</span>
<span class="sd">        or the end of the word if it contains no vowel.</span>

<span class="sd">        R2 is the region after the first non-vowel following</span>
<span class="sd">        a vowel in R1, or the end of the word if there is no such non-vowel.</span>

<span class="sd">        R1 is the region after the first non-vowel following a vowel,</span>
<span class="sd">        or the end of the word if there is no such non-vowel.</span>

<span class="sd">        :param word: The Russian word whose regions RV and R2 are determined.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :return: the regions RV and R2 for the respective Russian word.</span>
<span class="sd">        :rtype: tuple</span>
<span class="sd">        :note: This helper method is invoked by the stem method of the subclass</span>
<span class="sd">               RussianStemmer. It is not to be invoked directly!</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">r1</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">r2</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

        <span class="n">vowels</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">)</span>
        <span class="n">word</span> <span class="o">=</span> <span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;i^a&quot;</span><span class="p">,</span> <span class="s2">&quot;A&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;i^u&quot;</span><span class="p">,</span> <span class="s2">&quot;U&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;e`&quot;</span><span class="p">,</span> <span class="s2">&quot;E&quot;</span><span class="p">))</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">vowels</span> <span class="ow">and</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">vowels</span><span class="p">:</span>
                <span class="n">r1</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                <span class="k">break</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">r1</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">r1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">vowels</span> <span class="ow">and</span> <span class="n">r1</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="ow">in</span> <span class="n">vowels</span><span class="p">:</span>
                <span class="n">r2</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                <span class="k">break</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">word</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="ow">in</span> <span class="n">vowels</span><span class="p">:</span>
                <span class="n">rv</span> <span class="o">=</span> <span class="n">word</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">:]</span>
                <span class="k">break</span>

        <span class="n">r2</span> <span class="o">=</span> <span class="p">(</span><span class="n">r2</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;i^a&quot;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="s2">&quot;i^u&quot;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;e`&quot;</span><span class="p">))</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="p">(</span><span class="n">rv</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;A&quot;</span><span class="p">,</span> <span class="s2">&quot;i^a&quot;</span><span class="p">)</span>
              <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;U&quot;</span><span class="p">,</span> <span class="s2">&quot;i^u&quot;</span><span class="p">)</span>
              <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;E&quot;</span><span class="p">,</span> <span class="s2">&quot;e`&quot;</span><span class="p">))</span>


        <span class="k">return</span> <span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">r2</span><span class="p">)</span>



    <span class="k">def</span> <span class="nf">__cyrillic_to_roman</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transliterate a Russian word into the Roman alphabet.</span>

<span class="sd">        A Russian word whose letters consist of the Cyrillic</span>
<span class="sd">        alphabet are transliterated into the Roman alphabet</span>
<span class="sd">        in order to ease the forthcoming stemming process.</span>

<span class="sd">        :param word: The word that is transliterated.</span>
<span class="sd">        :type word: unicode</span>
<span class="sd">        :return: the transliterated word.</span>
<span class="sd">        :rtype: unicode</span>
<span class="sd">        :note: This helper method is invoked by the stem method of the subclass</span>
<span class="sd">               RussianStemmer. It is not to be invoked directly!</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">word</span> <span class="o">=</span> <span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0410</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0430</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0411</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0431</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;b&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0412</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0432</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;v&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0413</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0433</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;g&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0414</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0434</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;d&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0415</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0435</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0401</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0451</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0416</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;zh&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0436</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;zh&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0417</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0437</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;z&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0418</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0438</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0419</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;i`&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0439</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;i`&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u041A</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;k&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u043A</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;k&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u041B</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u043B</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;l&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u041C</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;m&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u043C</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;m&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u041D</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u043D</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;n&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u041E</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u043E</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u041F</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u043F</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;p&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0420</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0440</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0421</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0441</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0422</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;t&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0442</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;t&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0423</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0443</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0424</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0444</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;f&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0425</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;kh&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0445</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;kh&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0426</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;t^s&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0446</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;t^s&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0427</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;ch&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0447</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;ch&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0428</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;sh&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0448</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;sh&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0429</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;shch&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u0449</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;shch&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u042A</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u044A</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;&#39;&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u042B</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u044B</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u042C</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u044C</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;&#39;&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u042D</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;e`&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u044D</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;e`&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u042E</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;i^u&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u044E</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;i^u&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u042F</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;i^a&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\u044F</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;i^a&quot;</span><span class="p">))</span>


        <span class="k">return</span> <span class="n">word</span>



    <span class="k">def</span> <span class="nf">__roman_to_cyrillic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Transliterate a Russian word back into the Cyrillic alphabet.</span>

<span class="sd">        A Russian word formerly transliterated into the Roman alphabet</span>
<span class="sd">        in order to ease the stemming process, is transliterated back</span>
<span class="sd">        into the Cyrillic alphabet, its original form.</span>

<span class="sd">        :param word: The word that is transliterated.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :return: word, the transliterated word.</span>
<span class="sd">        :rtype: unicode</span>
<span class="sd">        :note: This helper method is invoked by the stem method of the subclass</span>
<span class="sd">               RussianStemmer. It is not to be invoked directly!</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">word</span> <span class="o">=</span> <span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;i^u&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u044E</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;i^a&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u044F</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;shch&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0449</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;kh&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0445</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;t^s&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0446</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;ch&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0447</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;e`&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u044D</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;i`&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0439</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;sh&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0448</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;k&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u043A</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0435</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;zh&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0436</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0430</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;b&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0431</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;v&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0432</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;g&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0433</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;d&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0434</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0435</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;z&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0437</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;i&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0438</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;l&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u043B</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;m&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u043C</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;n&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u043D</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u043E</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;p&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u043F</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0440</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0441</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;t&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0442</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;u&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0443</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;f&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u0444</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u044A</span><span class="s2">&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;y&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u044B</span><span class="s2">&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;&#39;&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\u044C</span><span class="s2">&quot;</span><span class="p">))</span>


        <span class="k">return</span> <span class="n">word</span>


<span class="k">class</span> <span class="nc">SpanishStemmer</span><span class="p">(</span><span class="n">_StandardStemmer</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Spanish Snowball stemmer.</span>

<span class="sd">    :cvar __vowels: The Spanish vowels.</span>
<span class="sd">    :type __vowels: unicode</span>
<span class="sd">    :cvar __step0_suffixes: Suffixes to be deleted in step 0 of the algorithm.</span>
<span class="sd">    :type __step0_suffixes: tuple</span>
<span class="sd">    :cvar __step1_suffixes: Suffixes to be deleted in step 1 of the algorithm.</span>
<span class="sd">    :type __step1_suffixes: tuple</span>
<span class="sd">    :cvar __step2a_suffixes: Suffixes to be deleted in step 2a of the algorithm.</span>
<span class="sd">    :type __step2a_suffixes: tuple</span>
<span class="sd">    :cvar __step2b_suffixes: Suffixes to be deleted in step 2b of the algorithm.</span>
<span class="sd">    :type __step2b_suffixes: tuple</span>
<span class="sd">    :cvar __step3_suffixes: Suffixes to be deleted in step 3 of the algorithm.</span>
<span class="sd">    :type __step3_suffixes: tuple</span>
<span class="sd">    :note: A detailed description of the Spanish</span>
<span class="sd">           stemming algorithm can be found under</span>
<span class="sd">           http://snowball.tartarus.org/algorithms/spanish/stemmer.html</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__vowels</span> <span class="o">=</span> <span class="s2">&quot;aeiou</span><span class="se">\xE1\xE9\xED\xF3\xFA\xFC</span><span class="s2">&quot;</span>
    <span class="n">__step0_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;selas&quot;</span><span class="p">,</span> <span class="s2">&quot;selos&quot;</span><span class="p">,</span> <span class="s2">&quot;sela&quot;</span><span class="p">,</span> <span class="s2">&quot;selo&quot;</span><span class="p">,</span> <span class="s2">&quot;las&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;les&quot;</span><span class="p">,</span> <span class="s2">&quot;los&quot;</span><span class="p">,</span> <span class="s2">&quot;nos&quot;</span><span class="p">,</span> <span class="s2">&quot;me&quot;</span><span class="p">,</span> <span class="s2">&quot;se&quot;</span><span class="p">,</span> <span class="s2">&quot;la&quot;</span><span class="p">,</span> <span class="s2">&quot;le&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;lo&quot;</span><span class="p">)</span>
    <span class="n">__step1_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;amientos&#39;</span><span class="p">,</span> <span class="s1">&#39;imientos&#39;</span><span class="p">,</span> <span class="s1">&#39;amiento&#39;</span><span class="p">,</span> <span class="s1">&#39;imiento&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;aciones&#39;</span><span class="p">,</span> <span class="s1">&#39;uciones&#39;</span><span class="p">,</span> <span class="s1">&#39;adoras&#39;</span><span class="p">,</span> <span class="s1">&#39;adores&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ancias&#39;</span><span class="p">,</span> <span class="s1">&#39;log</span><span class="se">\xED</span><span class="s1">as&#39;</span><span class="p">,</span> <span class="s1">&#39;encias&#39;</span><span class="p">,</span> <span class="s1">&#39;amente&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;idades&#39;</span><span class="p">,</span> <span class="s1">&#39;anzas&#39;</span><span class="p">,</span> <span class="s1">&#39;ismos&#39;</span><span class="p">,</span> <span class="s1">&#39;ables&#39;</span><span class="p">,</span> <span class="s1">&#39;ibles&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;istas&#39;</span><span class="p">,</span> <span class="s1">&#39;adora&#39;</span><span class="p">,</span> <span class="s1">&#39;aci</span><span class="se">\xF3</span><span class="s1">n&#39;</span><span class="p">,</span> <span class="s1">&#39;antes&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ancia&#39;</span><span class="p">,</span> <span class="s1">&#39;log</span><span class="se">\xED</span><span class="s1">a&#39;</span><span class="p">,</span> <span class="s1">&#39;uci</span><span class="se">\xf3</span><span class="s1">n&#39;</span><span class="p">,</span> <span class="s1">&#39;encia&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;mente&#39;</span><span class="p">,</span> <span class="s1">&#39;anza&#39;</span><span class="p">,</span> <span class="s1">&#39;icos&#39;</span><span class="p">,</span> <span class="s1">&#39;icas&#39;</span><span class="p">,</span> <span class="s1">&#39;ismo&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;able&#39;</span><span class="p">,</span> <span class="s1">&#39;ible&#39;</span><span class="p">,</span> <span class="s1">&#39;ista&#39;</span><span class="p">,</span> <span class="s1">&#39;osos&#39;</span><span class="p">,</span> <span class="s1">&#39;osas&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ador&#39;</span><span class="p">,</span> <span class="s1">&#39;ante&#39;</span><span class="p">,</span> <span class="s1">&#39;idad&#39;</span><span class="p">,</span> <span class="s1">&#39;ivas&#39;</span><span class="p">,</span> <span class="s1">&#39;ivos&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ico&#39;</span><span class="p">,</span>
                        <span class="s1">&#39;ica&#39;</span><span class="p">,</span> <span class="s1">&#39;oso&#39;</span><span class="p">,</span> <span class="s1">&#39;osa&#39;</span><span class="p">,</span> <span class="s1">&#39;iva&#39;</span><span class="p">,</span> <span class="s1">&#39;ivo&#39;</span><span class="p">)</span>
    <span class="n">__step2a_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;yeron&#39;</span><span class="p">,</span> <span class="s1">&#39;yendo&#39;</span><span class="p">,</span> <span class="s1">&#39;yamos&#39;</span><span class="p">,</span> <span class="s1">&#39;yais&#39;</span><span class="p">,</span> <span class="s1">&#39;yan&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;yen&#39;</span><span class="p">,</span> <span class="s1">&#39;yas&#39;</span><span class="p">,</span> <span class="s1">&#39;yes&#39;</span><span class="p">,</span> <span class="s1">&#39;ya&#39;</span><span class="p">,</span> <span class="s1">&#39;ye&#39;</span><span class="p">,</span> <span class="s1">&#39;yo&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;y</span><span class="se">\xF3</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">__step2b_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;ar</span><span class="se">\xED</span><span class="s1">amos&#39;</span><span class="p">,</span> <span class="s1">&#39;er</span><span class="se">\xED</span><span class="s1">amos&#39;</span><span class="p">,</span> <span class="s1">&#39;ir</span><span class="se">\xED</span><span class="s1">amos&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;i</span><span class="se">\xE9</span><span class="s1">ramos&#39;</span><span class="p">,</span> <span class="s1">&#39;i</span><span class="se">\xE9</span><span class="s1">semos&#39;</span><span class="p">,</span> <span class="s1">&#39;ar</span><span class="se">\xED</span><span class="s1">ais&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;aremos&#39;</span><span class="p">,</span> <span class="s1">&#39;er</span><span class="se">\xED</span><span class="s1">ais&#39;</span><span class="p">,</span> <span class="s1">&#39;eremos&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ir</span><span class="se">\xED</span><span class="s1">ais&#39;</span><span class="p">,</span> <span class="s1">&#39;iremos&#39;</span><span class="p">,</span> <span class="s1">&#39;ierais&#39;</span><span class="p">,</span> <span class="s1">&#39;ieseis&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;asteis&#39;</span><span class="p">,</span> <span class="s1">&#39;isteis&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">bamos&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">ramos&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">semos&#39;</span><span class="p">,</span> <span class="s1">&#39;ar</span><span class="se">\xED</span><span class="s1">an&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ar</span><span class="se">\xED</span><span class="s1">as&#39;</span><span class="p">,</span> <span class="s1">&#39;ar</span><span class="se">\xE9</span><span class="s1">is&#39;</span><span class="p">,</span> <span class="s1">&#39;er</span><span class="se">\xED</span><span class="s1">an&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;er</span><span class="se">\xED</span><span class="s1">as&#39;</span><span class="p">,</span> <span class="s1">&#39;er</span><span class="se">\xE9</span><span class="s1">is&#39;</span><span class="p">,</span> <span class="s1">&#39;ir</span><span class="se">\xED</span><span class="s1">an&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ir</span><span class="se">\xED</span><span class="s1">as&#39;</span><span class="p">,</span> <span class="s1">&#39;ir</span><span class="se">\xE9</span><span class="s1">is&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ieran&#39;</span><span class="p">,</span> <span class="s1">&#39;iesen&#39;</span><span class="p">,</span> <span class="s1">&#39;ieron&#39;</span><span class="p">,</span> <span class="s1">&#39;iendo&#39;</span><span class="p">,</span> <span class="s1">&#39;ieras&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ieses&#39;</span><span class="p">,</span> <span class="s1">&#39;abais&#39;</span><span class="p">,</span> <span class="s1">&#39;arais&#39;</span><span class="p">,</span> <span class="s1">&#39;aseis&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">amos&#39;</span><span class="p">,</span> <span class="s1">&#39;ar</span><span class="se">\xE1</span><span class="s1">n&#39;</span><span class="p">,</span> <span class="s1">&#39;ar</span><span class="se">\xE1</span><span class="s1">s&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ar</span><span class="se">\xED</span><span class="s1">a&#39;</span><span class="p">,</span> <span class="s1">&#39;er</span><span class="se">\xE1</span><span class="s1">n&#39;</span><span class="p">,</span> <span class="s1">&#39;er</span><span class="se">\xE1</span><span class="s1">s&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;er</span><span class="se">\xED</span><span class="s1">a&#39;</span><span class="p">,</span> <span class="s1">&#39;ir</span><span class="se">\xE1</span><span class="s1">n&#39;</span><span class="p">,</span> <span class="s1">&#39;ir</span><span class="se">\xE1</span><span class="s1">s&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ir</span><span class="se">\xED</span><span class="s1">a&#39;</span><span class="p">,</span> <span class="s1">&#39;iera&#39;</span><span class="p">,</span> <span class="s1">&#39;iese&#39;</span><span class="p">,</span> <span class="s1">&#39;aste&#39;</span><span class="p">,</span> <span class="s1">&#39;iste&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;aban&#39;</span><span class="p">,</span> <span class="s1">&#39;aran&#39;</span><span class="p">,</span> <span class="s1">&#39;asen&#39;</span><span class="p">,</span> <span class="s1">&#39;aron&#39;</span><span class="p">,</span> <span class="s1">&#39;ando&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;abas&#39;</span><span class="p">,</span> <span class="s1">&#39;adas&#39;</span><span class="p">,</span> <span class="s1">&#39;idas&#39;</span><span class="p">,</span> <span class="s1">&#39;aras&#39;</span><span class="p">,</span> <span class="s1">&#39;ases&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;</span><span class="se">\xED</span><span class="s1">ais&#39;</span><span class="p">,</span> <span class="s1">&#39;ados&#39;</span><span class="p">,</span> <span class="s1">&#39;idos&#39;</span><span class="p">,</span> <span class="s1">&#39;amos&#39;</span><span class="p">,</span> <span class="s1">&#39;imos&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;emos&#39;</span><span class="p">,</span> <span class="s1">&#39;ar</span><span class="se">\xE1</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ar</span><span class="se">\xE9</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;er</span><span class="se">\xE1</span><span class="s1">&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;er</span><span class="se">\xE9</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ir</span><span class="se">\xE1</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ir</span><span class="se">\xE9</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;aba&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ada&#39;</span><span class="p">,</span> <span class="s1">&#39;ida&#39;</span><span class="p">,</span> <span class="s1">&#39;ara&#39;</span><span class="p">,</span> <span class="s1">&#39;ase&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xED</span><span class="s1">an&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;ado&#39;</span><span class="p">,</span> <span class="s1">&#39;ido&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xED</span><span class="s1">as&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xE1</span><span class="s1">is&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;</span><span class="se">\xE9</span><span class="s1">is&#39;</span><span class="p">,</span> <span class="s1">&#39;</span><span class="se">\xED</span><span class="s1">a&#39;</span><span class="p">,</span> <span class="s1">&#39;ad&#39;</span><span class="p">,</span> <span class="s1">&#39;ed&#39;</span><span class="p">,</span> <span class="s1">&#39;id&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;an&#39;</span><span class="p">,</span> <span class="s1">&#39;i</span><span class="se">\xF3</span><span class="s1">&#39;</span><span class="p">,</span> <span class="s1">&#39;ar&#39;</span><span class="p">,</span> <span class="s1">&#39;er&#39;</span><span class="p">,</span> <span class="s1">&#39;ir&#39;</span><span class="p">,</span> <span class="s1">&#39;as&#39;</span><span class="p">,</span>
                         <span class="s1">&#39;</span><span class="se">\xED</span><span class="s1">s&#39;</span><span class="p">,</span> <span class="s1">&#39;en&#39;</span><span class="p">,</span> <span class="s1">&#39;es&#39;</span><span class="p">)</span>
    <span class="n">__step3_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xED</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xF3</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stem a Spanish word and return the stemmed form.</span>

<span class="sd">        :param word: The word that is stemmed.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :return: The stemmed form.</span>
<span class="sd">        :rtype: unicode</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopwords</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">word</span>

        <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">False</span>

        <span class="n">r1</span><span class="p">,</span> <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r1r2_standard</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_rv_standard</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>

        <span class="c1"># STEP 0: Attached pronoun</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step0_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span> <span class="ow">and</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">)):</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="p">((</span><span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;ando&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">ndo&quot;</span><span class="p">,</span>
                                             <span class="s2">&quot;ar&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">r&quot;</span><span class="p">,</span>
                                             <span class="s2">&quot;er&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">r&quot;</span><span class="p">,</span>
                                             <span class="s2">&quot;iendo&quot;</span><span class="p">,</span> <span class="s2">&quot;i</span><span class="se">\xE9</span><span class="s2">ndo&quot;</span><span class="p">,</span>
                                             <span class="s2">&quot;ir&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xED</span><span class="s2">r&quot;</span><span class="p">)))</span> <span class="ow">or</span>
                <span class="p">(</span><span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;yendo&quot;</span><span class="p">)</span> <span class="ow">and</span>
                    <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;uyendo&quot;</span><span class="p">))):</span>

                <span class="n">word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__replace_accented</span><span class="p">(</span><span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)])</span>
                <span class="n">r1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__replace_accented</span><span class="p">(</span><span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)])</span>
                <span class="n">r2</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__replace_accented</span><span class="p">(</span><span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)])</span>
                <span class="n">rv</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__replace_accented</span><span class="p">(</span><span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)])</span>
            <span class="k">break</span>

        <span class="c1"># STEP 1: Standard suffix removal</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step1_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">continue</span>

            <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;amente&quot;</span> <span class="ow">and</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span>
                <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span>
                <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">6</span><span class="p">]</span>

                <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;iv&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                    <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;at&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;os&quot;</span><span class="p">,</span> <span class="s2">&quot;ic&quot;</span><span class="p">,</span> <span class="s2">&quot;ad&quot;</span><span class="p">)):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

            <span class="k">elif</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="n">step1_success</span> <span class="o">=</span> <span class="bp">True</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;adora&quot;</span><span class="p">,</span> <span class="s2">&quot;ador&quot;</span><span class="p">,</span> <span class="s2">&quot;aci</span><span class="se">\xF3</span><span class="s2">n&quot;</span><span class="p">,</span> <span class="s2">&quot;adoras&quot;</span><span class="p">,</span>
                              <span class="s2">&quot;adores&quot;</span><span class="p">,</span> <span class="s2">&quot;aciones&quot;</span><span class="p">,</span> <span class="s2">&quot;ante&quot;</span><span class="p">,</span> <span class="s2">&quot;antes&quot;</span><span class="p">,</span>
                              <span class="s2">&quot;ancia&quot;</span><span class="p">,</span> <span class="s2">&quot;ancias&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>

                    <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;ic&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;log</span><span class="se">\xED</span><span class="s2">a&quot;</span><span class="p">,</span> <span class="s2">&quot;log</span><span class="se">\xED</span><span class="s2">as&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;log&quot;</span><span class="p">)</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;log&quot;</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;uci</span><span class="se">\xF3</span><span class="s2">n&quot;</span><span class="p">,</span> <span class="s2">&quot;uciones&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">)</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;encia&quot;</span><span class="p">,</span> <span class="s2">&quot;encias&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ente&quot;</span><span class="p">)</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">suffix_replace</span><span class="p">(</span><span class="n">rv</span><span class="p">,</span> <span class="n">suffix</span><span class="p">,</span> <span class="s2">&quot;ente&quot;</span><span class="p">)</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;mente&quot;</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>

                    <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">((</span><span class="s2">&quot;ante&quot;</span><span class="p">,</span> <span class="s2">&quot;able&quot;</span><span class="p">,</span> <span class="s2">&quot;ible&quot;</span><span class="p">)):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">4</span><span class="p">]</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;idad&quot;</span><span class="p">,</span> <span class="s2">&quot;idades&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>

                    <span class="k">for</span> <span class="n">pre_suff</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;abil&quot;</span><span class="p">,</span> <span class="s2">&quot;ic&quot;</span><span class="p">,</span> <span class="s2">&quot;iv&quot;</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">pre_suff</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">pre_suff</span><span class="p">)]</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">pre_suff</span><span class="p">)]</span>

                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;ivo&quot;</span><span class="p">,</span> <span class="s2">&quot;iva&quot;</span><span class="p">,</span> <span class="s2">&quot;ivos&quot;</span><span class="p">,</span> <span class="s2">&quot;ivas&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r2</span> <span class="o">=</span> <span class="n">r2</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="k">if</span> <span class="n">r2</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;at&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
            <span class="k">break</span>

        <span class="c1"># STEP 2a: Verb suffixes beginning &#39;y&#39;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">step1_success</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step2a_suffixes</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span> <span class="ow">and</span>
                        <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span> <span class="o">==</span> <span class="s2">&quot;u&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="k">break</span>

        <span class="c1"># STEP 2b: Other verb suffixes</span>
            <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step2b_suffixes</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;en&quot;</span><span class="p">,</span> <span class="s2">&quot;es&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">is&quot;</span><span class="p">,</span> <span class="s2">&quot;emos&quot;</span><span class="p">):</span>
                        <span class="k">if</span> <span class="n">word</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;gu&quot;</span><span class="p">):</span>
                            <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

                        <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;gu&quot;</span><span class="p">):</span>
                            <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="k">break</span>

        <span class="c1"># STEP 3: Residual suffix</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step3_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">&quot;</span><span class="p">):</span>
                    <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>

                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">:]</span> <span class="o">==</span> <span class="s2">&quot;gu&quot;</span> <span class="ow">and</span> <span class="n">rv</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;u&quot;</span><span class="p">):</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">break</span>

        <span class="n">word</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">__replace_accented</span><span class="p">(</span><span class="n">word</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">word</span>

    <span class="k">def</span> <span class="nf">__replace_accented</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Replaces all accented letters on a word with their non-accented</span>
<span class="sd">        counterparts.</span>

<span class="sd">        :param word: A spanish word, with or without accents</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :return: a word with the accented letters (á, é, í, ó, ú) replaced with</span>
<span class="sd">                 their non-accented counterparts (a, e, i, o, u)</span>
<span class="sd">        :rtype: str or unicode</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">word</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE1</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xE9</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xED</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;i&quot;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xF3</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;o&quot;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\xFA</span><span class="s2">&quot;</span><span class="p">,</span> <span class="s2">&quot;u&quot;</span><span class="p">))</span>


<span class="k">class</span> <span class="nc">SwedishStemmer</span><span class="p">(</span><span class="n">_ScandinavianStemmer</span><span class="p">):</span>

    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    The Swedish Snowball stemmer.</span>

<span class="sd">    :cvar __vowels: The Swedish vowels.</span>
<span class="sd">    :type __vowels: unicode</span>
<span class="sd">    :cvar __s_ending: Letters that may directly appear before a word final &#39;s&#39;.</span>
<span class="sd">    :type __s_ending: unicode</span>
<span class="sd">    :cvar __step1_suffixes: Suffixes to be deleted in step 1 of the algorithm.</span>
<span class="sd">    :type __step1_suffixes: tuple</span>
<span class="sd">    :cvar __step2_suffixes: Suffixes to be deleted in step 2 of the algorithm.</span>
<span class="sd">    :type __step2_suffixes: tuple</span>
<span class="sd">    :cvar __step3_suffixes: Suffixes to be deleted in step 3 of the algorithm.</span>
<span class="sd">    :type __step3_suffixes: tuple</span>
<span class="sd">    :note: A detailed description of the Swedish</span>
<span class="sd">           stemming algorithm can be found under</span>
<span class="sd">           http://snowball.tartarus.org/algorithms/swedish/stemmer.html</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">__vowels</span> <span class="o">=</span> <span class="s2">&quot;aeiouy</span><span class="se">\xE4\xE5\xF6</span><span class="s2">&quot;</span>
    <span class="n">__s_ending</span> <span class="o">=</span> <span class="s2">&quot;bcdfghjklmnoprtvy&quot;</span>
    <span class="n">__step1_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;heterna&quot;</span><span class="p">,</span> <span class="s2">&quot;hetens&quot;</span><span class="p">,</span> <span class="s2">&quot;heter&quot;</span><span class="p">,</span> <span class="s2">&quot;heten&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;anden&quot;</span><span class="p">,</span> <span class="s2">&quot;arnas&quot;</span><span class="p">,</span> <span class="s2">&quot;ernas&quot;</span><span class="p">,</span> <span class="s2">&quot;ornas&quot;</span><span class="p">,</span> <span class="s2">&quot;andes&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;andet&quot;</span><span class="p">,</span> <span class="s2">&quot;arens&quot;</span><span class="p">,</span> <span class="s2">&quot;arna&quot;</span><span class="p">,</span> <span class="s2">&quot;erna&quot;</span><span class="p">,</span> <span class="s2">&quot;orna&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;ande&quot;</span><span class="p">,</span> <span class="s2">&quot;arne&quot;</span><span class="p">,</span> <span class="s2">&quot;aste&quot;</span><span class="p">,</span> <span class="s2">&quot;aren&quot;</span><span class="p">,</span> <span class="s2">&quot;ades&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;erns&quot;</span><span class="p">,</span> <span class="s2">&quot;ade&quot;</span><span class="p">,</span> <span class="s2">&quot;are&quot;</span><span class="p">,</span> <span class="s2">&quot;ern&quot;</span><span class="p">,</span> <span class="s2">&quot;ens&quot;</span><span class="p">,</span> <span class="s2">&quot;het&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;ast&quot;</span><span class="p">,</span> <span class="s2">&quot;ad&quot;</span><span class="p">,</span> <span class="s2">&quot;en&quot;</span><span class="p">,</span> <span class="s2">&quot;ar&quot;</span><span class="p">,</span> <span class="s2">&quot;er&quot;</span><span class="p">,</span> <span class="s2">&quot;or&quot;</span><span class="p">,</span> <span class="s2">&quot;as&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;es&quot;</span><span class="p">,</span> <span class="s2">&quot;at&quot;</span><span class="p">,</span> <span class="s2">&quot;a&quot;</span><span class="p">,</span> <span class="s2">&quot;e&quot;</span><span class="p">,</span> <span class="s2">&quot;s&quot;</span><span class="p">)</span>
    <span class="n">__step2_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;dd&quot;</span><span class="p">,</span> <span class="s2">&quot;gd&quot;</span><span class="p">,</span> <span class="s2">&quot;nn&quot;</span><span class="p">,</span> <span class="s2">&quot;dt&quot;</span><span class="p">,</span> <span class="s2">&quot;gt&quot;</span><span class="p">,</span> <span class="s2">&quot;kt&quot;</span><span class="p">,</span> <span class="s2">&quot;tt&quot;</span><span class="p">)</span>
    <span class="n">__step3_suffixes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;fullt&quot;</span><span class="p">,</span> <span class="s2">&quot;l</span><span class="se">\xF6</span><span class="s2">st&quot;</span><span class="p">,</span> <span class="s2">&quot;els&quot;</span><span class="p">,</span> <span class="s2">&quot;lig&quot;</span><span class="p">,</span> <span class="s2">&quot;ig&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">stem</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">word</span><span class="p">):</span>
        <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Stem a Swedish word and return the stemmed form.</span>

<span class="sd">        :param word: The word that is stemmed.</span>
<span class="sd">        :type word: str or unicode</span>
<span class="sd">        :return: The stemmed form.</span>
<span class="sd">        :rtype: unicode</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">word</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">stopwords</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">word</span>

        <span class="n">r1</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_r1_scandinavian</span><span class="p">(</span><span class="n">word</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">__vowels</span><span class="p">)</span>

        <span class="c1"># STEP 1</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step1_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="o">==</span> <span class="s2">&quot;s&quot;</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">word</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__s_ending</span><span class="p">:</span>
                        <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                        <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                    <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 2</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step2_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="n">r1</span> <span class="o">=</span> <span class="n">r1</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">break</span>

        <span class="c1"># STEP 3</span>
        <span class="k">for</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">__step3_suffixes</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">r1</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="n">suffix</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;els&quot;</span><span class="p">,</span> <span class="s2">&quot;lig&quot;</span><span class="p">,</span> <span class="s2">&quot;ig&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">suffix</span><span class="p">)]</span>
                <span class="k">elif</span> <span class="n">suffix</span> <span class="ow">in</span> <span class="p">(</span><span class="s2">&quot;fullt&quot;</span><span class="p">,</span> <span class="s2">&quot;l</span><span class="se">\xF6</span><span class="s2">st&quot;</span><span class="p">):</span>
                    <span class="n">word</span> <span class="o">=</span> <span class="n">word</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">break</span>

        <span class="k">return</span> <span class="n">word</span>


<span class="k">def</span> <span class="nf">demo</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    This function provides a demonstration of the Snowball stemmers.</span>

<span class="sd">    After invoking this function and specifying a language,</span>
<span class="sd">    it stems an excerpt of the Universal Declaration of Human Rights</span>
<span class="sd">    (which is a part of the NLTK corpus collection) and then prints</span>
<span class="sd">    out the original and the stemmed text.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">re</span>
    <span class="kn">from</span> <span class="nn">nltk.corpus</span> <span class="kn">import</span> <span class="n">udhr</span>

    <span class="n">udhr_corpus</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;danish&quot;</span><span class="p">:</span>     <span class="s2">&quot;Danish_Dansk-Latin1&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;dutch&quot;</span><span class="p">:</span>      <span class="s2">&quot;Dutch_Nederlands-Latin1&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;english&quot;</span><span class="p">:</span>    <span class="s2">&quot;English-Latin1&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;finnish&quot;</span><span class="p">:</span>    <span class="s2">&quot;Finnish_Suomi-Latin1&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;french&quot;</span><span class="p">:</span>     <span class="s2">&quot;French_Francais-Latin1&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;german&quot;</span><span class="p">:</span>     <span class="s2">&quot;German_Deutsch-Latin1&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;hungarian&quot;</span><span class="p">:</span>  <span class="s2">&quot;Hungarian_Magyar-UTF8&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;italian&quot;</span><span class="p">:</span>    <span class="s2">&quot;Italian_Italiano-Latin1&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;norwegian&quot;</span><span class="p">:</span>  <span class="s2">&quot;Norwegian-Latin1&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;porter&quot;</span><span class="p">:</span>     <span class="s2">&quot;English-Latin1&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;portuguese&quot;</span><span class="p">:</span> <span class="s2">&quot;Portuguese_Portugues-Latin1&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;romanian&quot;</span><span class="p">:</span>   <span class="s2">&quot;Romanian_Romana-Latin2&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;russian&quot;</span><span class="p">:</span>    <span class="s2">&quot;Russian-UTF8&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;spanish&quot;</span><span class="p">:</span>    <span class="s2">&quot;Spanish-Latin1&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;swedish&quot;</span><span class="p">:</span>    <span class="s2">&quot;Swedish_Svenska-Latin1&quot;</span><span class="p">,</span>
                   <span class="p">}</span>

    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;******************************&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Demo for the Snowball stemmers&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;******************************&quot;</span><span class="p">)</span>

    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>

        <span class="n">language</span> <span class="o">=</span> <span class="n">compat</span><span class="o">.</span><span class="n">raw_input</span><span class="p">(</span><span class="s2">&quot;Please enter the name of the language &quot;</span> <span class="o">+</span>
                             <span class="s2">&quot;to be demonstrated</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                             <span class="s2">&quot;/&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">SnowballStemmer</span><span class="o">.</span><span class="n">languages</span><span class="p">)</span> <span class="o">+</span>
                             <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span> <span class="o">+</span>
                             <span class="s2">&quot;(enter &#39;exit&#39; in order to leave): &quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">language</span> <span class="o">==</span> <span class="s2">&quot;exit&quot;</span><span class="p">:</span>
            <span class="k">break</span>

        <span class="k">if</span> <span class="n">language</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">SnowballStemmer</span><span class="o">.</span><span class="n">languages</span><span class="p">:</span>
            <span class="k">print</span><span class="p">((</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">Oops, there is no stemmer for this language. &quot;</span> <span class="o">+</span>
                   <span class="s2">&quot;Please try again.</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">))</span>
            <span class="k">continue</span>

        <span class="n">stemmer</span> <span class="o">=</span> <span class="n">SnowballStemmer</span><span class="p">(</span><span class="n">language</span><span class="p">)</span>
        <span class="n">excerpt</span> <span class="o">=</span> <span class="n">udhr</span><span class="o">.</span><span class="n">words</span><span class="p">(</span><span class="n">udhr_corpus</span><span class="p">[</span><span class="n">language</span><span class="p">])</span> <span class="p">[:</span><span class="mi">300</span><span class="p">]</span>

        <span class="n">stemmed</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">stemmer</span><span class="o">.</span><span class="n">stem</span><span class="p">(</span><span class="n">word</span><span class="p">)</span> <span class="k">for</span> <span class="n">word</span> <span class="ow">in</span> <span class="n">excerpt</span><span class="p">)</span>
        <span class="n">stemmed</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">r&quot;(.{,70})\s&quot;</span><span class="p">,</span> <span class="s1">r&#39;\1\n&#39;</span><span class="p">,</span> <span class="n">stemmed</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>
        <span class="n">excerpt</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">excerpt</span><span class="p">)</span>
        <span class="n">excerpt</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s2">r&quot;(.{,70})\s&quot;</span><span class="p">,</span> <span class="s1">r&#39;\1\n&#39;</span><span class="p">,</span> <span class="n">excerpt</span><span class="o">+</span><span class="s1">&#39; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()</span>

        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">70</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;ORIGINAL&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">70</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="n">excerpt</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n\n</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;STEMMED RESULTS&#39;</span><span class="o">.</span><span class="n">center</span><span class="p">(</span><span class="mi">70</span><span class="p">))</span>
        <span class="k">print</span><span class="p">(</span><span class="n">stemmed</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">70</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>


</pre></div>

           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/copybutton.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>